/*!CK:1584443015!*//*1444436567,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["QnJeZ"]); }

__d("AdmanagerAccountStatuses",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ACTIVE:1,DISABLED:2,UNSETTLED:3,PENDING_RISK_REVIEW:7,IN_GRACE_PERIOD:9,PENDING_CLOSURE:100,CLOSED:101,PENDING_SETTLEMENT:102,ANY_ACTIVE:201,ANY_CLOSED:202};},null,{});
__d("AdminSignatureConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SETTING_ATTACH_TO_POST:"shouldAttachToPost",SETTING_ATTACH_TO_COMMENT:"shouldAttachToComment",SETTING_ATTACH_TO_MESSAGE:"shouldAttachToMessage",SETTING_EVER_PROMPTED:"everPromptedUser",SETTING_SIGNATURE_TEXT:"signature",FIELD_PAGE_ID:"pageID",FIELD_SIGNATURE_OPTION_FIELD:"signatureOption",FIELD_SIGNATURE_OPTION_VALUE_FIELD:"signatureOptionValue",FIELD_SIGNATURE_TEXT_FIELD:"signatureText",EVENT_ADMIN_SIGNATURE_PROMPTED:"AdminSignature\/prompted",EVENT_ADMIN_SIGNATURE_SETTING_CHANGED:"AdminSignatureSetting\/changed"};},null,{});
__d("BusinessObjectConstantNames",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ASSET_TYPE:{PAGE:"page",AD_ACCOUNT:"ad-account",PRODUCT_CATALOG:"product-catalog",APP:"app",PIXEL:"pixel",SYSTEM_USER:"system-user",BRAND:"brand",USER:"user",PROJECT:"project",INSTAGRAM_ACCOUNT:"instagram-account",ATLAS_ADVERTISER:"atlas-advertiser",FUNDING_SOURCE:"funding-source",LEGACY_LOGIN:"legacy-login",BUSINESS_REQUEST:"business_request",EXAMPLE_CAT:"example-cat",GRP_PLAN:"grp-plan",PERSONA:"persona",CREDIT_PARTITION:"credit-partition",PAYOUT_METHOD:"payout-method",LIVERAIL_ENTITY:"liverail-entity"},REQUESTED_ASSET_STATUS:{CONFIRMED:"CONFIRMED",PENDING:"PENDING",ERROR:"ERROR"},ACCESS_TYPE:{OWNER:"OWNER",AGENCY:"AGENCY"}};},null,{});
__d("BusinessObjectFeature",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CAN_BE_OWNED_BY_BUSINESS:"CAN_BE_OWNED_BY_BUSINESS",CAN_BE_ASIGNED_TO_AGENCY:"CAN_BE_ASIGNED_TO_AGENCY",CAN_BE_ADDED_TO_PROJECT:"CAN_BE_ADDED_TO_PROJECT",CAN_BE_ADDED_TO_AGENCY_PROJECT:"CAN_BE_ADDED_TO_AGENCY_PROJECT",CAN_BE_ADDED_TO_FAVORITES:"CAN_BE_ADDED_TO_FAVORITES",CAN_BE_ASSIGNED_TO_AD_ACCOUNT:"CAN_BE_ASSIGNED_TO_AD_ACCOUNT",CAN_BE_ASSIGNED_TO_PAGES:"CAN_BE_ASSIGNED_TO_PAGES",HAS_AUTOMATED_SETTINGS:"HAS_AUTOMATED_SETTINGS"};},null,{});
__d("BusinessObjectUIConfigKey",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MenuLabel:"MenuLabel",HomeIcon:"HomeIcon",HomeHoverIcon:"HomeHoverIcon",PluralName:"PluralName",SettingsIcon:"SettingsIcon",SettingsPaneBlankIcon:"SettingsPaneBlankIcon",SettingsUrlPath:"SettingsUrlPath",ContextFieldName:"ContextFieldName",DefaultAssetImage:"DefaultAssetImage",DefaultAssetImageXXLarge:"DefaultAssetImageXXLarge"};},null,{});
__d("BusinessSettingsPanes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={USER:"user",FUNDING_SOURCE:"payment-method",PROJECT:"project",AGENCY:"agency",INFO:"info",LEGACY_LOGIN:"legacy-login",SYSTEM_USER:"system-user",REQUEST:"request",BUSINESS_REQUEST:"business-request",PREFERENCE:"preference",GRAPH:"graph",PAGE:"page",AD_ACCOUNT:"ad-account",PRODUCT_CATALOG:"product-catalog",APP:"app",PIXEL:"pixel",INSTAGRAM_ACCOUNT:"instagram-account",ATLAS_ADVERTISER:"atlas-advertiser",EXAMPLE_CAT:"example-cat",PAYOUT_METHOD:"payout-method",LIVERAIL_ENTITY:"liverail-entity"};},null,{});
__d("PagesPrivateReplyConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={Status:{REPLYABLE:"replyable",ALREADY_REPLIED:"already_replied",RECIPIENT_FILTER:"recipient_filter",EXPIRED:"expired",NOT_USER_CREATED:"not_user_created"},Type:{COMMENT_PAGE_POST:"comment_page_post",COMMENT_WALL_POST:"comment_wall_post",COMMENT_REVIEW:"comment_review",REVIEW:"review",WALL_POST:"wall_post"}};},null,{});
__d("ReactComposerConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ID_PREFIX:"rc.",GK_VIDEO_COPYRIGHT:"video_copyright_confirmation_dialog",GK_MULTILINGUAL_COMPOSER:"multilingual_composer_www"};},null,{});
__d("UFIActionTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={STORY:{CHANGE_ORDER_MODE:"story_change_order_mode",COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SPAM_FETCHED:"story_spam_fetched",TOGGLE_LIKE:"story_toggle_like",TOGGLE_REPLIES:"story_toggle_replies"},COMMENT:{EDIT:"comment_edit",REMOVE:"comment_remove",REMOVE_PREVIEW:"comment_remove_preview",TOGGLE_INLINE_BAN:"comment_toggle_inline_ban",TOGGLE_LIKE:"comment_toggle_like",TOGGLE_MARK_AS_SPAM:"comment_toggle_mark_as_spam",TRANSLATE:"comment_translate"},ADD_COMMENT:{CANCEL:"add_comment_cancel",RETRY_SUBMIT:"add_comment_retry_submit",SUBMIT_EDIT:"add_comment_submit_edit",SUBMIT_NEW:"add_comment_submit_new",TYPING_CHANGE:"add_comment_typing_change"}};},null,{});
__d("UFITranslationConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BING_PAGE_URL:"http:\/\/bing.com\/translator",BING_TRANSLATOR_APP:"bing",FB_TRANSLATOR_APP:"fb",FB_AND_BING_TRANSLATOR_APP:"fb_and_bing"};},null,{});
__d('AppConstants.brands',['AdmanagerAccountStatuses','BusinessSettingsPanes','BusinessObjectUIConfigKey','BusinessObjectConstantNames','BusinessObjectFeature'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=k.ASSET_TYPE,n=k.ACCESS_TYPE,o=k.REQUESTED_ASSET_STATUS,p={APP_NOTICE_ERROR_ADD:'app-notice-error-add',APP_ERROR_REMOVE:'app-error-remove',SET_CONTEXT:'app-set-context',SET_CONTEXT_FROM_URI:'app-set-context-from-uri',UPDATE_CONTEXT:'app-update-context',CHANGE_BRAND:'app-change-brand',FLUSH:'flush',OPEN_DIALOG:'open-dialog',CLOSE_DIALOG:'close-dialog'},q={UPDATE_START:'brand-update-start',UPDATE_SUCCESS:'brand-update-success',UPDATE_ERROR:'brand-update-error'},r={LAZY_LOAD_USER_DATA:'asset-permission-lazy-load-user-data'},s={UPDATE_START:'user-persona-update-start',UPDATE_SUCCESS:'user-persona-update-success',UPDATE_ERROR:'user-persona-update-error',CLEAR_STATUS:'user-persona-clear-status'},t={ADS_BUSINESS:'ADS_BUSINESS',ADS_SEQUENTIAL:'ADS_SEQUENTIAL'},u={CREATE_START:'user-request-create-start',CREATE_SUCCESS:'user-request-create-success',CREATE_ERROR:'user-request-create-error',UPDATE_START:'user-request-update-start',UPDATE_SUCCESS:'user-request-update-success',UPDATE_ERROR:'user-request-update-error',UPDATE_DISMISS_MESSAGE:'user-request-update-dismiss-message',UPDATE_STATUS:'user-request-update-status',DELETE_START:'user-request-delete-start',DELETE_ERROR:'user-request-delete-error',DELETE_SUCCESS:'user-request-delete-success',LEAVE_BUSINESS_START:'user-request-leave-business-start',LEAVE_BUSINESS_ERROR:'user-request-leave-business-error',LEAVE_BUSINESS_SUCCESS:'user-request-leave-business-success'},v={NAME_CHANGE:'project-name-change',CREATE_START:'project-create-start',CREATE_SUCCESS:'project-create-success',CREATE_ERROR:'project-create-error',DELETE_START:'project-delete-start',DELETE_SUCCESS:'project-delete-success',DELETE_ERROR:'project-delete-error',UPDATE_START:'project-update-start',UPDATE_SUCCESS:'project-update-success',UPDATE_ERROR:'project-update-error',ADD_ASSETS_START:'project-add-assets-start',ADD_ASSETS_SUCCESS:'project-add-assets-success',ADD_ASSETS_ERROR:'project-add-assets-error',DELETE_ASSET_START:'project-delete-asset-start',DELETE_ASSET_SUCCESS:'project-delete-asset-success',DELETE_ASSET_ERROR:'project-delete-asset-error',CLEAR_STATUS:'project-clear-status'},w={CREATE_SUCCESS:'request-create-success',UPDATE_SUCCESS:'request-update-success',DELETE_SUCCESS:'request-delete-success'},x={FETCH_SUCCESS:'page-fetch-success',CLEAR_STATUS:'page-create-clear-status',CREATE_START:'page-create-start',CREATE_SUCCESS:'page-create-success',CREATE_ERROR:'page-create-error',DELETE_START:'page-delete-start',DELETE_SUCCESS:'page-delete-success',DELETE_ERROR:'page-delete-error',MIGRATE_START:'page-migrate-start',MIGRATE_SUCCESS:'page-migrate-success',MIGRATE_ERROR:'page-migrate-error'},y={CREATE_START:'product-catalog-create-start',CREATE_SUCCESS:'product-catalog-create-success',CREATE_ERROR:'product-catalog-create-error',DELETE_START:'product-catalog-delete-start',DELETE_SUCCESS:'product-catalog-delete-success',DELETE_ERROR:'product-catalog-delete-error',OPT_OUT_STATUS_FETCH_START:'product-catalog-opt-out-status-fetch-start',OPT_OUT_STATUS_FETCH_SUCCESS:'product-catalog-opt-out-status-fetch-success',OPT_OUT_STATUS_FETCH_ERROR:'product-catalog-opt-out-status-fetch-error',OPT_OUT_STATUS_UPDATE_START:'product-catalog-opt-out-status-update-start',OPT_OUT_STATUS_UPDATE_SUCCESS:'product-catalog-opt-out-status-update-success',OPT_OUT_STATUS_UPDATE_ERROR:'product-catalog-opt-out-status-update-error'},z={DELETE_START:'asset-permission-delete-start',DELETE_SUCCESS:'asset-permission-delete-success',DELETE_ERROR:'asset-permission-delete-error',UPDATE_START:'asset-permission-update-start',UPDATE_SUCCESS:'asset-permission-update-success',UPDATE_ERROR:'asset-permission-update-error',CLEAR_STATUS:'asset-permission-clear-status',CLEAR_USER_STATUS:'asset-permission-clear-user-status'},aa={DELETE_START:'agency-delete-start',DELETE_SUCCESS:'agency-delete-success',DELETE_ERROR:'agency-delete-error',UPDATE_START:'agency-update-start',UPDATE_SUCCESS:'agency-update-success',UPDATE_ERROR:'agency-update-error'},ba={DELETE_START:'agency-permission-delete-start',DELETE_SUCCESS:'agency-permission-delete-success',DELETE_ERROR:'agency-permission-delete-error',UPDATE_START:'agency-permission-update-start',UPDATE_SUCCESS:'agency-permission-update-success',UPDATE_ERROR:'agency-permission-update-error'},ca={BUSINESS_ACCOUNT:'Business Manager',AD_ACCOUNT:'ad account',PAGE:'Page',PRODUCT_CATALOG:'product catalog',USER:'user'},da={ACCEPT_START:'agency-request-request-start',ACCEPT_SUCCESS:'agency-request-delete-success',ACCEPT_ERROR:'agency-request-delete-error',REJECT_START:'agency-request-update-start',REJECT_SUCCESS:'agency-request-update-success',REJECT_ERROR:'agency-request-update-error'},ea={CREATE_START:'business-request-create-start',CREATE_SUCCESS:'business-request-create-success',CREATE_ERROR:'business-request-create-error',DELETE_START:'business-request-delete-start',DELETE_SUCCESS:'business-request-delete-success',DELETE_ERROR:'business-request-delete-error',ACCEPT_START:'business-request-accept-start',ACCEPT_SUCCESS:'business-request-accept-success',ACCEPT_ERROR:'business-request-accept-error',REJECT_START:'business-request-decline-start',REJECT_SUCCESS:'business-request-decline-success',REJECT_ERROR:'business-request-decline-error'},fa={APPROVE:'APPROVE',DECLINE:'DECLINE',IN_PROGRESS:'IN_PROGRESS'},ga={AGENCY_ACCESS_TO_OBJECT:'AGENCY_ACCESS_TO_OBJECT'},ha={DELETE_START:'client-delete-start',DELETE_SUCCESS:'client-delete-success',DELETE_ERROR:'client-delete-error',UPDATE_START:'client-update-start',UPDATE_SUCCESS:'client-update-success',UPDATE_ERROR:'client-update-error'},ia={DELETE_START:'client-permission-delete-start',DELETE_SUCCESS:'client-permission-delete-success',DELETE_ERROR:'client-permission-delete-error',UPDATE_START:'client-permission-update-start',UPDATE_SUCCESS:'client-permission-update-success',UPDATE_ERROR:'client-permission-update-error'},ja={ROLES:'roles',OWNERSHIP:'ownership'},ka={CREATE_ERROR:'funding-source-create-error',CREATE_START:'funding-source-create-start',CREATE_SUCCESS:'funding-source-create-success',DELETE_START:'funding-source-delete-start',DELETE_SUCCESS:'funding-source-delete-success',DELETE_ERROR:'funding-source-delete-error',FETCH_ERROR:'funding-source-fetch-error'},la={CLAIM_START:'ad-account-claim-start',CLAIM_SUCCESS:'ad-account-claim-success',CLAIM_ERROR:'ad-account-claim-error',CREATE_START:'ad-account-create-start',CREATE_SUCCESS:'ad-account-create-success',CREATE_ERROR:'ad-account-create-error',UPDATE_START:'ad-account-update-start',UPDATE_SUCCESS:'ad-account-update-success',UPDATE_ERROR:'ad-account-update-error',MIGRATE_START:'ad-account-migrate-start',MIGRATE_SUCCESS:'ad-account-migrate-success',MIGRATE_ERROR:'ad-account-migrate-error',DELETE_REQUEST_START:'ad-account-delete-request-start',DELETE_REQUEST_SUCCESS:'ad-account-delete-request-success',DELETE_REQUEST_ERROR:'ad-account-delete-request-error',DELETE_START:'ad-account-delete-start',DELETE_ERROR:'ad-account-delete-error',DELETE_SUCCESS:'ad-account-delete-success',REMOVE_FROM_GROUP_START:'ad-account-remove-from-group-start',REMOVE_FROM_GROUP_ERROR:'ad-account-remove-from-group-error',REMOVE_FROM_GROUP_SUCCESS:'ad-account-remove-from-group-success',FETCH_ERROR:'ad-account-fetch-error'},ma={CLEAR_STATUS:'app-create-clear-status',UPDATE_START:'app-update-start',UPDATE_SUCCESS:'app-update-success',UPDATE_ERROR:'app-update-error',MIGRATE_START:'app-migrate-start',MIGRATE_SUCCESS:'app-migrate-success',MIGRATE_ERROR:'app-migrate-error',DELETE_START:'app-delete-start',DELETE_SUCCESS:'app-delete-success',DELETE_ERROR:'app-delete-error'},na={CREATE_START:'system-user-create-start',CREATE_SUCCESS:'system-user-create-success',CREATE_ERROR:'system-user-create-error',UPDATE_START:'system-user-update-start',UPDATE_SUCCESS:'system-user-update-success',UPDATE_ERROR:'system-user-update-error',UPDATE_DISMISS_MESSAGE:'system-user-update-dismiss-message',DELETE_REQUEST_START:'system-user-delete-request-start',DELETE_REQUEST_SUCCESS:'system-user-delete-request-success',DELETE_REQUEST_ERROR:'system-user-delete-request-error',DELETE_START:'system-user-delete-start',DELETE_ERROR:'system-user-delete-error',DELETE_SUCCESS:'system-user-delete-success',FETCH_ERROR:'system-user-fetch-error'},oa={CREATE_START:'shared-login-create-start',CREATE_SUCCESS:'shared-login-create-success',CREATE_ERROR:'shared-login-create-error'},pa={SYNCED:'synced',CREATING:'creating',CREATE_SUCCESS:'create-success',CREATE_ERROR:'create-error',UPDATING:'updating',UPDATE_SUCCESS:'update-success',UPDATE_ERROR:'update-error',DELETING:'deleting',DELETED:'deleted'},qa={EMAIL_REMOVE:'user-persona-email-remove',EMAIL_READD:'user-persona-email-readd',EMAIL_RESENDING:'user-persona-email-resending',EMAIL_RESEND_SUCCESS:'user-persona-email-resend-success',EMAIL_RESEND_ERROR:'user-persona-email-resend-error',EMAIL_RESEND_TIMEOUT:'user-persona-email-resend-timeout'},ra={ACTIVE:'ACTIVE',SUSPENDED:'SUSPENDED',INVITED:'INVITED',NOT_EMPLOYEE:'not-employee'},sa={ADMIN:'ADMIN',MANAGER:'MANAGER',EMPLOYEE:'EMPLOYEE',NO_PERMISSION:'NO_PERMISSION'},ta={ADMIN_SYSTEM_USER:'ADMIN_SYSTEM_USER',SYSTEM_USER:'SYSTEM_USER'},ua={NONE:'NONE',UNFOUND:'UNFOUND'},va={CREDIT_CARD:'credit-card',DIRECT_DEBIT:'direct-debit',EXTENDED_CREDIT:'extended-credit',FACEBOOK_AD_COUPON:'facebook-ad-coupon',PAYPAL:'paypal'},wa={CLIENT_RESPONSE_PENDING:'CLIENT_RESPONSE_PENDING',AGENCY_RESPONSE_PENDING:'AGENCY_RESPONSE_PENDING',CONFIRMED:'CONFIRMED',SUSPENDED:'SUSPENDED'},xa={OPEN_ADD_USER_DIALOG:'_oaud'},ya={NONE:'none',ADMIN_REQUIRED:'admin_required',ALL_REQUIRED:'all_required'},za={NOTIFICATIONS:'notifications'},ab={UPDATE_START:'preferences-update-start',UPDATE_SUCCESS:'preferences-update-success',UPDATE_ERROR:'preferences-update-error'},bb={CREATE_ADS:'create_ads',MANAGE:'manage',MANAGE_ADS:'manage_ads',USE_NAM:'use_nam',USE_PE:'use_pe',USE_PAGE:'use_page'},cb={CHANGE:'notifications-change',INITIAL_LOAD:'notifications-initial-load',NEW_NOTIFICATION:'new-notification'},db={FETCH_START:'favorites-fetch-start',FETCH_SUCCESS:'favorites-fetch-success',FETCH_ERROR:'favorites-fetch-error',UPDATE_START:'favorites-update-start',UPDATE_SUCCESS:'favorites-update-success',UPDATE_ERROR:'favortes-update-error'},eb={CREATE_START:'credit_partition-create-start',CREATE_SUCCESS:'credit_partition-create-success',CREATE_ERROR:'credit_partition-create-error',DELETE_START:'credit_partition-delete-start',DELETE_SUCCESS:'credit_partition-delete-success',DELETE_ERROR:'credit_partition-delete-error',UPDATE_START:'credit_partition-migrate-start',UPDATE_SUCCESS:'credit_partition-migrate-success',UPDATE_ERROR:'credit_partition-migrate-error'};f.exports={ACCESS_TYPE:n,ACTION:p,ACCOUNT_STATUS:h,AD_ACCOUNT_ACTION:la,AGENCY_ACTION:aa,AGENCY_PERMISSION_ACTION:ba,AGENCY_REQUEST:da,BUSINESS_REQUEST:ea,BUSINESS_REQUEST_ACTION:fa,BUSINESS_REQUEST_TYPE:ga,APP_ACTION:ma,APP_REQUEST_TYPE:ja,API_VERSION:'v2.3',GRAPH_API_VERSION:'2.3',ASSET_PERMISSION_ACTION:z,ASSET_TYPE:m,ATTRIBUTION_TYPE:ua,BRAND_ACTION:q,BUSINESS_SETTING_LOG_OBJECT_TYPE:ca,CLIENT_ACTION:ha,CLIENT_AGENCY_STATUS:wa,CLIENT_PERMISSION_ACTION:ia,DEFAULT_API_LIMIT:3000,DEFAULT_API_ACCUMULATE_LIMIT:750,FUNDING_SOURCE_ACTION:ka,FUNDING_TYPE:va,HOMEPAGE_CARD_ACTION:bb,PROJECT_ACTION:v,REQUEST_ACTION:w,OBJECT_STATUS:pa,PAGE_ACTION:x,PANES:i,PERSONA_OBJECT_STATUS:qa,PRODUCT_CATALOG_ACTION:y,REQUESTED_ASSET_STATUS:o,SHARED_LOGIN_ACTION:oa,SYSTEM_USER_ACTION:na,SYSTEM_USER_ROLE:ta,USER_ACTION:r,USER_PERSONA_ACTION:s,USER_REQUEST_ACTION:u,USER_ROLE:sa,USER_STATUS:ra,URL_PARAMS:xa,TWO_FACTOR_TYPES:ya,PREFERENCES_SECTIONS:za,PREFERENCES_ACTION:ab,FAVORITE_ACTION:db,NOTIFICATIONS:cb,FEATURE_NAME:l,UI_CONFIG_KEY:j,CREDIT_PARTITION_ACTION:eb,CREDIT_TYPE:t};},null);
__d('RTISubscriptionManager',['ChannelConstants','SystemEvents','invariant','setTimeoutAcrossTransitions','Arbiter','ErrorUtils','Run','RTISubscriptionManagerConfig','UserActivity'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q={SUBSCRIBE:'s',UNSUBSCRIBE:'u'},r=300;function s(){this.$RTISubscriptionManager1={};this.$RTISubscriptionManager2=null;this.$RTISubscriptionManager3;this.$RTISubscriptionManager4=false;this.$RTISubscriptionManager5=false;this.$RTISubscriptionManager6=false;this.$RTISubscriptionManager7=true;this.$RTISubscriptionManager8=null;l.subscribe(h.ON_ENTER_STATE,(function(v,w){if(!this.$RTISubscriptionManager8)return;var x=/pull/.test(w.state);if(!this.$RTISubscriptionManager2&&x){this.$RTISubscriptionManager3=true;if(!this.$RTISubscriptionManager4){this.$RTISubscriptionManager4=true;k((function(){this.$RTISubscriptionManager2=this.$RTISubscriptionManager3;this.$RTISubscriptionManager4=false;if(this.$RTISubscriptionManager2)this.flush();}).bind(this),s.PULL_HINT_DELAY_MILLIS);}}else if(!x){this.$RTISubscriptionManager3=false;this.$RTISubscriptionManager2=false;}else if(x){this.$RTISubscriptionManager2=true;this.flush();}}).bind(this));i.subscribe(i.ONLINE,(function(v,w){if(!w){this.$RTISubscriptionManager2=false;this.$RTISubscriptionManager3=false;}}).bind(this));i.subscribe(i.USER,(function(v,w){this.$RTISubscriptionManager2=false;this.$RTISubscriptionManager3=false;this.$RTISubscriptionManager1={};}).bind(this));l.subscribe(h.RTI_SESSION,(function(v,w){if(!this.$RTISubscriptionManager8&&w)this.deleteSubscriptions(function(x){return x.getState()===q.UNSUBSCRIBE;});this.$RTISubscriptionManager8=w;if(this.$RTISubscriptionManager8){this.$RTISubscriptionManager2=true;this.flush();}}).bind(this));l.subscribe(h.ON_INVALID_HISTORY,(function(){this.$RTISubscriptionManager2=true;this.forEachSubscription(function(v,w){w.setDirty(true);});this.getCurrentSession();}).bind(this));this.getCurrentSession();l.subscribe(h.SKYWALKER,function(v,w){var x=w.obj.topic,y={};if(w.obj.payloads===undefined){y.obj=[w.obj.payload];}else y.obj=w.obj.payloads;l.inform(h.getSkywalkerArbiterType(x),y);});}s.prototype.subscribe=function(v,w,x,y){!v?j(0):undefined;!w?j(0):undefined;if(Object.keys(this.$RTISubscriptionManager1).length<this.getMaxSubscriptions()){if(this.isSubscribed(v)){var z=this.$RTISubscriptionManager1[v];if(z&&z.getArbiterToken()){l.unsubscribe(z.getArbiterToken());z.setArbiterToken(null);}}var aa=new u(v,w,x,y),ba=new t(aa);this.$RTISubscriptionManager1[v]=aa;var ca=h.getSkywalkerArbiterType(v),da=l.subscribe(ca,(function(ea,event){var fa=event.obj.length;for(var ga=0;ga<fa;ga++){var ha={topic:v,payload:event.obj[ga]};m.applyWithGuard(w,this,[ha]);}this.$RTISubscriptionManager9();}).bind(this));aa.setArbiterToken(da);this.flush();return ba;}return null;};s.prototype.unsubscribe=function(v){!v?j(0):undefined;if(v in this.$RTISubscriptionManager1){var w=this.$RTISubscriptionManager1[v];w.prepareUnsubscribe();if(w.getArbiterToken()){l.unsubscribe(w.getArbiterToken());w.setArbiterToken(null);}}};s.prototype.unsubscribeAll=function(){this.$RTISubscriptionManager7=true;this.$RTISubscriptionManager5=false;this.flush();};s.prototype.flush=function(){if(this.isReady()&&!this.$RTISubscriptionManager5){this.$RTISubscriptionManager5=true;this.$RTISubscriptionManager6=false;var v=[],w={},x=false;this.forEachSubscription(function(ca,da){if(da.isDirty()){var ea='subscriptions',fa=w[ea];if(!fa){fa=[];w[ea]=fa;}v.push(da);da.setDirty(false);da.setSent(false);var ga={topic:da.getTopic(),state:da.getState(),context:da.getContext()};fa.push(ga);}else x=true;});if(!x&&w.subscriptions&&w.subscriptions.length>0){var y=[];for(var z=0;z<w.subscriptions.length;z++)if(w.subscriptions[z].state!==q.UNSUBSCRIBE)y.push(w.subscriptions[z]);w.subscriptions=y;this.$RTISubscriptionManager7=true;}var aa=(function(ca){var da=ca.data!=null;if(this.$RTISubscriptionManager7&&da)this.$RTISubscriptionManager7=false;for(var ea=0;ea<v.length;ea++){var fa=v[ea];fa.setSent(da);fa.setDirty(!da);var ga=fa.getSubscribeCallback();if(ga!==null)m.applyWithGuard(ga,this,[ca]);}this.deleteSubscriptions(function(ha){return ha.getState()===q.UNSUBSCRIBE&&ha.isSent();});this.$RTISubscriptionManager5=false;if(this.$RTISubscriptionManager6){this.$RTISubscriptionManager6=false;this.flush();}}).bind(this);if(Object.keys(w).length>0){var ba={};if(this.$RTISubscriptionManager7)ba.reset='t';this.$RTISubscriptionManager8.issueRequest('/sub',ba,w,aa);}else this.$RTISubscriptionManager5=false;}else{this.$RTISubscriptionManager6=true;if(!this.$RTISubscriptionManager5)this.getCurrentSession();}};s.prototype.deleteSubscriptions=function(v){!v?j(0):undefined;var w=[];this.forEachSubscription(function(y,z){if(v.apply(this,[z]))w.push(y);});for(var x=0;x<w.length;x++)delete this.$RTISubscriptionManager1[w[x]];};s.prototype.forEachSubscription=function(v){!v?j(0):undefined;for(var w in this.$RTISubscriptionManager1)if(this.$RTISubscriptionManager1.hasOwnProperty(w))v.apply(this,[w,this.$RTISubscriptionManager1[w]]);};s.prototype.isSubscribed=function(v){!v?j(0):undefined;return v in this.$RTISubscriptionManager1;};s.prototype.isReady=function(){if(this.$RTISubscriptionManager8&&this.$RTISubscriptionManager2!==null&&this.$RTISubscriptionManager2)return true;return false;};s.prototype.getCurrentSession=function(){l.inform(h.GET_RTI_SESSION_REQUEST);};s.prototype.getMaxSubscriptions=function(){if(o.config&&o.config.hasOwnProperty('max_subscriptions')){return o.config.max_subscriptions;}else return r;};s.prototype.$RTISubscriptionManager10=function(){if(o.config)return o.config.www_idle_unsubscribe_ms;return null;};s.prototype.$RTISubscriptionManager9=function(){var v=this.$RTISubscriptionManager10();if(!v)return;if(p.isActive(v))return;this.forEachSubscription((function(w,x){var y=x.getTopic();if(y.startsWith('graphql'))this.unsubscribe(y);}).bind(this));};function t(v){this.$SubscriptionToken1=v;}t.prototype.unsubscribe=function(){s.unsubscribe(this.$SubscriptionToken1.getTopic());};function u(v,w,x,y){this.$SubscriptionData1=v;this.$SubscriptionData2=w;this.$SubscriptionData3=true;this.$SubscriptionData4=false;this.$SubscriptionData5=q.SUBSCRIBE;this.$SubscriptionData6=null;if(x){this.$SubscriptionData7=x;}else this.$SubscriptionData7={};if(y){this.$SubscriptionData8=y;}else this.$SubscriptionData8=null;}u.prototype.getTopic=function(){return this.$SubscriptionData1;};u.prototype.getListener=function(){return this.$SubscriptionData2;};u.prototype.getSubscribeCallback=function(){return this.$SubscriptionData8;};u.prototype.getArbiterToken=function(){return this.$SubscriptionData6;};u.prototype.setArbiterToken=function(v){this.$SubscriptionData6=v;};u.prototype.isDirty=function(){return this.$SubscriptionData3;};u.prototype.setDirty=function(v){this.$SubscriptionData3=v;};u.prototype.getState=function(){return this.$SubscriptionData5;};u.prototype.setState=function(v){this.$SubscriptionData5=v;};u.prototype.getContext=function(){return this.$SubscriptionData7;};u.prototype.isSent=function(){return this.$SubscriptionData4;};u.prototype.setSent=function(v){this.$SubscriptionData4=v;};u.prototype.prepareUnsubscribe=function(){this.setState(q.UNSUBSCRIBE);this.setDirty(true);this.setSent(false);};n.onUnload(function(){s.unsubscribeAll();});s.PULL_HINT_DELAY_MILLIS=10000;Object.keys(s.prototype).forEach(function(v){s[v]=function(){var w=s;return s.prototype[v].apply(w,arguments);};});s.call(s);f.exports=s;},null);
__d('UFICommentVPVs',['Map','MarauderLogger','Set'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=new h();function l(o,p){i.log('comment_vpv',undefined,null,'comment',p);if(!k.has(o))k.set(o,new j());k.get(o).add(p);}function m(o,p){if(k.has(o))return k.get(o).has(p);return false;}var n={logVPV:l,hasLoggedVPV:m};f.exports=n;},null);
__d('ReactDispatcher',['Dispatcher','ReactUpdates'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,h);k=j&&j.prototype;l.prototype.dispatch=function(m){i.batchedUpdates((function(){k.dispatch.call(this,m);}).bind(this));};function l(){j.apply(this,arguments);}f.exports=l;},null);
__d('UFIDispatcher',['ReactDispatcher'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h;},null);
__d('UFIAddCommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={cancel:function(j){return {type:h.ADD_COMMENT.CANCEL,instanceid:j};},retrySubmit:function(j){return {type:h.ADD_COMMENT.RETRY_SUBMIT,comment:j};},submitEdit:function(j,k,l){return {type:h.ADD_COMMENT.SUBMIT_EDIT,comment:j,commentData:k,target:l};},submitNew:function(j,k,l,m){return {type:h.ADD_COMMENT.SUBMIT_NEW,comment:j,target:k,replyCommentID:l,replyCommentParentID:m};},typingChange:function(j){return {type:h.ADD_COMMENT.TYPING_CHANGE,state:j};}};f.exports=i;},null);
__d('UFICommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={edit:function(j){return {type:h.COMMENT.EDIT,comment:j};},remove:function(j,k,l){return {type:h.COMMENT.REMOVE,comment:j,target:k,onConfirm:l};},removePreview:function(j,k){return {type:h.COMMENT.REMOVE_PREVIEW,comment:j,target:k};},toggleLike:function(j,k){return {type:h.COMMENT.TOGGLE_LIKE,comment:j,like:!j.hasviewerliked,target:k};},translate:function(j,k){return {type:h.COMMENT.TRANSLATE,comment:j,target:k};},markAsSpam:function(j,k){return {type:h.COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:true,comment:j,target:k};},markAsNotSpam:function(j,k){return {type:h.COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:false,comment:j,target:k};},inlineBan:function(j,k,l){return {type:h.COMMENT.TOGGLE_INLINE_BAN,is_banned:true,comment:j,target:k,ownerid:l};},undoInlineBan:function(j,k,l){return {type:h.COMMENT.TOGGLE_INLINE_BAN,is_banned:false,comment:j,target:k,ownerid:l};}};f.exports=i;},null);
__d('UFICentralUpdates',['Arbiter','BanzaiLogger','BanzaiODS','ChannelConstants','LiveTimer','ShortProfiles','UFIConstants','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();j.setEntitySample('feedback',.0001);var p=0,q={},r={},s={},t={},u=[];h.subscribe(k.getArbiterType('live-data'),function(z,aa){if(aa&&aa.obj){var ba=aa.obj,ca=ba.comments||[];ca.forEach(function(fa){fa.timestamp.text=o._("a few seconds ago");});var da='update';if(ca.length){da='comment';}else if(ba.actions&&ba.actions.length){var ea=ba.actions[0]&&ba.actions[0].actiontype;if(ea===n.UFIActionType.LIKE_ACTION){da='like';}else if(ea===n.UFIActionType.COMMENT_LIKE)da='comment_like';}j.bumpEntityKey('feedback','livesend_'+da+'_received');if(da==='like'||da==='comment')i.log('LiveWWWFeedbackLoggerConfig',{mechanism:'livesend',event:'receive_payload',update_type:da});y.handleUpdate(n.UFIPayloadSourceType.LIVE_SEND,ba);}});function v(){if(!p){var z=s,aa=q,ba=r,ca=t;s={};q={};r={};t={};if(Object.keys(z).length)x('feedback-id-changed',z);if(Object.keys(aa).length)x('feedback-updated',aa);if(Object.keys(ba).length)x('comments-updated',ba);if(Object.keys(ca).length)x('instance-updated',ca);u.pop();}}function w(){if(u.length){return u[u.length-1];}else return n.UFIPayloadSourceType.UNKNOWN;}function x(event,z){y.inform(event,{updates:z,payloadSource:w()});}var y=Object.assign(new h(),{handleUpdate:function(z,aa){if(Object.keys(aa).length)this.synchronizeInforms((function(){u.push(z);var ba=babelHelpers._extends({payloadsource:w()},aa);this.inform('update-feedback',ba);this.inform('update-comment-lists',ba);this.inform('update-comments',ba);this.inform('update-actions',ba);(aa.profiles||[]).forEach(function(ca){m.set(ca.id,ca);});if(aa.servertime)l.restart(aa.servertime);}).bind(this));},didUpdateFeedback:function(z){q[z]=true;v();},didUpdateComment:function(z){r[z]=true;v();},didUpdateFeedbackID:function(z,aa){s[z]=aa;v();},didUpdateInstanceState:function(z,aa){if(!t[z])t[z]={};t[z][aa]=true;v();},synchronizeInforms:function(z){p++;try{z();}catch(aa){throw aa;}finally{p--;v();}}});f.exports=y;},null);
__d('UFIFeedbackTargets',['BanzaiLogger','ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFIConstants'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=new j();function n(x){var y={};x.forEach(function(z){var aa=babelHelpers._extends({},z);delete aa.commentlist;delete aa.commentcount;y[z.entidentifier]=aa;k.didUpdateFeedback(z.entidentifier);});m.addResourcesAndExecute(y);}function o(x,y){for(var z=0;z<x.length;z++){var aa=x[z];switch(aa.actiontype){case l.UFIActionType.LIKE_ACTION:q(aa,y);break;case l.UFIActionType.SUBSCRIBE_ACTION:r(aa);break;case l.UFIActionType.DISABLE_COMMENTS:s(aa);break;case l.UFIActionType.REACTION:t(aa);break;}}}function p(x){for(var y=0;y<x.length;y++){var z=x[y];if(z.orig_ftentidentifier)v(z.orig_ftentidentifier,z.ftentidentifier);}}function q(x,y){var z=u(x);if(z){if(y===l.UFIPayloadSourceType.LIVE_SEND)h.log('LiveWWWFeedbackLoggerConfig',{event:'update_view',update_type:'like'});x.hasviewerliked=!!x.hasviewerliked;if(x.clientid&&i.isExistingClientID(x.clientid)&&x.hasviewerliked!=z.hasviewerliked)return;z.likecount=x.likecount||0;z.likesentences=x.likesentences;if(x.actorid==z.actorforpost){z.hasviewerliked=x.hasviewerliked;}else if(x.hasviewerliked!=z.hasviewerliked){z.likesentences={current:x.likesentences.alternate,alternate:x.likesentences.current};if(z.hasviewerliked){z.likecount++;}else z.likecount--;}if(x.actorid!=z.actorforpost)z.likesentences.isunseen=true;n([z]);}}function r(x){var y=u(x);if(y){x.hasviewersubscribed=!!x.hasviewersubscribed;if(x.clientid&&i.isExistingClientID(x.clientid)&&x.hasviewersubscribed!=y.hasviewersubscribed)return;if(x.actorid==y.actorforpost)y.hasviewersubscribed=x.hasviewersubscribed;n([y]);}}function s(x){var y=u(x);if(y){y.cancomment=!!x.cancomment;y.arecommentsdisabled=!!x.arecommentsdisabled;y.commentdisablednotice=x.commentdisablednotice;n([y]);}}function t(x){var y=u(x);if(y){if(x.clientid&&i.isExistingClientID(x.clientid)&&x.viewerreaction!==y.viewerreaction)return;if(y.actorforpost==x.actorid||y.viewerreaction==x.viewerreaction){y.importantreactorids=x.importantreactorids;y.reactioncount=x.reactioncount;y.reactioncountmap=x.reactioncountmap;y.reactioncountreduced=x.reactioncountreduced;y.reactorids=x.reactorids;y.userreactions=x.userreactions;y.viewerreaction=x.viewerreaction;}n([y]);}}function u(x){if(x.orig_entidentifier)v(x.orig_entidentifier,x.entidentifier);return m.getResource(x.entidentifier);}function v(x,y){var z=m.getResource(x);if(z){m.setResource(x,null);z.entidentifier=y;m.setResource(y,z);k.didUpdateFeedbackID(x,y);}}var w={getFeedbackTarget:function(x,y){var z=m.executeOrEnqueue(x,y),aa=m.getUnavailableResources(z);aa.length;return z;},getActorIDForFeedbackTargetIfExists:function(x){var y=m.getResource(x);return y?y.actorforpost:null;},handleNFB:function(x,y){var z=m.getResource(x);if(z){z.nfbcount=y||0;n([z]);}},unsubscribe:function(x){m.unsubscribe(x);}};k.subscribe('update-feedback',function(x,y){var z=y.feedbacktargets;if(z&&z.length)n(z);});k.subscribe('update-actions',function(x,y){if(y.actions&&y.actions.length)o(y.actions,y.payloadsource);});k.subscribe('update-comments',function(x,y){if(y.comments&&y.comments.length)p(y.comments);});f.exports=w;},6);
__d('UFICommentList',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFIConstants','UFIFeedbackTargets','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=m({actorID:true});function o(p){this.count=0;this.overriddenDisplayCount=null;this.deletedComments={};this.deletedCount=0;this.dataSource=new i();this.feedbackTargetID=p;this.lastRequestedOffset=0;this.lastRequestedLength=0;this.basePermalink="";this.commentPermalinks={};l.getFeedbackTarget(this.feedbackTargetID,(function(q){this.actorID=q.actorforpost;this.basePermalink=q.permalink;}).bind(this));}o.prototype.addOrUpdateComment=function(p){if(p.islocal){this.$UFICommentList1(p.id);}else this.$UFICommentList2(p.id,p.clientid,p.legacyid);j.didUpdateFeedback(this.feedbackTargetID);};o.prototype.$UFICommentList1=function(p){this.dataSource.setResource(this.count,p);this.count++;if(this.overriddenDisplayCount!==null)this.overriddenDisplayCount++;};o.prototype.$UFICommentList2=function(p,q,r){var s=q&&h.isExistingClientID(q),t=this.dataSource.getAllResources(),u={};for(var v in t){var w=t[v];u[w]=v;}if(s&&q in u){u[p]=u[q];var x=u[q];this.dataSource.setResource(x,p);}else if(!u[p]&&q)this.$UFICommentList1(p);if(r&&p in u)this.commentPermalinks[p]=this.buildCommentPermalink(p,r,u[p]);};o.prototype.addCommentIDs=function(p,q,r){var s={};for(var t=0;t<q;t++)s[p+t]=r[t]||k.unavailableCommentKey;this.dataSource.addResourcesAndExecute(s);j.didUpdateFeedback(this.feedbackTargetID);return this;};o.prototype.getComments=function(p,q,r,s){var t=[];for(var u=0;u<q;u++)t.push(p+u);var v=this.dataSource.getUnavailableResourcesFromRequest(t);if(v.length){var w=Math.min.apply(Math,v),x=Math.max.apply(Math,v),y=w,z=x-w+1;if(y<this.lastRequestedOffset||y+z>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=y;this.lastRequestedLength=z;this.fetchComments(y,z,r);}}else this.dataSource.executeOrEnqueue(t,this.deferredCallback.bind(this,p,q,s));};o.prototype.fetchComments=function(p,q,r){};o.prototype.deferredCallback=function(p,q,r,s){};o.prototype.reset=function(){var p=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return p;};o.prototype.deleteComment=function(p){if(!(p in this.deletedComments)){this.deletedComments[p]=true;this.deletedCount++;}};o.prototype.updateCommentCount=function(p){this.count=p;if(this.overriddenDisplayCount!==null)this.overriddenDisplayCount=p;this.deletedCount=0;return this;};o.prototype.updateOverriddenDisplayCount=function(p){this.overriddenDisplayCount=p;return this;};o.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};o.prototype.getCommentCount=function(){return this.count;};o.prototype.getDeletedCount=function(){return this.deletedCount;};o.prototype.getDisplayedCommentCount=function(){if(this.overriddenDisplayCount===null){return this.count-this.deletedCount;}else return this.overriddenDisplayCount;};o.prototype.getBasePermalink=function(){return this.basePermalink;};o.prototype.buildCommentPermalink=function(p,q,r){};o.prototype.getPermalinkForComment=function(p){return this.commentPermalinks[p];};o.isValidContextPropertyForReset=function(p){return p in n;};f.exports=o;},null);
__d('UFICommentOrdering',['UFIConstants'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={inverted:function(j){switch(j){case h.UFICommentOrderingMode.RECENT_ACTIVITY:case h.UFICommentOrderingMode.RANKED_THREADED:case h.UFICommentOrderingMode.FILTERED:case h.UFICommentOrderingMode.LIVE_STREAMING:return true;}return false;}};f.exports=i;},null);
__d('UFIInstanceState',['UFICentralUpdates'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={};function j(l){if(!i[l])i[l]={};}var k={getKeyForInstance:function(l,m){j(l);return i[l][m];},updateState:function(l,m,n){j(l);i[l][m]=n;h.didUpdateInstanceState(l,m);},updateStateField:function(l,m,n,o){var p=this.getKeyForInstance(l,m)||{};p[n]=o;this.updateState(l,m,p);}};f.exports=k;},null);
__d('UFIComments',['BanzaiLogger','ClientIDs','ImmutableObject','UFICentralUpdates','UFIConstants','UFIInstanceState','invariant','randomInt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p={},q={};function r(ga){return ga in q?q[ga]:ga;}function s(ga,ha){ga.forEach(function(ia){var ja=ia.ftentidentifier,ka=l.UFIPayloadSourceType,la=ia.clientid,ma=false,na=babelHelpers._extends({},ia);if(la){delete na.clientid;ma=i.isExistingClientID(la);if(ma&&q[la]){h.log('LiveWWWFeedbackLoggerConfig',{event:'update_view',update_type:'comment'});return;}}if(ha===ka.LIVE_SEND||ha===ka.USER_ACTION||ha===ka.ENDPOINT_ADD_COMMENT||ha===ka.ENDPOINT_EDIT_COMMENT)na.isunseen=true;if(ha===ka.LIVE_SEND)na.islive=true;if(ha===ka.ENDPOINT_COMMENT_FETCH||ha===ka.ENDPOINT_ID_COMMENT_FETCH)na.fromfetch=true;if(ma){if(p[la].ufiinstanceid)m.updateStateField(p[la].ufiinstanceid,'locallycomposed',ia.id,true);na.ufiinstanceid=p[la].ufiinstanceid;q[la]=ia.id;p[ia.id]=p[la];delete p[la];k.didUpdateComment(la);}fa.setComment(ia.id,new j(na));k.didUpdateComment(ia.id);k.didUpdateFeedback(ja);});}function t(ga){for(var ha=0;ha<ga.length;ha++){var ia=ga[ha];switch(ia.actiontype){case l.UFIActionType.LIKE_ACTION:if(fa.getComment(ia.entidentifier))u(ia.clientid,ia.entidentifier,ia.hasviewerliked,ia.likecount);break;case l.UFIActionType.COMMENT_LIKE:u(ia.clientid,ia.commentid,ia.viewerliked,ia.likecount);break;case l.UFIActionType.DELETE_COMMENT:y(ia);break;case l.UFIActionType.LIVE_DELETE_COMMENT:z(ia);break;case l.UFIActionType.REMOVE_PREVIEW:aa(ia);break;case l.UFIActionType.COMMENT_SET_SPAM:ba(ia);break;case l.UFIActionType.CONFIRM_COMMENT_REMOVAL:ca(ia);break;case l.UFIActionType.TRANSLATE_COMMENT:w(ia);break;case l.UFIActionType.COMMENT_LIKECOUNT_UPDATE:v(ia);break;}}}function u(ga,ha,ia,ja){var ka=fa.getComment(ha);if(ka){var la={},ma=ga&&i.isExistingClientID(ga);if(!ma){la.hasviewerliked=ia;la.likecount=ja;}la.likeconfirmhash=o(0,1024);ea(ha,la);}}function v(ga){var ha=fa.getComment(ga.commentid);if(ha&&ga.hasviewerliked===ha.hasviewerliked){var ia={likecount:ga.likecount,likeconfirmhash:o(0,1024)};ea(ga.commentid,ia);}}function w(ga){var ha=ga.commentid,ia=fa.getComment(ha);if(ia){var ja={translatedbody:ga.translatedbody,translatorapp:ga.translatorapp};ea(ha,ja);}}function x(ga){var ha={reportLink:ga.reportLink,commenterIsFOF:ga.commenterIsFOF,userIsMinor:ga.userIsMinor,giveFeedbackLink:ga.giveFeedbackLink};return ha;}function y(ga){var ha=fa.getComment(ga.commentid);da(ha,l.UFIStatus.DELETED);}function z(ga){var ha=fa.getComment(ga.commentid);if(ha&&ha.status!==l.UFIStatus.DELETED)da(ha,l.UFIStatus.LIVE_DELETED);}function aa(ga){ea(ga.commentid,{attachment:null});}function ba(ga){var ha=fa.getComment(ga.commentid),ia=ga.shouldHideAsSpam?l.UFIStatus.SPAM_DISPLAY:null;da(ha,ia);}function ca(ga){ea(ga.commentid,x(ga));}function da(ga,ha){ea(ga.id,{priorstatus:ga.status,status:ha});}function ea(ga,ha){var ia=fa.getComment(ga)||new j({});fa.setComment(ga,j.set(ia,ha));k.didUpdateComment(ia.id);k.didUpdateFeedback(ia.ftentidentifier);}var fa={getComment:function(ga){if(ga===l.unavailableCommentKey)return null;return p[r(ga)];},setComment:function(ga,ha){!(ha instanceof j)?n(0):undefined;p[r(ga)]=ha;},resetComments:function(ga){for(var ha in ga)delete p[r(ha)];}};k.subscribe('update-comments',function(ga,ha){if(ha.comments&&ha.comments.length)s(ha.comments,ha.payloadsource);});k.subscribe('update-actions',function(ga,ha){if(ha.actions&&ha.actions.length)t(ha.actions);});f.exports=fa;},6);
__d('UFIReplyCommentList',['ActorURI','JSLogger','MercuryServerDispatcher','UFICentralUpdates','UFICommentList','UFIComments','UFIConstants','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';var r={},s=i.create('ufi_reply_comment_list');p=babelHelpers.inherits(t,l);q=p&&p.prototype;t.getCommentList=function(v,w){if(!r[w])r[w]=new t(v,w);return r[w];};t.resetWithContext=function(v,w,x){var y=r[w];if(!y)return;y.reset();for(var z in x)if(this.isValidContextPropertyForReset(z))y[z]=x[z];};function t(v,w){q.constructor.call(this,v);this.parentCommentID=w;}t.prototype.fetchComments=function(v,w,x){var y={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[v],lengths:[w],feed_context:x?x.feedContext:null,numpagerclicks:x?x.numPagerClicks:null};if(!x||!x.viewAs)y[h.PARAMETER_ACTOR]=this.actorID;j.trySend('/ajax/ufi/reply_fetch.php',y);};t.prototype.deferredCallback=function(v,w,x,y){var z={};for(var aa=0;aa<w;aa++){var ba=m.getComment(y[v+aa]);if(ba)z[v+aa]=ba;}x(z);};t.prototype.reset=function(){var v=q.reset.call(this),w={};for(var x in v){var y=v[x];w[y]=true;}m.resetComments(w);};t.prototype.getParentCommentID=function(){return this.parentCommentID;};t.prototype.buildCommentPermalink=function(v,w,x){if(!this.basePermalink)return null;var y=this.getParentCommentID().split("_"),z=w;if(y.length===2){z=y[1];}else s.error("Bad reply comment ID: "+this.getParentCommentID());return (new o(this.basePermalink).addQueryData({comment_id:z,reply_comment_id:w,total_comments:this.count}).toString());};j.registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:j.IMMEDIATE}});function u(v){var w=m.getComment(v.commentid),x=w.id,y=w.ftentidentifier,z=w.parentcommentid;if(!z)return;if(w.status!==n.UFIStatus.DELETED&&w.status!==n.UFIStatus.FAILED_ADD)t.getCommentList(y,z).deleteComment(x);}k.subscribe('update-actions',function(v,w){if(w.actions&&w.actions.length)for(var x=0;x<w.actions.length;x++){var y=w.actions[x];switch(y.actiontype){case n.UFIActionType.DELETE_COMMENT:u(y);break;}}});k.subscribe('update-comment-lists',function(v,w){var x=w.commentlists;if(x&&x.replies&&Object.keys(x).length)for(var y in x.replies){var z=x.replies[y],aa=z.ftentidentifier;t.getCommentList(aa,y).addCommentIDs(z.range.offset,z.range.length,z.values).updateCommentCount(z.count);}});k.subscribe('update-comments',function(v,w){if(w.comments&&w.comments.length)w.comments.forEach(function(x){var y=x.entidentifier,z=x.parentcommentid;if(!z)return;t.getCommentList(y,z).addOrUpdateComment(x);});});f.exports=t;},6);
__d('UFIToplevelCommentList',['ActorURI','MercuryServerDispatcher','UFICentralUpdates','UFICommentList','UFICommentOrdering','UFIComments','UFIConfig','UFIConstants','UFIReplyCommentList','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;'use strict';var t={};r=babelHelpers.inherits(u,k);s=r&&r.prototype;u.getCommentList=function(w,x){if(!t[w])t[w]={};if(!t[w][x]){var y=new u(w,x),z=u.getCommentListsForFeedbackTargetID(w);if(z.length)y.updateCommentCount(z[0].getCommentCount());t[w][x]=y;}return t[w][x];};u.getCommentListsForFeedbackTargetID=function(w){var x=[],y=t[w]||{};for(var z in y)x.push(y[z]);return x;};u.getCommentListForFeedbackTargetID_UNSAFE=function(w){var x=u.getCommentListsForFeedbackTargetID(w);return x.length?x[0]:null;};u.resetCommentListsForFeedbackTargetID=function(w){if(!t[w])return;var x={};for(var y in t[w]){var z=t[w][y],aa=z.reset();for(var ba in aa){var ca=aa[ba];x[ca]=true;}}m.resetComments(x);};u.resetCommentListsWithContext=function(w,x){if(!t[w])return;var y={};for(var z in t[w]){var aa=t[w][z];for(var ba in x)if(this.isValidContextPropertyForReset(ba))aa[ba]=x[ba];var ca=aa.reset();for(var da in ca){var ea=ca[da];y[ea]=true;p.resetWithContext(w,ea,x);}}m.resetComments(y);};function u(w,x){s.constructor.call(this,w);this.orderReversed=false;if(l.inverted(x))this.orderReversed=true;this.orderingMode=x;this.forceNotPageable=false;}u.prototype.fetchComments=function(w,x,y){var z={ft_ent_identifier:this.feedbackTargetID,viewas:y&&y.viewAs?y.viewAs+'':null,source:null,offset:w,length:x,orderingmode:this.orderingMode,feed_context:y?y.feedContext:null,numpagerclicks:y?y.numPagerClicks:null};switch(this.orderingMode){case o.UFICommentOrderingMode.RECENT_ACTIVITY:case o.UFICommentOrderingMode.RANKED_THREADED:case o.UFICommentOrderingMode.FILTERED:z.clientcommentcount=this.count;}if(!y||!y.viewAs)z[h.PARAMETER_ACTOR]=this.actorID;i.trySend('/ajax/ufi/comment_fetch.php',z);};u.prototype.deferredCallback=function(w,x,y,z){var aa={},ba=w,ca=w+x-1;for(var da=0;da<x;da++){var ea=this.orderReversed?ca-da:ba+da,fa=m.getComment(z[ea]);if(fa)aa[w+da]=fa;}y(aa);};u.prototype.getOrderingMode=function(){return this.orderingMode;};u.prototype.setForceNotPageable=function(w){this.forceNotPageable=w;return this;};u.prototype.getForceNotPageable=function(){return this.forceNotPageable;};u.prototype.buildCommentPermalink=function(w,x,y){if(!this.basePermalink)return null;var z=Math.floor((this.count-y-1)/n.defaultPageSize)*n.defaultPageSize;return (new q(this.basePermalink).addQueryData({comment_id:x,offset:z,total_comments:this.count}).toString());};i.registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:i.IMMEDIATE}});function v(w){var x=m.getComment(w.commentid),y=x.id,z=x.ftentidentifier,aa=x.parentcommentid;if(aa)return;if(w.islocal||x.status!==o.UFIStatus.DELETED&&x.status!==o.UFIStatus.FAILED_ADD)u.getCommentListsForFeedbackTargetID(z).forEach(function(ba){ba.deleteComment(y);});}j.subscribe('update-actions',function(w,x){if(x.actions&&x.actions.length)for(var y=0;y<x.actions.length;y++){var z=x.actions[y];switch(z.actiontype){case o.UFIActionType.DELETE_COMMENT:v(z);break;}}});j.subscribe('update-comment-lists',function(w,x){var y=x.commentlists;if(y&&y.comments&&Object.keys(y).length)for(var z in y.comments)for(var aa in y.comments[z]){var ba=y.comments[z][aa];u.getCommentList(z,aa).addCommentIDs(ba.range.offset,ba.range.length,ba.values).setForceNotPageable(ba.forcenotpageable===true);}});j.subscribe('update-comments',function(w,x){if(x.comments&&x.comments.length)x.comments.forEach(function(y){if(y.parentcommentid)return;var z=y.ftentidentifier;u.getCommentListsForFeedbackTargetID(z).forEach(function(aa){aa.addOrUpdateComment(y);});});});j.subscribe('update-feedback',function(w,x){if(x.feedbacktargets&&x.feedbacktargets.length)x.feedbacktargets.forEach(function(y){var z=y.entidentifier,aa=y.defaultcommentorderingmode,ba={};if(aa)ba[aa]=true;if(y.orderingmodes)y.orderingmodes.forEach(function(da){ba[da.value]=true;});for(var ca in ba)u.getCommentList(z,ca).updateCommentCount(y.commentcount);});});f.exports=u;},6);
__d("XUFITypingIndicatorController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/typing\/{feedback_id}\/{update}\/",{feedback_id:{type:"String",required:true},parent_comment_id:{type:"String"},update:{type:"Enum",required:true,enumType:1}});},null,{});
__d("XUFIAddCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/add\/comment\/",{});},null,{});
__d("XUFIDeleteCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/delete\/comment\/",{});},null,{});
__d("XUFICommentLikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/like\/",{});},null,{});
__d("XUFIHideCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/hide\/comment\/",{});},null,{});
__d("XUFILikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/like\/",{});},null,{});
__d("XUFIEditCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/edit\/comment\/",{});},null,{});
__d("XUFITranslateCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/translate\/comment\/",{});},null,{});
__d("XUFIActorChangeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/actor\/change\/",{});},null,{});
__d("XUFIReactionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"}});},null,{});
__d('UFIUserActions',['ActorURI','AsyncRequest','AsyncResponse','requireWeak','ClientIDs','ImmutableObject','Nectar','UFICentralUpdates','UFIToplevelCommentList','UFIComments','UFIConstants','UFIFeedbackTargets','MercuryServerDispatcher','XUFITypingIndicatorController','XUFIAddCommentController','XUFIDeleteCommentController','XUFICommentLikeController','XUFIHideCommentController','XUFILikeController','XUFIEditCommentController','XUFITranslateCommentController','XUFIActorChangeController','XUFIReactionController','collectDataAttributes','errorCode','fbt','UnicodeBidi'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){if(c.__markCompiled)c.__markCompiled();var ia;k('CLoggerX',function(ib){ia=ib;});var ja={BAN:'ban',UNDO_BAN:'undo_ban'},ka={changeActor:function(ib,jb){s.getFeedbackTarget(ib,function(kb){p.resetCommentListsWithContext(ib,{actorID:jb});o.inform('actor-changed',null);var lb={from_actor_id:kb.actorforpost,ft_ent_identifier:ib};lb[h.PARAMETER_ACTOR]=jb;var mb=ca.getURIBuilder().getURI();t.trySend(mb,lb);});},changeCommentLike:function(ib,jb,kb){var lb=q.getComment(ib);if(lb.hasviewerliked!=jb){var mb=la(kb.target),nb=jb?1:-1,ob={commentid:ib,actiontype:r.UFIActionType.COMMENT_LIKE,viewerliked:jb,likecount:(lb.likecount||0)+nb};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[ob]});s.getFeedbackTarget(lb.ftentidentifier,function(pb){var qb={};qb[h.PARAMETER_ACTOR]=pb.actorforpost;var rb=x.getURIBuilder().getURI();t.trySend(rb,babelHelpers._extends({comment_id:ib,legacy_id:lb.legacyid,like_action:jb,ft_ent_identifier:lb.ftentidentifier,source:kb.source,client_id:l.getNewClientID()},mb,qb));});}},addComment:function(ib,jb,kb,lb){s.getFeedbackTarget(ib,function(mb){var nb=la(lb.target),ob=l.getNewClientID();if(!mb.actorforpost)return;var pb=ha.isDirectionLTR(jb)?'ltr':'rtl',qb={ftentidentifier:ib,body:{text:jb,dir:pb},author:mb.actorforpost,id:ob,islocal:true,ufiinstanceid:lb.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:lb.replyid,replycommentparentid:lb.replycommentparentid,attachment:lb.attachedsticker,photo_comment:lb.attachedphoto,timestamp:{time:Math.floor(Date.now()/1000),text:ga._("a few seconds ago")}},rb={actiontype:r.UFIActionType.SUBSCRIBE_ACTION,actorid:mb.actorforpost,hasviewersubscribed:true,entidentifier:ib},sb={actiontype:r.UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:mb.targetfbid};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{comments:[qb],actions:[rb,sb]});var tb=null;if(lb.replyid)tb=q.getComment(lb.replyid).fbid;var ub;if(ia)ub=ia.getCLParamsForTarget(lb.target,tb);var vb={};vb[h.PARAMETER_ACTOR]=mb.actorforpost;var wb=v.getURIBuilder().getURI();t.trySend(wb,babelHelpers._extends({ft_ent_identifier:mb.entidentifier,comment_text:kb,source:lb.source,client_id:ob,reply_fbid:tb,parent_comment_id:lb.replyid,reply_comment_parent_id:lb.replycommentparentid,rootid:lb.rootid,clp:ub,attached_sticker_fbid:lb.attachedsticker?lb.attachedsticker.fbid:0,attached_photo_fbid:lb.attachedphoto?lb.attachedphoto.fbid:0,feed_context:lb.feedcontext},nb,vb));});},_hasCommentTextChanged:function(ib,jb){return ib.body&&ib.body.text!=jb;},_hasCommentPhotoChanged:function(ib,jb){return (ib||jb)&&!(ib&&jb)||ib&&jb&&ib.fbid!=jb.fbid;},_hasCommentStickerChanged:function(ib,jb){return (ib||jb)&&!(ib&&jb)||ib&&ib.type=="sticker"&&jb&&ib.fbid!=jb.fbid;},editComment:function(ib,jb,kb,lb){var mb=la(lb.target),nb=q.getComment(ib),ob=this._hasCommentTextChanged(nb,jb)||this._hasCommentPhotoChanged(nb.photo_comment,lb.attachedPhoto)||this._hasCommentStickerChanged(nb.attachment,lb.attachedSticker);nb=m.set(nb,{status:r.UFIStatus.PENDING_EDIT,body:{text:jb},editnux:null,attachment:lb.attachedSticker,photo_comment:lb.attachedPhoto});if(ob)nb=m.set(nb,{originalTimestamp:nb.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:ga._("a few seconds ago")}});o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{comments:[nb]});s.getFeedbackTarget(nb.ftentidentifier,function(pb){var qb={};qb[h.PARAMETER_ACTOR]=pb.actorforpost;var rb=aa.getURIBuilder().getURI();t.trySend(rb,babelHelpers._extends({ft_ent_identifier:nb.ftentidentifier,comment_text:kb,source:lb.source,comment_id:nb.id,parent_comment_id:nb.parentcommentid,attached_sticker_fbid:lb.attachedSticker?lb.attachedSticker.fbid:0,attached_photo_fbid:lb.attachedPhoto?lb.attachedPhoto.fbid:0},mb,qb));});},translateComment:function(ib,jb){var kb=ba.getURIBuilder().getURI();t.trySend(kb,{ft_ent_identifier:ib.ftentidentifier,comment_ids:[ib.id],source:jb.source});},setHideAsSpam:function(ib,jb,kb){var lb=la(kb.target),mb=q.getComment(ib),nb={commentid:ib,actiontype:r.UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:jb};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[nb]});s.getFeedbackTarget(mb.ftentidentifier,function(ob){var pb={};pb[h.PARAMETER_ACTOR]=ob.actorforpost;var qb=y.getURIBuilder().getURI();t.trySend(qb,babelHelpers._extends({comment_id:ib,spam_action:jb,ft_ent_identifier:mb.ftentidentifier,source:kb.source},lb,pb));});},removeComment:function(ib,jb){var kb=la(jb.target),lb=q.getComment(ib),mb={actiontype:r.UFIActionType.DELETE_COMMENT,commentid:ib,islocal:true,oneclick:jb.oneclick};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[mb]});s.getFeedbackTarget(lb.ftentidentifier,function(nb){var ob={};ob[h.PARAMETER_ACTOR]=nb.actorforpost;var pb=w.getURIBuilder().getURI();t.trySend(pb,babelHelpers._extends({comment_id:lb.id,comment_legacyid:lb.legacyid,ft_ent_identifier:lb.ftentidentifier,one_click:jb.oneclick,source:jb.source,client_id:l.getNewClientID()},kb,ob));});},banUser:function(ib,jb,kb,lb){var mb=kb?ja.BAN:ja.UNDO_BAN;t.trySend('/ajax/ufi/ban_user.php',{page_id:jb,commenter_id:ib.author,action:mb,comment_id:ib.id,client_side:true});},changeReaction:function(ib,jb,kb){s.getFeedbackTarget(ib,function(lb){var mb=[hb(lb,jb)],nb=parseInt(jb,10)!==0;if(lb.hasviewerliked!==nb){var ob=nb?1:-1;mb.push({actiontype:r.UFIActionType.LIKE_ACTION,actorid:lb.actorforpost,hasviewerliked:nb,likecount:(lb.likecount||0)+ob,entidentifier:ib,likesentences:{current:lb.likesentences.alternate,alternate:lb.likesentences.current}});}o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:mb});var pb=la(kb.target),qb={};qb[h.PARAMETER_ACTOR]=lb.actorforpost;t.trySend(da.getURIBuilder().getURI(),babelHelpers._extends({client_id:l.getNewClientID(),ft_ent_identifier:ib,reaction_type:jb,root_id:kb.rootid,source:kb.source},qb,pb));});},changeSubscribe:function(ib,jb,kb){s.getFeedbackTarget(ib,function(lb){var mb=la(kb.target);if(lb.hasviewersubscribed!==jb){var nb={actiontype:r.UFIActionType.SUBSCRIBE_ACTION,actorid:lb.actorforpost,hasviewersubscribed:jb,entidentifier:ib};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[nb]});var ob={};ob[h.PARAMETER_ACTOR]=lb.actorforpost;t.trySend('/ajax/ufi/subscribe.php',babelHelpers._extends({subscribe_action:jb,ft_ent_identifier:ib,source:kb.source,client_id:l.getNewClientID(),rootid:kb.rootid,comment_expand_mode:kb.commentexpandmode},mb,ob));}});},fetchSpamComments:function(ib,jb,kb,lb){t.trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ib,viewas:lb,comment_ids:jb,parent_comment_id:kb,source:null});},removePreview:function(ib,jb){var kb=la(jb.target),lb={commentid:ib.id,actiontype:r.UFIActionType.REMOVE_PREVIEW};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[lb]});t.trySend('/ajax/ufi/remove_preview.php',babelHelpers._extends({comment_id:ib.id,ft_ent_identifier:ib.ftentidentifier,source:jb.source},kb));},typingChange:function(ib,jb){new i(u.getURIBuilder().setString('feedback_id',ib).setEnum('update',jb?'start':'stop').getURI()).send();}};function la(ib){if(!ib)return {ft:{}};var jb={ft:ea(ib,['ft']).ft};n.addModuleData(jb,ib);return jb;}function ma(ib){j.defaultErrorHandler(ib);}function na(ib){var jb=ib.request.data;j.defaultErrorHandler(ib);var kb=jb.client_id||jb.comment_id,lb=q.getComment(kb),mb=lb.status===r.UFIStatus.PENDING_EDIT?r.UFIStatus.FAILED_EDIT:r.UFIStatus.FAILED_ADD;lb=m.setDeep(lb,{status:mb,allowRetry:oa(ib),body:{mentionstext:jb.comment_text,mentionsphoto:lb.photo_comment}});o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{comments:[lb]});}function oa(ib){var jb=ib.getError();if(ib.isBlockedAction())return false;if(ib.silentError)return true;if(jb===1357012||jb===1357006)return false;return true;}function pa(ib){var jb=ib.request.data,kb=jb.comment_id,lb=q.getComment(kb);lb=m.set(lb,{status:lb.priorstatus||null,priorstatus:undefined});o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{comments:[lb]});}function qa(ib){var jb=ib.request.data,kb=jb.comment_id,lb=q.getComment(kb);if(jb.like_action===lb.hasviewerliked){var mb=lb.hasviewerliked?-1:1,nb={commentid:kb,actiontype:r.UFIActionType.COMMENT_LIKE,viewerliked:!lb.hasviewerliked,likecount:(lb.likecount||0)+mb};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[nb]});}j.defaultErrorHandler(ib);}function ra(ib){var jb=ib.request.data,kb=jb.ft_ent_identifier;s.getFeedbackTarget(kb,function(lb){if(lb.hasviewerliked===jb.like_action){var mb=lb.hasviewerliked?-1:1,nb={actiontype:r.UFIActionType.LIKE_ACTION,actorid:lb.actorforpost,hasviewerliked:!lb.hasviewerliked,likecount:(lb.likecount||0)+mb,entidentifier:kb,likesentences:{current:lb.likesentences.alternate,alternate:lb.likesentences.current}};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[nb]});}});j.defaultErrorHandler(ib);}function sa(ib){var jb=ib.request.data,kb=jb.ft_ent_identifier;s.getFeedbackTarget(kb,function(lb){if(lb.hasviewersubscribed===jb.subscribe_action){var mb={actiontype:r.UFIActionType.SUBSCRIBE_ACTION,actorid:lb.actorforpost,hasviewersubscribed:!lb.hasviewersubscribed,entidentifier:kb};o.handleUpdate(r.UFIPayloadSourceType.USER_ACTION,{actions:[mb]});}});j.defaultErrorHandler(ib);}var ta={'/ajax/ufi/ban_user.php':{mode:t.IMMEDIATE,error_handler:ma},'/ajax/ufi/subscribe.php':{mode:t.BATCH_CONDITIONAL,error_handler:sa,batch_if:fb,batch_function:gb},'/ajax/ufi/id_comment_fetch.php':{mode:t.IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:t.IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:t.IMMEDIATE}},ua=v.getURIBuilder().getURI();ta[ua]={mode:t.IMMEDIATE,error_handler:na};var va=w.getURIBuilder().getURI();ta[va]={mode:t.IMMEDIATE,error_handler:pa};var wa=x.getURIBuilder().getURI();ta[wa]={mode:t.BATCH_CONDITIONAL,error_handler:qa,batch_if:db,batch_function:gb};var xa=y.getURIBuilder().getURI();ta[xa]={mode:t.IMMEDIATE,error_handler:pa};var ya=z.getURIBuilder().getURI();ta[ya]={mode:t.BATCH_CONDITIONAL,error_handler:ra,batch_if:eb,batch_function:gb};var za=aa.getURIBuilder().getURI();ta[za]={mode:t.IMMEDIATE,error_handler:na};var ab=ba.getURIBuilder().getURI();ta[ab]={mode:t.IMMEDIATE};var bb=ca.getURIBuilder().getURI();ta[bb]={mode:t.IMMEDIATE};var cb=da.getURIBuilder().getURI();ta[cb]={mode:t.IMMEDIATE};t.registerEndpoints(ta);function db(ib,jb){return ib&&ib.ft_ent_identifier==jb.ft_ent_identifier&&ib.comment_id==jb.comment_id;}function eb(ib,jb){return ib&&ib.ft_ent_identifier==jb.ft_ent_identifier;}function fb(ib,jb){return ib&&ib.ft_ent_identifier==jb.ft_ent_identifier;}function gb(ib,jb){return jb;}function hb(ib,jb){jb=parseInt(jb,10);var kb=!!jb,lb=ib.actorforpost,mb=ib.reactorids?ib.reactorids.slice(0):[],nb=mb.indexOf(lb),ob=0;if(kb){if(nb<0){mb.unshift(lb);ob=1;}}else if(nb>-1){mb.splice(nb,1);ob=-1;}var pb=Math.max(ib.reactioncount+ob,0),qb=ib.reactioncountreduced;if(qb&&!isNaN(qb))qb=pb.toString();var rb=ib.reactioncountmap||{},sb,tb=ib.viewerreaction;if(tb&&rb[tb]){rb[tb]['default']=Math.max((rb[tb]['default']||0)-1,0);sb=rb[tb].reduced;if(sb&&!isNaN(sb))rb[tb].reduced=rb[tb]['default'].toString();}if(kb&&rb[jb]){rb[jb]['default']=(rb[jb]['default']||0)+1;sb=rb[jb].reduced;if(sb&&!isNaN(sb))rb[jb].reduced=rb[jb]['default'].toString();}var ub=ib.userreactions||{};if(kb){ub[lb]=jb;}else delete ub[lb];var vb=ib.importantreactorids||[],wb=vb.indexOf(lb);if(kb&&wb===-1){vb.unshift(lb);}else if(!kb&&wb!==-1)vb.splice(wb,1);return {actiontype:r.UFIActionType.REACTION,actorid:lb,entidentifier:ib.entidentifier,importantreactorids:vb,reactioncount:pb,reactioncountmap:rb,reactioncountreduced:qb,reactorids:mb,userreactions:ub,viewerreaction:jb};}f.exports=ka;},null);
__d('UFINewCommentNotifier',['Arbiter','UFIFeedbackTargets','UFIUserActions','UFIUIEvents'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l={onNewComment:function(m,n,o,p,q,r,s,t){j.addComment(m,q.visibleValue,q.encodedValue,{source:p.source,ufiinstanceid:n,target:r,replyid:s,replycommentparentid:t,rootid:p.rootid,attachedphoto:q.attachedPhoto,attachedsticker:q.attachedSticker,feedcontext:p.feedcontext});i.getFeedbackTarget(m,function(u){if(o)h.inform(k.Comment,{form:o,isinverted:u.isranked||p.isstreaming});if(u.showtopicconversationcreationpivot)h.inform(k.ActionAddComment,{feedback:u,target:r});});}};f.exports=l;},null);
__d('UFIStoryAction',['UFIActionTypes'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={changeOrderingMode:function(j){return {type:h.STORY.CHANGE_ORDER_MODE,mode:j};},commentsArrived:function(j,k,l){return {type:h.STORY.COMMENTS_ARRIVED,newOffset:j,newLength:k,source:l};},pageInComments:function(j,k,l){return {type:h.STORY.PAGE_IN_COMMENTS,commentID:j,direction:k,nextRange:l};},showReplies:function(j,k){return {type:h.STORY.SHOW_REPLIES,commentID:j,replyEntry:k};},spamFetched:function(j,k){return {type:h.STORY.SPAM_FETCHED,commentIDs:j,parentCommentID:k};},toggleLike:function(j){return {type:h.STORY.TOGGLE_LIKE,target:j};},toggleReplies:function(j){return {type:h.STORY.TOGGLE_REPLIES,commentID:j};}};f.exports=i;},null);
__d('ClickPointIdentifiersDEPRECATED',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={types:{TIMELINE_SEE_LIKERS:'timeline:seelikes'},getUserActionID:function(i){return '{"ua_id":"'+i+'"}';}};f.exports=h;},null);
__d('NumberFormat',['NumberFormatConfig'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=/(\d{3})(?=\d)/g;function j(m){return (''+m).split('').reverse().join('');}function k(m,n){if(Math.abs(m).toString().length<h.minDigitsForThousandsSeparator)return m.toString();var o=j(m);return j(o.replace(i,'$1'+n));}var l={formatIntegerWithDelimiter:k,formatInteger:function(m){return k(m,h.numberDelimiter);}};f.exports=l;},null);
__d('UFIBlingItem.react',['React','NumberFormat','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=h.createClass({displayName:'UFIBlingItem',propTypes:{contextArgs:m.object.isRequired,count:m.number.isRequired,countreduced:m.string,allowText:m.bool,className:m.string,iconClassName:m.string,itemKey:m.string},render:function(){var o=l(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),p=i.formatIntegerWithDelimiter(this.props.count,this.props.contextArgs.numberdelimiter||','),q=p,r=this.props.contextArgs.ufiexperiments||{};if(this.props.allowText||r.showSlimUFI)switch(this.props.itemKey){case 'like':if(r.showSlimUFI)q=k._({"Like":"{count} Like","Likes":"{count} Likes"},[k.param('count',r.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:q),k['enum'](this.props.count===1?'Like':'Likes',{Like:'Like',Likes:'Likes'})]);break;case 'comment':if(r.showSlimUFI)q=k._({"Comment":"{count} Comment","Comments":"{count} Comments"},[k.param('count',r.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:q),k['enum'](this.props.count===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);break;case 'reshare':if(this.props.contextArgs.reshareedu||r.showSlimUFI)q=k._({"Share":"{count} Share","Shares":"{count} Shares"},[k.param('count',r.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:q),k['enum'](this.props.count===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})]);break;}var s=h.createElement('span',{className:"UFIBlingBoxText"+(r.showSlimUFI?' '+"UFIBlingBoxTextRevised":'')},q);if(!r.showSlimUFI){return (h.createElement('span',null,h.createElement('i',{className:o}),s));}else return s;}});f.exports=n;},null);
__d('UFIBlingBox.react',['React','UFIBlingItem.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'UFIBlingBox',propTypes:{contextArgs:l.object.isRequired,'data-ft':l.string,'data-comment-prelude-ref':l.string,comments:l.number,commentsreduced:l.string,likes:l.number,likesreduced:l.string,nfb:l.number,onClick:l.func,permalink:l.string,reshares:l.number,resharesreduced:l.string,readOnly:l.bool},render:function(){var n=[],o='',p=this.props.contextArgs.ufiexperiments||{};if(this.props.likes){n.push(h.createElement(i,{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:'UFIBlingBoxLikeIcon',itemKey:'like',key:'like'}));o+=this.props.likes==1?k._("1 like"):k._({"*":"{count} likes"},[k.param('count',this.props.likes,[0])]);o+=' ';}if(this.props.comments){n.push(h.createElement(i,{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:'UFIBlingBoxCommentIcon',itemKey:'comment',key:'comment'}));o+=this.props.comments==1?k._("1 comment"):k._({"*":"{count} comments"},[k.param('count',this.props.comments,[0])]);o+=' ';}if(this.props.reshares){n.push(h.createElement(i,{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxReshareIcon',itemKey:'reshare',key:'reshare'}));o+=this.props.reshares==1?k._("1 share"):k._({"*":"{count} shares"},[k.param('count',this.props.reshares,[0])]);}var q="UFIBlingBox"+(this.props.readOnly?' '+"UFIBlingBoxReadOnly":'')+(' '+"uiBlingBox")+(' '+"feedbackBling")+(p.showSlimUFI?' '+"UFIBlingBoxRevised":''),r;if(this.props.readOnly){r=h.createElement('span',{className:q,'aria-label':o},n);}else r=h.createElement('a',{className:q,href:this.props.permalink,'data-ft':this.props['data-ft'],'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'aria-label':o,onClick:this.props.onClick,rel:'ignore'},n);return r;}});f.exports=m;},null);
__d('UFICommentLink.react',['Image.react','React','TrackingNodes','emptyFunction','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'UFICommentLink',propTypes:{ufiExperiments:n.object,onClick:n.func,ajaxify:n.string,rel:n.string},getDefaultProps:function(){return {ufiExperiments:{},onClick:k};},render:function(){var p=this.props.ufiExperiments,q=l._("Comment"),r=l._("Leave a comment"),s='{ "tn": "'+j.encodeTN(j.types.COMMENT_LINK)+'", "type": 24 }',t=null;if(p.showSlimUFI)t=i.createElement(h,{className:'UFICommentLinkIcon',src:m('/images/ufi/fbfeed/comment_gray.png')});return (i.createElement('a',{className:'comment_link',role:'button',href:'#',title:r,ajaxify:this.props.ajaxify,rel:this.props.rel,onClick:this.props.onClick,'data-ft':s},t,q));}});f.exports=o;},null);
__d('UFILikeLink.react',['React','Image.react','TrackingNodes','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=h.PropTypes,o=h.createClass({displayName:'UFILikeLink',propTypes:{likeAction:n.bool,ufiExperiments:n.object,onClick:n.func},getDefaultProps:function(){return {ufiExperiments:{}};},onClick:function(p,q){p.preventDefault();this.props.onClick(p,q);},render:function(){var p=this.props.ufiExperiments,q=this.props.likeAction||p.showSlimUFI?l._("Like"):l._("Unlike"),r=j.getTrackingInfo(this.props.likeAction?j.types.LIKE_LINK:j.types.UNLIKE_LINK),s=this.props.likeAction?l._("Like this"):l._("Unlike this"),t=null;if(p.showSlimUFI)t=h.createElement(i,{className:'UFILikeLinkIcon',src:this.props.likeAction?m('/images/ufi/fbfeed/like_gray.png'):m('/images/ufi/fbfeed/liked.png')});return (h.createElement('a',{className:"UFILikeLink"+(p.showSlimUFI&&!this.props.likeAction?' '+"UFILinkBright":''),href:'#',role:'button','aria-label':s,'aria-live':'polite',onBlur:this.props.onBlur,onClick:this.onClick,onClickCapture:this.props.onClickCapture,onDragStart:this.props.onDragStart,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,onKeyDown:(function(u,v){this.props.onKeyDown&&this.props.onKeyDown(u,v);}).bind(this),'data-ft':r},t,q));}});f.exports=o;},null);
__d('UFIShareLink.react',['Event','React','ReactDOM','Image.react','TrackingNodes','XUISpinner.react','cx','fbt','ix','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=i.PropTypes,s=i.createClass({displayName:'UFIShareLink',propTypes:{ufiExperiments:r.object},componentDidMount:function(){if(!this.props.onShareClick)return;this._clickEvent=h.listen(j.findDOMNode(this),'click',this.props.onShareClick);},componentWillUnmount:function(){if(!this.props.onShareClick)return;this._clickEvent.remove();},_onClick:function(event){event.preventDefault();this.props.onClick&&this.props.onClick(event);},render:function(){var t=o._("Send this to friends or post it on your timeline."),u='{ "tn": "'+l.encodeTN(l.types.SHARE_LINK)+'", "type": 25 }',v=this.props.ufiExperiments,w=null;if(v.showSlimUFI)w=i.createElement(k,{className:'UFIShareLinkIcon',src:p('/images/ufi/fbfeed/share_gray.png')});var x=null;if(this.props.rel!=='dialog')x=i.createElement(m,{className:"UFIShareLinkSpinner",showOnAsync:true});return (i.createElement('a',babelHelpers._extends({},this.props,{className:q(this.props.className,"share_action_link"),onClick:this._onClick,'data-ft':u,title:t}),w,o._("Share"),x));}});f.exports=s;},null);
__d('UFISubscribeLink.react',['React','fbt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createClass({displayName:'UFISubscribeLink',propTypes:{subscribeAction:j.bool,onClick:j.func},render:function(){var l=this.props.subscribeAction?i._("Turn On Notifications"):i._("Turn Off Notifications"),m=this.props.subscribeAction?i._("Get a notification whenever someone comments."):i._("Stop getting notifications when someone comments.");return (h.createElement('a',{className:'UFISubscribeLink',href:'#',role:'button','aria-live':'polite',title:m,onClick:this.props.onClick},l));}});f.exports=k;},null);
__d('ProfileBrowserTypes',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={FRIEND_CHECKINS:'friendcheckins',LIKES:'likes',GROUP_MEMBERS:'group_members',GROUP_MESSAGE_VIEWERS:'group_message_viewers',MUTUAL_FRIENDS:'mutual_friends',TODO_LIST_ASSIGNEES:'todo_list_assignees',TOPIC_CONVERSATION_PARTICIPANTS:'topic_conversation_participants'};f.exports=h;},null);
__d('UFITimelineBlingBox.react',['ProfileBrowserLink','ProfileBrowserTypes','React','UFIBlingItem.react','URI','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=j.PropTypes,p=j.createClass({displayName:'UFITimelineBlingBox',propTypes:{contextArgs:o.object.isRequired,'data-ft':o.string,'data-gt':o.string,actorid:o.any,commentOnClick:o.func,comments:o.number,commentsreduced:o.string,enableShowComments:o.bool,enableShowLikes:o.bool,feedbackFBID:o.any,likes:o.number,likesreduced:o.string,reshares:o.number,resharesreduced:o.string},render:function(){var q=[];if(this.props.likes&&this.props.enableShowLikes){var r=this._getProfileBrowserURI(),s=n._("See who likes this"),t=j.createElement('a',{ajaxify:r.dialog,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-gt':this.props['data-gt'],'data-hover':'tooltip','data-tooltip-alignh':'right','data-tooltip-uri':this._getLikeToolTipURI(),href:r.page,key:'like',rel:'dialog',role:'button',title:s},j.createElement(k,{contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:'UFIBlingBoxTimelineLikeIcon',itemKey:'like'}));q.push(t);}if(this.props.comments&&this.props.enableShowComments){var u=n._("Show comments"),v=j.createElement('a',{'aria-label':u,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right',href:'#',key:'comment',onClick:this.props.commentOnClick},j.createElement(k,{contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:'UFIBlingBoxTimelineCommentIcon',itemKey:'comment'}));q.push(v);}if(this.props.reshares){var w=n._("Show shares"),x=this._getShareViewURI(),y=j.createElement('a',{ajaxify:x.dialog,'aria-label':w,className:this._getItemClassName(q),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right',href:x.page,key:'reshare',rel:'async'},j.createElement(k,{allowText:true,contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxTimelineReshareIcon',itemKey:'reshare'}));q.push(y);}return (j.createElement('span',null,q));},_getItemClassName:function(q){return (q.length>0?"mls":'')+(' '+"UFIBlingBoxTimelineItem");},_getLikeToolTipURI:function(){if(this.props.feedbackFBID){var q=new l('/ajax/like/tooltip.php').setQueryData({comment_fbid:this.props.feedbackFBID});return q.toString();}else return null;},_getProfileBrowserURI:function(){if(this.props.feedbackFBID){var q=i.LIKES,r={id:this.props.feedbackFBID,actorid:this.props.actorid},s=h.constructDialogURI(q,r),t=h.constructPageURI(q,r),u={dialog:s.toString(),page:t.toString()};return u;}},_getShareViewURI:function(){if(this.props.feedbackFBID){var q=new l('/ajax/shares/view').setQueryData({target_fbid:this.props.feedbackFBID}),r=new l('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedbackFBID}),s={dialog:q.toString(),page:r.toString()};return s;}}});f.exports=p;},null);
__d("XPagesMessagingPrivateReplyDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/private_reply\/dialog\/",{activity_id:{type:"String",required:true}});},null,{});
__d('UFIPrivateReplyLink.react',['ActorURI','Link.react','PagesPrivateReplyConstants','React','XUIGrayText.react','XPagesMessagingPrivateReplyDialogController','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=j.Status,p=j.Type,q=k.PropTypes,r=k.createClass({displayName:'UFIPrivateReplyLink',propTypes:{actorID:q.string.isRequired,activityID:q.string.isRequired,context:q.shape({activityType:q.string.isRequired,status:q.string.isRequired,hasReplyPermission:q.bool.isRequired,pageID:q.string.isRequired,permalink:q.string}).isRequired},render:function(){var s=this.props.context;if(s.hasReplyPermission&&this.props.actorID===s.pageID){if(s.status===o.REPLYABLE){return this._renderMessageLink();}else if(s.status===o.ALREADY_REPLIED)return this._renderSeeReplyLink();return this._renderTooltip();}if(s.status===o.ALREADY_REPLIED)return this._renderIndicator();return null;},_renderMessageLink:function(){var s=h.create(m.getURIBuilder().setString('activity_id',this.props.activityID).getURI(),this.props.context.pageID);return (k.createElement(i,{href:s,rel:'dialog'},this._getLabel()));},_renderTooltip:function(){var s;switch(this.props.context.status){case o.EXPIRED:s=n._({"comments":"You can't send a message response to comments that are older than 6 months.","reviews":"You can't send a message response to reviews that are older than 6 months.","posts":"You can't send a message response to posts that are older than 6 months."},[n['enum'](this._getActivityTypeLabel(),{comments:'comments',reviews:'reviews',posts:'posts'})]);break;case o.NOT_USER_CREATED:s=n._("Pages can't send private messages to other Pages.");break;}return (k.createElement('span',null,k.createElement(l,{shade:'light','aria-label':s,'data-hover':s?'tooltip':null},this._getLabel())));},_renderSeeReplyLink:function(){return (k.createElement(i,{href:this.props.context.permalink||'#'},n._("See Response")));},_renderIndicator:function(){return (k.createElement('span',null,k.createElement(l,{shade:'light'},n._("Page responded privately"))));},_getLabel:function(){return n._("Message");},_getActivityTypeLabel:function(){switch(this.props.context.activityType){case p.COMMENT_PAGE_POST:case p.COMMENT_WALL_POST:case p.COMMENT_REVIEW:return 'comments';case p.REVIEW:return 'reviews';default:return 'posts';}}});f.exports=r;},null);
__d('UFIActionLinkController',['Arbiter','BootloadedComponent.react','Bootloader','ClickPointIdentifiersDEPRECATED','CommentPrelude','CSS','DataStore','DOM','DOMQuery','JSResource','Parent','React','ReactDOM','TrackingNodes','UFIBlingBox.react','UFICentralUpdates','UFICommentLink.react','UFIConstants','UFIFeedbackTargets','UFIInstanceState','UFILikeLink.react','UFIShareLink.react','UFISubscribeLink.react','UFITimelineBlingBox.react','UFIToplevelCommentList','UFIUserActions','UFIPrivateReplyLink.react','UFIUIEvents','URI','cx','invariant','UFIReactionsLink','UFIReactionsTokens'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la){if(c.__markCompiled)c.__markCompiled();var ma=c('UFIReactionsLink').module,na=c('UFIReactionsTokens').module,oa;function pa(ra,sa,ta){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var ua=p.scry(ra,sa)[0];if(ua){if(m.hasClass(ua,'prevent_react_replace'))return;var va=document.createElement('span');ua.parentNode.replaceChild(va,ua);va.appendChild(ua);if(typeof ta==="function")ta(va);}else var wa=h.subscribe('PhotoSnowlift.DATA_CHANGE',function(){h.unsubscribe(wa);pa(ra,sa,ta);},h.SUBSCRIBE_NEW);}var qa=function(ra,sa,ta,ua,va){this._id=sa.ftentidentifier;this._ftFBID=ta.targetfbid;this._source=sa.source;this._contextArgs=sa;this._ufiRoot=ra;this._ufiInstanceID=ua;!(typeof va==='function')?la(0):undefined;this._visibilityToggler=va;this._isOnTimeline=this._isRenderingOnTimeline();if(this._isOnTimeline){this._attemptInitializeTimelineBling();}else this._attemptInitializeBling();if(ta.viewercanlike||ta.hasviewerliked)this._attemptInitializeLike();if(ta.cancomment)this._attemptInitializeComment();if(ta.viewercansubscribetopost)this._attemptInitializeSubscribe();this._attemptInitializeShare();this._attemptInitializeMessageReply();w.subscribe('feedback-updated',(function(wa,xa){var ya=xa.updates;if(this._id in ya)this.render();}).bind(this));w.subscribe('feedback-id-changed',(function(wa,xa){var ya=xa.updates;if(this._id in ya)this._id=ya[this._id];}).bind(this));w.subscribe('instance-updated',(function(wa,xa){var ya=xa.updates[this._ufiInstanceID];if(ya&&ya.inlineShare)this.render();}).bind(this));};Object.assign(qa.prototype,{_attemptInitializeBling:function(){pa(this._ufiRoot,'^form .uiBlingBox',(function(ra){this._blingRoot=ra;if(this._dataReady)this._renderBling();}).bind(this));},_attemptInitializeTimelineBling:function(){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var ra=p.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline')[0];if(ra){var sa=p.scry(ra,'.fbTimelineFeedbackLikes')[0];this._enableShowLikes=sa?true:false;var ta=p.scry(ra,'.fbTimelineFeedbackComments')[0];this._enableShowComments=ta?true:false;}this._blingTimelineRoot=ra;if(this._dataReady)this._renderTimelineBling();},_attemptInitializeLike:function(){pa(this._ufiRoot,'^form .like_link',(function(ra){this._likeRoot=ra;if(this._dataReady)this._renderLike();}).bind(this));},_attemptInitializeComment:function(){pa(this._ufiRoot,'^form .comment_link',(function(ra){this._commentRoot=ra;if(this._dataReady)this._renderComment();}).bind(this));},_attemptInitializeSubscribe:function(){pa(this._ufiRoot,'^form .unsub_link',(function(ra){this._subscribeRoot=ra;if(this._dataReady)this._renderSubscribe();}).bind(this));},_attemptInitializeMessageReply:function(){pa(this._ufiRoot,'^form .message_reply_action_link',(function(ra){this._messageReplyRoot=ra;if(this._messageReplyRoot.previousSibling&&this._messageReplyRoot.previousSibling.nodeType===3){this._messageReplySeparator=this._messageReplyRoot.previousSibling;this._messageReplySeparatorData=this._messageReplySeparator.data;}if(this._dataReady)this._renderMessageReply();}).bind(this));},_attemptInitializeShare:function(){pa(this._ufiRoot,'^form .share_action_link',(function(ra){this._shareRoot=ra;m.addClass(this._shareRoot,"share_root");var sa=p.scry(this._shareRoot,'.share_action_link')[0];if(sa){this._shareURI=sa.getAttribute('href');this._shareRel=sa.getAttribute('rel');this._shareNowMenuURI=n.get(sa,'share-now-menu-uri');}if(this._dataReady)this._renderShare();}).bind(this));},render:function(){this._dataReady=true;if(this._isOnTimeline){this._renderTimelineBling();}else this._renderBling();this._renderLike();this._renderComment();this._renderSubscribe();this._renderShare();this._renderMessageReply();},_renderBling:function(){if(this._blingRoot)z.getFeedbackTarget(this._id,(function(ra){var sa,ta=u.getTrackingInfo(u.types.BLINGBOX),ua=new ja(ra.permalink).addQueryData({comment_tracking:ta}).toString(),va=fa.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount();if(this._contextArgs.hasReactions&&ra.displayreactions){var wa=(function(event){event.preventDefault();if(this._contextArgs.feedbackMode==='expanded'){this._setInlineShareActive(false);}else{l.onBlingboxClick(event.currentTarget);this._visibilityToggler();}}).bind(this);sa=s.createElement(na,{commentCount:va,contextArgs:this._contextArgs,'data-comment-prelude-ref':'action_link_bling','data-ft':ta,feedback:ra,href:ua,onCommentClick:wa,onToggle:xa});}else{var xa=(function(event){l.onBlingboxClick(event.currentTarget);this._visibilityToggler();event.preventDefault();}).bind(this);sa=s.createElement(v,{likes:ra.likecount,likesreduced:ra.likecountreduced,comments:va,commentsreduced:ra.commentcountreduced,reshares:ra.sharecount,resharesreduced:ra.sharecountreduced,nfb:ra.nfbcount,permalink:ua,contextArgs:this._contextArgs,onClick:xa,'data-ft':ta,'data-comment-prelude-ref':'action_link_bling'});}this._blingBox=t.render(sa,this._blingRoot);}).bind(this));},_renderTimelineBling:function(){if(this._blingTimelineRoot)z.getFeedbackTarget(this._id,(function(ra){var sa=u.getTrackingInfo(u.types.BLINGBOX),ta=k.getUserActionID(k.types.TIMELINE_SEE_LIKERS),ua=(function(event){var xa=r.byTag(event.target,"form");l.uncollapse(xa,'action_link_timeline_bling');var ya=p.scry(xa,'a.UFIPagerLink');if(ya.length)ya[0].click();event.preventDefault();}).bind(this),va=fa.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount(),wa=s.createElement(ea,{comments:va,commentsreduced:ra.commentcountreduced,commentOnClick:ua,contextArgs:this._contextArgs,'data-ft':sa,'data-gt':ta,enableShowComments:this._enableShowComments,enableShowLikes:this._enableShowLikes,feedbackFBID:this._ftFBID,likes:ra.likecount,likesreduced:ra.likecountreduced,reshares:ra.sharecount,resharesreduced:ra.sharecountreduced,actorid:ra.actorid});t.render(wa,this._blingTimelineRoot);}).bind(this));},_renderLike:function(){if(this._likeRoot)z.getFeedbackTarget(this._id,(function(ra){var sa=!ra.hasviewerliked,ta=(function(event){var va=sa?ia.ActionLinkLike:ia.ActionLinkUnlike;h.inform(va,{ft_id:this._id,like_action:sa,target:event.target});ga.changeReaction(this._id,sa?y.LikeReaction:0,{source:this._source,target:event.target,rootid:this._contextArgs.rootid});event.preventDefault();h.inform('inlineShare/reflow');}).bind(this),ua=s.createElement(ba,{onClick:ta,likeAction:sa,ufiExperiments:this._contextArgs.ufiexperiments});if(this._contextArgs.hasReactions&&ra.canviewerreact)ua=s.createElement(ma,{id:this._id,hasHover:this._contextArgs.hasReactionsHover,hasLabels:this._contextArgs.hasReactionsLabels,hasLongPress:this._contextArgs.hasReactionsLongPress,hasNUX:this._contextArgs.hasReactionsNUX&&!ra.hasviewerliked,onActionLikeClick:ta,reaction:ra.viewerreaction});t.render(ua,this._likeRoot);}).bind(this));},_renderComment:function(){if(!this._commentRoot)return;var ra={onClick:(function(event){event.preventDefault();this._setInlineShareActive(false);}).bind(this)};if(this._contextArgs.commentajaxify)ra={ajaxify:this._contextArgs.commentajaxify,rel:'dialog'};var sa=s.createElement(x,babelHelpers._extends({ufiExperiments:this._contextArgs.ufiexperiments},ra));this._commentLink=t.render(sa,this._commentRoot);},_renderMessageReply:function(){if(this._messageReplyRoot)z.getFeedbackTarget(this._id,(function(ra){this._messageReplyLink=null;if(ra.allowmessagelink){var sa=s.createElement(i,{bootloadPlaceholder:s.createElement('span',null),bootloadLoader:q('UFIMessageLink.react'),feedbackSource:this._source,postID:this._id});this._messageReplyLink=t.render(sa,this._messageReplyRoot);}else if(ra.messagereplycontext){var ta=s.createElement(ha,{actorID:ra.actorforpost,activityID:this._id,context:ra.messagereplycontext});this._messageReplyLink=t.render(ta,this._messageReplyRoot);}if(!this._messageReplyLink||!t.findDOMNode(this._messageReplyLink)){if(this._messageReplySeparator)this._messageReplySeparator.data='';o.setContent(this._messageReplyRoot,null);return;}if(this._messageReplySeparator)this._messageReplySeparator.data=this._messageReplySeparatorData;}).bind(this));},_renderSubscribe:function(){if(this._subscribeRoot)z.getFeedbackTarget(this._id,(function(ra){var sa=!ra.hasviewersubscribed,ta=(function(event){ga.changeSubscribe(this._id,sa,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,commentexpandmode:ra.commentexpandmode});event.preventDefault();}).bind(this),ua=s.createElement(da,{onClick:ta,subscribeAction:sa});this._subscribeLink=t.render(ua,this._subscribeRoot);}).bind(this));},_onShareClick:function(event){if(this._getInlineShareLoaded()){this._setInlineShareActive(true);event.kill();}},_renderShare:function(ra){if(!(this._shareRoot&&this._shareURI))return;var sa=!this._getInlineShareActive()&&this._shareNowMenuURI,ta=this._ufiInstanceID,ua;if(sa&&oa){ua=s.createElement(oa,babelHelpers._extends({endpoint:this._shareNowMenuURI,endpointData:{ufi_id:ta}},ra),s.createElement(ca,{href:'#',ufiExperiments:this._contextArgs.ufiexperiments}));}else{var va=null;if(sa){va={onClick:this._bootloadShareMenu.bind(this,{openOnInit:true}),onFocus:this._bootloadShareMenu.bind(this,{focusOnInit:true}),onMouseOver:this._bootloadShareMenu.bind(this,{})};}else va={ajaxify:new ja(this._shareURI).addQueryData({ufi_id:ta}),rel:this._shareRel,onShareClick:this._onShareClick.bind(this)};ua=s.createElement(ca,babelHelpers._extends({ufiExperiments:this._contextArgs.ufiexperiments,href:'#'},va));}this._shareLink=t.render(ua,this._shareRoot);},_bootloadShareMenu:function(ra){j.loadModules(["UFIShareNowMenu.react"],(function(sa){oa=sa;this._renderShare(ra);}).bind(this));},_setInlineShareActive:function(ra){var sa=aa.getKeyForInstance(this._ufiInstanceID,'inlineShare');aa.updateState(this._ufiInstanceID,'inlineShare',babelHelpers._extends({},sa,{active:ra,toggling:true}));},_getInlineShareLoaded:function(){var ra=aa.getKeyForInstance(this._ufiInstanceID,'inlineShare');return !!(ra&&ra.loaded);},_getInlineShareActive:function(){var ra=aa.getKeyForInstance(this._ufiInstanceID,'inlineShare');return !!(ra&&ra.active);},_isRenderingOnTimeline:function(){if(this._source===y.UFIFeedbackSourceType.PROFILE){var ra=p.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline');return ra.length>0;}return false;}});f.exports=qa;},null);
__d('PageAdminSignatureSettings',['Arbiter','AdminSignatureConstants','invariant'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m){'use strict';this.$PageAdminSignatureSettings1();if(!!m)this.$PageAdminSignatureSettings2=m;if(l instanceof k){!!!m?j(0):undefined;this.$PageAdminSignatureSettings3(l);}else if(l!==null&&l!==undefined){this.$PageAdminSignatureSettings4=l.isValid;if(!this.$PageAdminSignatureSettings4)return;this.$PageAdminSignatureSettings5=l.signature;this.$PageAdminSignatureSettings6=l.shouldAttachToPost;this.$PageAdminSignatureSettings7=l.shouldAttachToComment;this.$PageAdminSignatureSettings8=l.shouldAttachToMessage;this.$PageAdminSignatureSettings9=l.everPromptedUser;this.$PageAdminSignatureSettings10=l.pageID;this.$PageAdminSignatureSettings11=l.userID;}h.subscribe(i.EVENT_ADMIN_SIGNATURE_SETTING_CHANGED,(function(n,o){return this.$PageAdminSignatureSettings12(n,o);}).bind(this));h.subscribe(i.EVENT_ADMIN_SIGNATURE_PROMPTED,(function(n,o){return this.$PageAdminSignatureSettings13(n,o);}).bind(this));}k.prototype.getIsValid=function(){'use strict';return this.$PageAdminSignatureSettings4;};k.prototype.getIsValidWithActor=function(){'use strict';return this.getIsValid()&&this.$PageAdminSignatureSettings2!==null&&this.$PageAdminSignatureSettings2===this.$PageAdminSignatureSettings10;};k.prototype.getPageID=function(){'use strict';return this.$PageAdminSignatureSettings10;};k.prototype.getUserID=function(){'use strict';return this.$PageAdminSignatureSettings11;};k.prototype.getSignature=function(){'use strict';return this.$PageAdminSignatureSettings5;};k.prototype.getShouldAttachToPost=function(){'use strict';return this.$PageAdminSignatureSettings6;};k.prototype.getShouldAttachToComment=function(){'use strict';return this.$PageAdminSignatureSettings7;};k.prototype.getShouldAttachToMessage=function(){'use strict';return this.$PageAdminSignatureSettings8;};k.prototype.getEverPromptedUser=function(){'use strict';return this.$PageAdminSignatureSettings9;};k.prototype.$PageAdminSignatureSettings1=function(){'use strict';this.$PageAdminSignatureSettings9=false;this.$PageAdminSignatureSettings10="";this.$PageAdminSignatureSettings7=false;this.$PageAdminSignatureSettings8=false;this.$PageAdminSignatureSettings6=false;this.$PageAdminSignatureSettings5="";this.$PageAdminSignatureSettings11="";this.$PageAdminSignatureSettings4=false;this.$PageAdminSignatureSettings2=null;};k.prototype.$PageAdminSignatureSettings3=function(l){'use strict';this.$PageAdminSignatureSettings9=l.$PageAdminSignatureSettings9;this.$PageAdminSignatureSettings10=l.$PageAdminSignatureSettings10;this.$PageAdminSignatureSettings7=l.$PageAdminSignatureSettings7;this.$PageAdminSignatureSettings8=l.$PageAdminSignatureSettings8;this.$PageAdminSignatureSettings6=l.$PageAdminSignatureSettings6;this.$PageAdminSignatureSettings5=l.$PageAdminSignatureSettings5;this.$PageAdminSignatureSettings11=l.$PageAdminSignatureSettings11;this.$PageAdminSignatureSettings4=l.$PageAdminSignatureSettings4;};k.prototype.$PageAdminSignatureSettings13=function(l,m){'use strict';if(m.userID!==this.$PageAdminSignatureSettings11)return;this.$PageAdminSignatureSettings9=true;};k.prototype.$PageAdminSignatureSettings12=function(l,m){'use strict';if(m.userID!==this.$PageAdminSignatureSettings11||m.pageID!==this.$PageAdminSignatureSettings10)return;switch(m.settingChanged){case i.SETTING_ATTACH_TO_POST:this.$PageAdminSignatureSettings6=m.newValue;break;case i.SETTING_ATTACH_TO_MESSAGE:this.$PageAdminSignatureSettings8=m.newValue;break;case i.SETTING_ATTACH_TO_COMMENT:this.$PageAdminSignatureSettings7=m.newValue;break;default:j(0);}};f.exports=k;},null);
__d('ScrollSuppressor',['ScrollAwareDOM'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=0,j=null,k={start:function(){if(j)return;j=h.subscribe('scroll',function(){if(i>0){i-=1;return false;}return true;});},stop:function(){if(j){h.unsubscribe(j);j=null;}},increment:function(){i+=1;}};f.exports=k;},null);
__d("MentionsInputUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={generateDataFromTextWithEntities:function(i){var j=i.text,k=[];(i.ranges||[]).forEach(function(m){var n=m.entity;if(!n.external)k.push({uid:n.id,text:j.substr(m.offset,m.length),offset:m.offset,length:m.length,weakreference:!!n.weakreference});});var l={value:j,mentions:k};return l;}};f.exports=h;},null);
__d('ShareNowConstants',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={error:h._("This post could not be shared at this time. Please try again later."),success:h._("Your share was posted.")};},null);
__d("InputCaretUtility",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={moveCaretToBeginning:function(i){if(typeof i.selectionStart==="number"){i.selectionStart=i.selectionEnd=0;}else if(i.createTextRange!==undefined){i.focus();var j=i.createTextRange();j.collapse(false);j.select();}},delayedMoveCaretToBeginning:function(i){setTimeout(function(){return h.moveCaretToBeginning(i);});}};f.exports=h;},null);
__d('LegacyMentionsInput.react',['Bootloader','CLogConfig','TypeaheadMetricsConfig','Event','InputCaretUtility','Keys','React','ReactDOM','DOM','cx','FocusListener'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();c('FocusListener');var r=n.PropTypes,s=n.createClass({displayName:'ReactLegacyMentionsInput',propTypes:{initialData:r.object,placeholder:r.string,datasource:r.object,ref:r.string,viewOptionsTypeObjects:r.object,viewOptionsTypeObjectsOrder:r.array,hashtags:r.bool,autoflip:r.bool,onEnterSubmit:r.func,onFocus:r.func,onBlur:r.func,onContentChange:r.func,onTypingStateChange:r.func,onPaste:r.func},componentDidMount:function(){this.props.initialData&&this._initializeTextarea(o.findDOMNode(this));},hasEnteredText:function(){return !!(this._mentionsInput&&this._mentionsInput.getValue().trim());},setSignature:function(t){var u=o.findDOMNode(this.refs.textarea);p.setAttributes(u,{value:t});l.delayedMoveCaretToBeginning(u);},submitComment:function(event){var t;if(event){t=event.target.value&&event.target.value.trim();}else{var u=o.findDOMNode(this.refs.textarea);if(u.value&&u.value!==u.placeholder)t=u.value;}t=t||'';var v={visibleValue:t,encodedValue:t};if(this._mentionsInput)v.encodedValue=this._mentionsInput.getRawValue().trim();var w=this.props.onEnterSubmit(v,event);if(w&&this._mentionsInput){this._mentionsInput.reset();event&&event.preventDefault();}},_handleKeydown:function(event){var t=event.nativeEvent,u=k.getKeyCode(t)==m.RETURN&&!k.$E(t).getModifiers().any,v=this._mentionsInput&&this._mentionsInput.getTypeahead().getView().getSelection();if(this.props.onEnterSubmit&&u&&!v)this.submitComment(event);},_handleFocus:function(){this.props.onFocus&&this.props.onFocus();this._initializeTextarea(o.findDOMNode(this.refs.root));},_handleBlur:function(){this.props.onBlur&&this.props.onBlur();},_initializeTextarea:function(t){if(this._mentionsInput||this._bootloadingMentions)return;this._bootloadingMentions=true;h.loadModules(["CompactTypeaheadRenderer","ContextualTypeaheadView","CLoggerX","InputSelection","MentionsInput","TextAreaControl","Typeahead","TypeaheadAreaCore","TypeaheadBestName","TypeaheadHoistFriends","TypeaheadMetrics","TypeaheadMetricsX","TypingDetector","UFIComments"],(function(u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){var ia=o.findDOMNode(this.refs.textarea);new z(ia);if(i.gkResults){var ja=ha.getComment(this.props.replyCommentID),ka=ja?ja.fbid:null;w.trackMentionsInput(ia,ka);}if(this.props.onTypingStateChange){var la=new ga(ia);la.init();la.subscribe('change',this.props.onTypingStateChange);}var ma={autoSelect:true,renderer:u,causalElement:ia,autoflip:this.props.autoflip};if(this.props.viewOptionsTypeObjects)ma.typeObjects=this.props.viewOptionsTypeObjects;if(this.props.viewOptionsTypeObjectsOrder)ma.typeObjectsOrder=this.props.viewOptionsTypeObjectsOrder;var na=new aa(this.props.datasource,{ctor:v,options:ma},{ctor:ba},o.findDOMNode(this.refs.typeahead)),oa=[ca,da];if(j.gkResults){var pa=new fa({extraData:{event_name:'mention_metric_x'}});pa.init(na);}var qa=new ea({extraData:{event_name:'mentions',from_location:'comments'}});aa.initNow(na,oa,qa);this._mentionsInput=new y(t,na,ia,{hashtags:this.props.hashtags});this._mentionsInput.init({},this.props.initialData);if(this.props.initialData)x.set(ia,ia.value.length);if(this.props.onPaste)k.listen(ia,'paste',this.props.onPaste);if(this.props.onContentChange)this._inputOnChangeSubscriber=this._mentionsInput.subscribe('valueUpdate',(function(ra,sa){var ta=sa.value;this.props.onContentChange(!!(ta&&ta.trim().length));}).bind(this));this._bootloadingMentions=false;}).bind(this));},focus:function(){try{o.findDOMNode(this.refs.textarea).focus();}catch(t){}},componentWillUnmount:function(){if(this._mentionsInput&&this._inputOnChangeSubscriber)this._mentionsInput.unsubscribe(this._inputOnChangeSubscriber);},render:function(){var t="textInput"+(' '+"mentionsTextarea")+(' '+"uiTextareaAutogrow")+(' '+"uiTextareaNoResize")+(' '+"UFIAddCommentInput");return (n.createElement('div',{ref:'root',className:'uiMentionsInput textBoxContainer ReactLegacyMentionsInput'},n.createElement('div',{className:'highlighter'},n.createElement('div',null,n.createElement('span',{className:'highlighterContent hidden_elem'}))),n.createElement('div',{ref:'typeahead',className:'uiTypeahead mentionsTypeahead'},n.createElement('div',{className:'wrap'},n.createElement('input',{type:'hidden',autoComplete:'off',className:'hiddenInput'}),n.createElement('div',{className:'innerWrap'},n.createElement('textarea',{ref:'textarea',name:'add_comment_text',className:t,title:this.props.placeholder,placeholder:this.props.placeholder,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyDown:this._handleKeydown})))),n.createElement('input',{type:'hidden',autoComplete:'off',className:'mentionsHidden',defaultValue:''})));}});f.exports=s;},null);
__d("XPagesAdminSignatureSettingsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/admin\/signature\/settings\/",{});},null,{});
__d("XPagesAdminSignaturePromptDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/admin\/signature\/prompt\/",{__asyncDialog:{type:"Int"}});},null,{});
__d('PageAdminSignatureMonitor',['Arbiter','AsyncRequest','AdminSignatureConstants','DOM','DOMQuery','Event','InputCaretUtility','PageAdminSignatureSettings','XPagesAdminSignatureSettingsController','XPagesAdminSignaturePromptDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r={registerComposerControlForSignature:function(s,t,u,v){if(!t||!t.isValid)return;var w=this._getUnderlyingTextControl(s),x=new o(t,u);m.listen(w,'focus',(function(){this._handleInputFieldFocusForSignature(w,x,x.getShouldAttachToPost(),function(y){return y.value;},function(y,z){if(v)z='\n\n'.concat(z);k.setAttributes(y,{value:z});n.delayedMoveCaretToBeginning(y);});}).bind(this));},handleReactInputFieldFocusForSignature:function(s,t,u){this._handleInputFieldFocusForSignature(s,t,u,function(v){return v.hasEnteredText();},function(v,w){return v.setSignature(w);});},prepareConfirmationDialog:function(s,t,u){s.subscribe('confirm',(function(){s.hide();this._notifyPromptConfirmation(t,u,true);}).bind(this));s.subscribe('cancel',(function(){this._notifyPromptConfirmation(t,u,false);}).bind(this));},_promptForAutoSignature:function(s){h.inform(j.EVENT_ADMIN_SIGNATURE_PROMPTED,{userID:s.getUserID()});var t=q.getURIBuilder().getURI();new i().setURI(t).setData({pageID:s.getPageID()}).send();},_handleInputFieldFocusForSignature:function(s,t,u,v,w){if(!t||!t.getIsValidWithActor())return;if(!t.getEverPromptedUser()){this._promptForAutoSignature(t);}else if(u&&!v(s))w(s,t.getSignature());},_notifyPromptConfirmation:function(s,t,u){var v=p.getURIBuilder().getURI();new i().setURI(v).setData({pageID:s,signatureOption:j.SETTING_EVER_PROMPTED,signatureOptionValue:u}).send();this._aribiterNotifyPromptConfirmation(s,t,u);},_getUnderlyingTextControl:function(s){return l.find(s,'textarea');},_aribiterNotifyPromptConfirmation:function(s,t,u){var v=[j.SETTING_ATTACH_TO_POST,j.SETTING_ATTACH_TO_COMMENT,j.SETTING_ATTACH_TO_MESSAGE];v.forEach(function(w){h.inform(j.EVENT_ADMIN_SIGNATURE_SETTING_CHANGED,{pageID:s,userID:t,settingChanged:w,newValue:u});});}};f.exports=r;},null);
__d('UFIBusinessActorIcon.react',['AppConstants.brands','React','cx','joinClasses','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=/[^\u4e00-\u9eff]+/,o=i.createClass({displayName:'UFIBusinessActorIcon',propTypes:{firstName:m.string.isRequired,lastName:m.string.isRequired,classNames:m.string,textClassNames:m.string,businessRole:m.oneOf(l(h.USER_ROLE))},render:function(){var p=this._getInitials(this.props.firstName,this.props.lastName),q=this.props.businessRole===h.USER_ROLE.ADMIN;return (i.createElement('div',{className:k(this.props.classNames,"_1rpl")},i.createElement('div',{className:k(this.props.textClassNames,q?"_1rpm":null)},p)));},_getInitials:function(p,q){if(!(typeof p==='string')||!(typeof q==='string'))return '?';var r=p.trim().charAt(0)+q.trim().charAt(0);if(this._isLatinLanguage(r)){r=r.toUpperCase();}else r=q.trim().charAt(0);return r;},_isLatinLanguage:function(p){if(!(typeof p==='string'))return false;var q=p.replace(/[\s.-]+/g,'');return n.test(q);}});f.exports=o;},null);
__d('UFIActorIconContainer.react',['React','ShortProfiles','UFIActorIcon.react','UFIBusinessActorIcon.react','XUISpinner.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=h.PropTypes,p=h.createElement(l,{size:'large'}),q=h.createClass({displayName:'UFIActorIconContainer',propTypes:{actorID:o.string.isRequired,className:o.string},getInitialState:function(){return {actor:null};},componentWillMount:function(){this._fetchActorData();},componentDidUpdate:function(r){if(this.props.actorID!==r.actorID)this._fetchActorData();},_fetchActorData:function(){i.get(this.props.actorID,(function(r){return this.setState({actor:r});}).bind(this));},render:function(){var r=this.state.actor;if(!r)return p;var s=n("img UFIActorImage _54ru",this.props.className);return (r.isBusinessPersona?h.createElement(k,{classNames:s,firstName:r.firstName,lastName:r.lastName,textClassNames:"UFIBusinessActorIconText"}):h.createElement(j,{alt:r.name,className:s,src:r.thumbSrc}));}});f.exports=q;},null);
__d('AbstractCommentLiveTypingController',['ex','destroyOnUnload'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={START:'start',STOP:'stop'},k=10*1000;function l(m,n){this.$AbstractCommentLiveTypingController1=m;this.$AbstractCommentLiveTypingController2=n;this.$AbstractCommentLiveTypingController3=null;this.$AbstractCommentLiveTypingController4=false;this.$AbstractCommentLiveTypingController5=0;this.$AbstractCommentLiveTypingController6=null;i(this.destroy.bind(this));}l.prototype.destroy=function(){this.$AbstractCommentLiveTypingController3&&this.$AbstractCommentLiveTypingController3.destroy();this.$AbstractCommentLiveTypingController3=null;this.$AbstractCommentLiveTypingController4=false;this.$AbstractCommentLiveTypingController5=0;this.$AbstractCommentLiveTypingController6=null;};l.prototype.bootloadPublisherModule=function(m){throw new Error(h('bootloadPublisherModule not implemented, '+'should be overridden by subclass'));};l.prototype.$AbstractCommentLiveTypingController7=function(m){var n=new m(this.$AbstractCommentLiveTypingController1,this.$AbstractCommentLiveTypingController2),o=Date.now(),p=this.$AbstractCommentLiveTypingController5;if(p&&p+k>=o){var q=this.$AbstractCommentLiveTypingController6;if(q===j.START){n.handleStartEvent();}else if(q===j.STOP)n.handleStopEvent();}this.$AbstractCommentLiveTypingController3=n;};l.prototype.$AbstractCommentLiveTypingController8=function(){if(this.$AbstractCommentLiveTypingController4||!this.$AbstractCommentLiveTypingController1)return;this.$AbstractCommentLiveTypingController4=true;this.bootloadPublisherModule(this.$AbstractCommentLiveTypingController7.bind(this));};l.prototype.attemptPublishStartEvent=function(){this.$AbstractCommentLiveTypingController6=j.START;this.$AbstractCommentLiveTypingController5=Date.now();if(this.$AbstractCommentLiveTypingController3){this.$AbstractCommentLiveTypingController3.handleStartEvent();}else if(!this.$AbstractCommentLiveTypingController4)this.$AbstractCommentLiveTypingController8();};l.prototype.attemptPublishStopEvent=function(){this.$AbstractCommentLiveTypingController6=j.STOP;this.$AbstractCommentLiveTypingController5=Date.now();if(this.$AbstractCommentLiveTypingController3){this.$AbstractCommentLiveTypingController3.handleStopEvent();}else if(!this.$AbstractCommentLiveTypingController4)this.$AbstractCommentLiveTypingController8();};f.exports=l;},null);
__d('UFIAddCommentLiveTypingController',['AbstractCommentLiveTypingController','Bootloader'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,h);k=j&&j.prototype;function l(m,n){k.constructor.call(this,m,n);}l.prototype.bootloadPublisherModule=function(m){i.loadModules(["UFIAddCommentLiveTypingPublisher"],m);};l.prototype.attemptPublishStartEvent=function(){k.attemptPublishStartEvent.call(this);};l.prototype.attemptPublishStopEvent=function(){k.attemptPublishStopEvent.call(this);};f.exports=l;},null);
__d('UFIStickerButton.react',['Bootloader','ContextualLayerAutoFlip','Link.react','React','ReactLayeredComponentMixin','StickerInterfaces','cx','fbt','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=k.PropTypes,r=k.createClass({displayName:'UFIStickerButton',propTypes:{onStickerFlyoutShow:q.func,onStickerSelected:q.func.isRequired,onEmoticonSelected:q.func,showTooltip:q.bool,stickerInterface:q.oneOf(p(m))},mixins:[l],getDefaultProps:function(){return {showTooltip:true,stickerInterface:m.COMMENTS};},getInitialState:function(){return {renderFlyout:null,flyoutShown:false};},render:function(){var s=o._("Post a sticker");return (k.createElement(j,{'aria-label':this.props.showTooltip?s:null,className:'UFICommentStickerButton','data-hover':'tooltip','data-tooltip-alignh':'center',onClick:this._onLinkClicked,onMouseDown:this._prepareForClick},k.createElement('div',{ref:'icon',tabIndex:0,className:'UFICommentStickerIcon'}),this.props.children));},renderLayers:function(){return !this.state.renderFlyout?{}:this.state.renderFlyout();},_hideFlyout:function(){this.setState({flyoutShown:false});},_prepareForClick:function(){this._clickGuard=this.state.flyoutShown;},_onLinkClicked:function(){if(this.state.renderFlyout!==null){if(!this._clickGuard){this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();this.setState({flyoutShown:true});}return;}h.loadModules(["XUIContextualDialog.react","StickersFlyout.react"],(function(s,t){this.setState({flyoutShown:true,renderFlyout:(function(){return {contextualDialog:k.createElement(s,{alignment:'right',behaviors:{flip:i},className:"_5e-r",contextRef:(function(){return this.refs.icon;}).bind(this),onBlur:this._hideFlyout,position:'above',shown:this.state.flyoutShown,hasActionableContext:true,width:278},k.createElement('div',null,k.createElement(t,{onEscKeyDown:this._hideFlyout,onStickerSelect:this._onStickerSelected,onEmoticonSelect:this._onEmoticonSelected,stickerInterface:this.props.stickerInterface,shown:this.state.flyoutShown})))};}).bind(this)});this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();}).bind(this));},_onStickerSelected:function(s,event){this.props.onStickerSelected(s,event);this._hideFlyout();},_onEmoticonSelected:function(s){this.props.onEmoticonSelected(s);this._hideFlyout();}});f.exports=r;},null);
__d("XFeedNUXSaveSeenStateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false}});},null,{});
__d('dotAccess',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=j.split('.');do{var m=l.shift();i=i[m]||k&&(i[m]={});}while(l.length&&i);return i;}f.exports=h;},null);
__d('UFIAddComment.react',['ActorURI','Arbiter','AsyncRequest','Bootloader','ClipboardPhotoUploader','getActiveElement','Event','Keys','LegacyMentionsInput.react','Link.react','LitestandStoryInsertionStatus','PageAdminSignatureMonitor','React','ReactDOM','ReactLayeredComponentMixin','Run','SnowflakePermalinkUtils','TrackingNodes','UFIActorIconContainer.react','UFIAddCommentAction','UFIAddCommentLiveTypingController','UFIAttachedPhotoPreview.react','UFIAttachPhotoSection.react','UFIConfig','UFIConstants','UFIImageBlock.react','UFIStickerButton.react','URI','XFeedNUXSaveSeenStateController','cx','dotAccess','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na){if(c.__markCompiled)c.__markCompiled();var oa=t.PropTypes,pa=ma._("Write a comment..."),qa=ma._("Write a reply..."),ra="fcg fss UFICommentTip",sa=19,ta='/ajax/ufi/upload/',ua='/ajax/ufi/sticker_preview/';function va(){return !!ea.canPublishLive;}var wa=t.createClass({displayName:'UFIAddComment',mixins:[v],propTypes:{contextArgs:oa.object.isRequired,viewerActorID:oa.string.isRequired,allowPhotoAttachments:oa.bool,allowStickerAttachments:oa.bool,attachedSticker:oa.object,editingComment:oa.object.isRequired,feedbackIsRanked:oa.bool,hide:oa.bool,initialData:oa.object,isEditing:oa.bool,isFirstComponent:oa.bool,isLastComponent:oa.bool,isSnowlift:oa.bool,isQAndA:oa.bool,mentionsDataSource:oa.object,replyCommentID:oa.string,showSendOnEnterTip:oa.bool,subtitle:oa.any,targetID:oa.string,withoutSeparator:oa.bool},contextTypes:{dispatch:oa.func},getInitialState:function(){var xa=la(this.props,'editingComment.photo_comment');return {attachedPhoto:xa||null,attachedSticker:this.props.attachedSticker||null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,renderStickerNUX:null,stickerNUXVisible:false,isFocused:this.props.isEditing};},_onKeyDown:function(event){if(this.props.isEditing&&n.getKeyCode(event.nativeEvent)===o.ESC)this.context.dispatch(aa.cancel());if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){w.onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var xa=m();if(n.getKeyCode(event.nativeEvent)===o.ESC)xa.blur();},_onContentChange:function(xa){if(xa){this._attemptPublishStartEvent();}else this._attemptPublishStopEvent();},_handleUnsavedChanges:function(){var xa=b.PageTransitions;if(xa){var ya=ia.getNextURI(),za=xa.getMostRecentURI();if(ya.getQueryData().hasOwnProperty('theater')||za.getQueryData().hasOwnProperty('theater')||ya.getQueryData().hasOwnProperty('sdialog')||x.isPermalinkURI(ya)||x.isPermalinkURI(za))return;var ab=b.DialogNavigationStack;if(ab&&ab.isActiveURI(ya))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return ma._("You haven't finished your comment yet. Do you want to leave without finishing?");},_blur:function(){this.setState({stickerNUXVisible:false});setTimeout((function(){if(this.isMounted())this.setState({isFocused:false});}).bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function(event){var xa=new l(ta,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[xa.subscribe('upload_start',this._prepareForAttachedPhotoPreview),xa.subscribe('upload_error',this._onRemoveAttachedPhotoPreviewClicked),xa.subscribe('upload_success',(function(ya,za){this._onPhotoUploadComplete(za);}).bind(this))];xa.handlePaste(event);},_onEnterSubmit:function(xa,event){var ya=this.state.attachedPhoto||this.state.attachedSticker,za=this.props.isEditing||ya;if(this.state.isLoadingPhoto){return false;}else if(!xa.encodedValue.trim()&&!za)return false;xa.encodedValue=xa.encodedValue.trim();if(ya){xa.attachedPhoto=this.state.attachedPhoto;xa.attachedSticker=this.state.attachedSticker;this.setState({isLoadingPhoto:false,attachedPhoto:null,attachedSticker:null});}else{xa.attachedPhoto=null;xa.attachedSticker=null;}if(this.props.isEditing){this.context.dispatch(aa.submitEdit(this.props.editingComment,xa,event.target));}else this.context.dispatch(aa.submitNew(xa,event.target,this.props.replyCommentID,this.props.replyCommentParentID));this._attemptPublishStopEvent();return true;},_cancelCurrentSubscriptions:function(){if(this._subscriptions)this._subscriptions.forEach(function(xa){xa.unsubscribe();});},_getFeedbackTarget:function(xa){return xa.contextArgs.ftentidentifier;},_initTypingEventController:function(){if(!this._typingEventController&&va())this._typingEventController=new ba(this._getFeedbackTarget(this.props),this.props.replyCommentID);},_attemptPublishStartEvent:function(){if(!va())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStartEvent();},_attemptPublishStopEvent:function(){if(!va())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStopEvent();},componentWillMount:function(){this._typingEventController=null;this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=r.registerBlocker((function(){return this.state.isCommenting;}).bind(this));},_destroyLiveTypingController:function(){this._typingEventController&&this._typingEventController.destroy();this._typingEventController=null;},componentWillReceiveProps:function(xa){var ya=this._getFeedbackTarget(this.props),za=this._getFeedbackTarget(xa);if(za!==ya||this.props.replyCommentID!==xa.replyCommentID)this._destroyLiveTypingController();},componentWillUnmount:function(){this._cancelCurrentSubscriptions();if(this._remixedImageToken)i.unsubscribe(this._remixedImageToken);if(this._focusCommentFieldToken)i.unsubscribe(this._focusCommentFieldToken);this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;this._destroyLiveTypingController();},focus:function(){var xa={isCommenting:true,isFocused:true};if(this.props.allowStickerAttachments&&ea.shouldShowStickerNUX){var ya=ja.getURIBuilder().setString('key','sticker_comments').setBool('seen',true).getURI();new j(ya).send();if(this.state.renderStickerNUX===null)k.loadModules(["XUIAmbientNUX.react"],(function(ab){xa.renderStickerNUX=(function(){return {ambientNUX:t.createElement(ab,{contextRef:(function(){return this.refs.sticker_button;}).bind(this),shown:this.state.stickerNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hideStickerNUX},ma._("Now you can comment with a sticker!"))};}).bind(this);}).bind(this));ea.shouldShowStickerNUX=false;xa.stickerNUXVisible=true;}var za=this.props.contextArgs.pagesAdminSignatureSettings;if(za)s.handleReactInputFieldFocusForSignature(this.refs.mentionsinput,za,za.getShouldAttachToComment());this.setState(xa);},renderLayers:function(){return !this.state.renderStickerNUX?{}:this.state.renderStickerNUX();},_setFileInput:function(xa,ya){this.setState({fileInput:xa,fileUploader:ya});},render:function(){var xa=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting,ya=null;if(this.props.subtitle){ya=t.createElement('span',{className:ra},this.props.subtitle);}else if(!this.state.isFocused&&this.props.isEditing){ya=t.createElement('span',{className:ra},ma._("{cancel}",[ma.param('cancel',t.createElement(q,{onClick:(function(){return (this.context.dispatch(aa.cancel()));}).bind(this)},ma._("Cancel")))]));}else if(this.props.isEditing){ya=t.createElement('span',{className:ra},ma._("Press Esc to {cancel}.",[ma.param('cancel',t.createElement(q,{onClick:(function(){return (this.context.dispatch(aa.cancel()));}).bind(this)},ma._("cancel")))]));}else if(this.props.showSendOnEnterTip)ya=t.createElement('span',{className:ra},ma._("Press Enter to post."));var za=null,ab=null,bb=this.state.attachedPhoto||this.state.attachedSticker,cb=null;if(this.props.allowStickerAttachments&&!bb)ab=t.createElement(ha,{ref:'sticker_button',onStickerSelected:this.onStickerSelected,onEmoticonSelected:this._insertEmoticonIntoCommentText});if(this.props.allowPhotoAttachments){cb=this._onPaste;za=t.createElement(da,{getPhotoUploadData:this._getPhotoUploadData,prepareForAttachedPhotoPreview:this._prepareForAttachedPhotoPreview,onPhotoUploadComplete:this._onPhotoUploadComplete,setFileInput:this._setFileInput,attachment:bb});}var db=y.getTrackingInfo(y.types.ADD_COMMENT_BOX),eb=t.createElement('div',{className:'UFIReplyActorPhotoWrapper',onClick:this.focus},t.createElement(z,{actorID:this.props.viewerActorID,className:!xa?"hidden_elem":''})),fb=na((this.props.hide?"noDisplay":'')+(' '+"UFIRow")+(' '+"UFIComponent")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),gb;if(!!this.props.replyCommentID){gb=qa;}else if(this.props.isQAndA){gb=ma._("Ask a question...");}else if(this.props.source===fa.UFIFeedbackSourceType.TOPIC_CONVERSATION){gb=ma._("Discuss this topic...");}else if(!this.props.contextArgs.hasComments&&this.props.contextArgs.commentPlaceholderText){gb=this.props.contextArgs.commentPlaceholderText;}else gb=pa;var hb=this.props.contextArgs.viewoptionstypeobjects,ib=this.props.contextArgs.viewoptionstypeobjectsorder;if(this.props.attachedPhoto&&!this.props.subtitle)ya=null;var jb=t.createElement(ca,{attachedPhoto:this.state.attachedPhoto,attachedSticker:this.state.attachedSticker,onRemoveAttachedPhotoPreview:this._onRemoveAttachedPhotoPreviewClicked,onRemoveAttachedStickerPreview:this._onRemoveAttachedStickerPreviewClicked,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto}),kb=this.props.allowStickerAttachments?na("UFIMentionsInputWrap","UFIStickersEnabledInput"):"UFIMentionsInputWrap",lb,mb,nb;if(this.props.contextArgs.mentionsinput){var ob=this.props.contextArgs.mentionsinput;lb=ob.inputComponent;mb=ob.viewComponent;nb=ob.viewProps;}else lb=p;var pb=this.props.contextArgs.logtyping?(function(qb,rb){return this.context.dispatch(aa.typingChange(rb));}).bind(this):null;return (t.createElement('li',{className:fb,onKeyDown:this._onKeyDown,'data-ft':db},t.createElement(ga,{className:kb},eb,t.createElement('div',{className:'UFICommentContainer'},t.createElement('div',{className:'UFIInputContainer'},t.createElement(lb,{replyCommentID:this.props.replyCommentID,initialData:this.props.initialData,placeholder:gb,datasource:this.props.mentionsDataSource,ref:'mentionsinput',viewComponent:mb,viewProps:nb,viewOptionsTypeObjects:hb,viewOptionsTypeObjectsOrder:ib,hashtags:this.props.contextArgs.sht,showHashtagTypeahead:this.props.contextArgs.showHashtagTypeahead,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this._onEnterSubmit,onFocus:this.focus,onBlur:this._blur,onContentChange:va()?this._onContentChange:null,onTypingStateChange:pb,onPaste:cb,showBusinessTypeahead:this.props.contextArgs.showBusinessTypeahead,ftEntIdentifier:this.props.contextArgs.ftentidentifier}),t.createElement('div',{className:"UFICommentAttachmentButtons clearfix"},za,ab)),jb,ya))));},componentDidUpdate:function(xa,ya,za){if(!ya.attachedPhoto&&this.state.attachedPhoto||!ya.attachedSticker&&this.state.attachedSticker||!ya.isCommenting&&this.state.isCommenting)this.refs.mentionsinput.focus();if(xa.viewerActorID!==this.props.viewerActorID){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedPhotoPreviewClicked();}},componentDidMount:function(){if(!this.props.allowPhotoAttachments)return;if(this.props.replyCommentID===null){this._focusCommentFieldToken=i.subscribe('focusCommentField'+this.props.contextArgs.ftentidentifier,(function(xa){this.refs.mentionsinput.focus();}).bind(this));i.inform('finishedMounting'+this.props.contextArgs.ftentidentifier);if(this.props.isSnowlift)this._remixedImageToken=i.subscribe('newRemixedImage'+this.props.contextArgs.ftentidentifier,(function(xa,ya){var event={clipboardData:{items:[ya]}};this._onPaste(event);}).bind(this));}},insertMention:function(xa){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(xa);},_getPhotoUploadData:function(){var xa=this.props.viewerActorID,ya={profile_id:xa,target_id:this.props.targetID,source:sa};ya[h.PARAMETER_ACTOR]=xa;return ya;},_onPhotoUploadComplete:function(xa){if(!this.state.isLoadingPhoto)return;var ya=xa.getPayload();if(ya&&ya.fbid){this.setState({attachedPhoto:ya,isLoadingPhoto:false});}else this._onRemoveAttachedPhotoPreviewClicked(null);},_onRemoveAttachedPhotoPreviewClicked:function(event){this.setState({attachedPhoto:null,isLoadingPhoto:false});},_prepareForAttachedPhotoPreview:function(){this.setState({attachedPhoto:null,isLoadingPhoto:true});},_onStickerUploadComplete:function(xa){if(!this.state.isLoadingPhoto)return;var ya=xa.getPayload();if(ya&&ya.fbid){this.setState({attachedSticker:ya,isLoadingPhoto:false});}else{k.loadModules(["Dialog"],function(za){var ab=ma._("Sticker Failed"),bb=ma._("There was a problem attaching the sticker.");new za().setTitle(ab).setBody(bb).setButtons(za.OK).show();});this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function(event){this.setState({attachedSticker:null,isLoadingPhoto:false});},onStickerSelected:function(xa,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this._prepareForAttachedStickerPreview(xa);return;}this.sendSticker(xa,event);},_prepareForAttachedStickerPreview:function(xa){this.setState({attachedSticker:null,isLoadingPhoto:true});new j(ua).setData({sticker_id:xa}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},sendSticker:function(xa,event){var ya={encodedValue:'',visibleValue:'',attachedPhoto:null,attachedSticker:{fbid:xa}};this.context.dispatch(aa.submitNew(ya,event.target,this.props.replyCommentID,this.props.replyCommentParentID));},_insertEmoticonIntoCommentText:function(xa){k.loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],(function(ya,za,ab,bb){var cb=ya.symbols[xa];if(!cb)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(cb);return;}if(!this._selectionPosition)this._selectionPosition=new bb(u.findDOMNode(this.refs.mentionsinput.refs.textarea));var db=this.refs.mentionsinput.refs.getTextFieldDOM(),eb=ab.getInstance(db),fb=eb.getValue(),gb=za.insertEmoticon(cb,fb,this._selectionPosition.getPos());eb.setValue(gb.result);this._selectionPosition.setPos(gb.start,gb.end);}).bind(this));},_hideStickerNUX:function(){this.setState({stickerNUXVisible:false});}});f.exports=wa;},null);
__d('UFIAddCommentLink.react',['React','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'UFIAddCommentLink',propTypes:{'data-ft':l.string,isFirstCommentComponent:l.bool,isFirstComponent:l.bool,isLastCommentComponent:l.bool,isLastComponent:l.bool,isQAndA:l.bool,onClick:l.func},render:function(){var n=k("UFIRow"+(' '+"UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),o;if(this.props.isQAndA){o=j._("Ask a question...");}else o=j._("Write a comment...");return (h.createElement('li',{className:n,'data-ft':this.props['data-ft']},h.createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},o)));}});f.exports=m;},null);
__d('UFICommentLikeCount.react',['NumberFormat','ProfileBrowserLink','ProfileBrowserTypes','React','URI','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o=function(q,r){var s=new l('/ajax/like/tooltip.php').setQueryData({comment_fbid:q.fbid,comment_from:q.author,comment_likecount:q.likecount||0,comment_id:q.id,cache_buster:q.likeconfirmhash||0});if(r)s.addQueryData({viewas:r});return s;},p=k.createClass({displayName:'UFICommentLikeCount',propTypes:{comment:n.object.isRequired,contextArgs:n.object.isRequired},render:function(){var q=this.props.comment,r=h.formatIntegerWithDelimiter(q.likecount||0,this.props.contextArgs.numberdelimiter),s=j.LIKES,t={id:q.fbid},u=o(this.props.comment,this.props.contextArgs.viewas),v=k.createElement('i',{className:"UFICommentLikeIcon"}),w=k.createElement('span',null,r),x="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":'');return (k.createElement('a',{ajaxify:i.constructDialogURI(s,t).toString(),className:x,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':u.toString(),href:i.constructPageURI(s,t).toString(),rel:'dialog',role:'button'},v,w));}});f.exports=p;},null);
__d('UFISpamCount',['UFISpamCountImpl'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('UFISpamCountImpl').module||{enabled:false};},null);
__d('UFICommentActions.react',['React','ReactFragment','TrackingNodes','UFIAddCommentAction','UFICentralUpdates','UFICommentAction','UFICommentLikeCount.react','UFICommentMetadata.react','UFIConfig','UFIConstants','UFIMiddot.react','UFIPrivateReplyLink.react','UFISpamCount','cx','fbt','PagesPrivateReplyConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w=c('PagesPrivateReplyConstants').Status,x=h.PropTypes,y=q.UFIStatus,z="fsm fwn fcg UFICommentActions",aa="UFIDeletedMessageIcon",ba="UFIDeletedMessage",ca='ufi_comment_like_link',da='ufi_reply_like_link',ea=h.createClass({displayName:'UFICommentActions',propTypes:{comment:x.object.isRequired,contextArgs:x.object.isRequired,feedback:x.object.isRequired,hideAsSpamForPageAdmin:x.bool,markedAsSpamHere:x.bool,onCommentReply:x.func,permalink:x.string,shareLink:x.string,shortenTimestamp:x.bool,showPermalink:x.bool,isStreaming:x.bool,showReplyLink:x.bool,viewerCanMarkNotSpam:x.bool},contextTypes:{dispatch:x.func},render:function(){var fa=this.props,ga=fa.comment,ha=fa.permalink,ia=fa.feedback,ja=fa.markedAsSpamHere,ka=ga.status===y.SPAM_DISPLAY,la=fa.showReplyLink,ma=fa.hideAsSpamForPageAdmin,na,oa,pa,qa,ra,sa,ta,ua,va=!ga.islocal&&ga.status!==y.LIVE_DELETED;if(va){if(ka&&!ja){if(fa.viewerCanMarkNotSpam)na=h.createElement('a',{onClick:(function(event){return this.context.dispatch(m.markAsNotSpam(ga,event));}).bind(this),className:"UFICommentNotSpamLink",href:'#',role:'button'},v._("Unhide"));if(ma&&ia.isthreaded&&ga.cancomment&&la)sa=this.renderCommentReply(ga);}else{if(ga.viewercanlike){var wa=j.getTrackingInfo(ga.hasviewerliked?j.types.UNLIKE_LINK:j.types.LIKE_LINK),xa=ga.hasviewerliked?v._("Unlike this comment"):v._("Like this comment"),ya=ga.parentcommentid?da:ca;oa=h.createElement('a',{className:'UFILikeLink','data-ft':wa,'data-testid':ya,href:'#',onClick:(function(event){return this.context.dispatch(m.toggleLike(ga,event.target));}).bind(this),role:'button',title:xa},ga.hasviewerliked?v._("Unlike"):v._("Like"));}if(ia.isthreaded&&ga.cancomment&&la||!!ga.parentcommentid&&p.showReplyToReply&&ia.cancomment)sa=this.renderCommentReply(ga);if(ga.likecount>0)qa=h.createElement(n,{comment:ga,contextArgs:fa.contextArgs});if(ga.spamcount&&t.enabled)ra=h.createElement(t,{count:ga.spamcount});if(ga.messagereply&&(ga.messagereply.hasReplyPermission&&ia.actorforpost===ga.messagereply.pageID||ga.messagereply.status===w.ALREADY_REPLIED))ta=h.createElement(s,{actorID:ia.actorforpost,activityID:ga.id,context:ga.messagereply});}if(ga.attachment&&ga.attachment.type==='share'&&ga.canremove)ua=h.createElement('a',{href:'#',onClick:(function(event){return this.context.dispatch(m.removePreview(ga,event.target));}).bind(this),role:'button'},v._("Remove Preview"));if(this.props.contextArgs.shareablecomments)pa=h.createElement('a',{className:'share_action_link',href:fa.comment.commentshareuri,role:'button',rel:'dialog',title:v._("Share this comment")},v._("Share"));}var za=h.createElement(o,{comment:ga,onRetrySubmit:(function(){return this.context.dispatch(k.retrySubmit(ga));}).bind(this),permalink:ha,shortenTimestamp:fa.shortenTimestamp,showPermalink:fa.showPermalink}),ab={};if(ia.customcommentactionlinks)for(var bb in ia.customcommentactionlinks){var cb=ia.customcommentactionlinks[bb];if(cb.showInMenu)continue;var db=function(event){return l.inform(cb.type,{comment:ga,feedback:ia});};ab[cb.type]=h.createElement('a',{href:'#',onClick:db,role:'button'},cb.title);}var eb;if(fa.isStreaming){eb={likeToggle:oa,spamToggle:na,likeCount:qa,spamCount:ra};eb=Object.assign(eb,ab);}else if(ia.isqanda){eb={likeCount:qa,spamCount:ra,likeToggle:oa,commentReply:sa,shareComment:pa,messageReply:ta,spamToggle:na};eb=Object.assign(eb,ab);eb=Object.assign(eb,{metadata:za,removePreview:ua});}else if(fa.contextArgs.entstream){eb={metadata:za,likeToggle:oa,likeCount:qa,commentReply:sa,messageReply:ta,shareComment:pa,spamCount:ra,spamToggle:na,removePreview:ua};eb=Object.assign(eb,ab);}else if(ia.isthreaded){eb={likeToggle:oa,commentReply:sa,messageReply:ta,spamToggle:na,removePreview:ua,shareComment:pa,likeCount:qa,spamCount:ra};eb=Object.assign(eb,ab);eb=Object.assign(eb,{metadata:za});}else{eb={metadata:za,likeToggle:oa,shareComment:pa,likeCount:qa,spamCount:ra,commentReply:sa,messageReply:ta,spamToggle:na,removePreview:ua};eb=Object.assign(eb,ab);}if(ga.status===y.LIVE_DELETED){var fb=h.createElement('span',{className:ba},h.createElement('i',{className:aa,'data-hover':'tooltip','aria-label':v._("Comment deleted")}));eb.deletionWarning=fb;}var gb=true,hb={};for(var ib in eb){var db=eb[ib];if(db){var jb=h.createElement(r,{key:'middot-'+ib});hb[ib]=gb?db:i.create({middot:jb,action:db});gb=false;}}return (h.createElement('div',{className:z},i.create(hb)));},renderCommentReply:function(fa){return (h.createElement('a',{className:"UFIReplyLink",href:'#',onClick:this.props.onCommentReply,role:'button'},v._("Reply")));}});f.exports=ea;},null);
__d('UFISocialContext.react',['HovercardLink','ProfileBrowserLink','ProfileBrowserTypes','React','URI','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o=27,p=k.createClass({displayName:'UFISocialContext',propTypes:{commentAuthor:n.object.isRequired,otherMutualCount:n.number.isRequired,topMutualFriend:n.object.isRequired},render:function(){var q=this.props.topMutualFriend,r=this.props.otherMutualCount,s=this.props.commentAuthor,t=h.constructEndpoint(q).toString(),u=k.createElement('a',{href:q.uri,'data-hovercard':t,key:'top'},q.name),v=s.name.length+q.name.length,w;if(r===0){w=m._("Friends with {name}",[m.param('name',u)]);}else if(v<o){var x;if(r==1){x=m._("1 other");}else x=m._({"*":"{count} others"},[m.param('count',r,[0])]);w=m._("Friends with {name} and {others}",[m.param('name',u),m.param('others',this.getOthersLink(x,s,q))]);}else{var y=m._({"*":"{count} mutual friends"},[m.param('count',r+1,[0])]);w=this.getOthersLink(y,s);}return (k.createElement('span',{className:'UFICommentSocialContext'},w));},getOthersLink:function(q,r,s){var t=j.MUTUAL_FRIENDS,u={uid:r.id},v=new l('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:r.id});if(s)v.addQueryData({exclude_id:s.id});var w=i.constructDialogURI(t,u).toString();return (k.createElement('a',{ajaxify:w,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':v.toString(),href:i.constructPageURI(t,u).toString(),key:'others',rel:'dialog'},q));}});f.exports=p;},null);
__d('UFICommentAuthorName.react',['Badge.react','React','TrackingNodes','UFIActor.react','UFISocialContext.react'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'UFICommentAuthorName',propTypes:{author:m.object.isRequired,authorProfiles:m.object.isRequired,showHovercard:m.bool,isAdminViewer:m.bool,isAuthorWeakReference:m.bool,focusOnMount:m.bool,groupOrEventID:m.number,isFeatured:m.bool,socialContext:m.object,useFirstName:m.bool},render:function(){var o=this.props,p=o.author,q=j.getTrackingInfo(j.types.USER_NAME);return (i.createElement(k,{author:p,showHovercard:o.showHovercard,isAdminViewer:o.isAdminViewer,key:'author',focusOnMount:o.focusOnMount,'data-ft':q,isAuthorWeakReference:o.isAuthorWeakReference,groupOrEventID:o.groupOrEventID,useFirstName:o.useFirstName},o.isFeatured?i.createElement(h,{key:'badge',size:'xsmall',type:'verified'}):null,o.socialContext?i.createElement(l,{topMutualFriend:o.authorProfiles[o.socialContext.topmutualid],otherMutualCount:o.socialContext.othermutualcount,commentAuthor:p}):null));}});f.exports=n;},null);
__d('IntlLang',['UnicodeBidi'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={HE:'\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF'+'\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA'+'\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828'+'\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E'+'\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C'+'\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F'},j=new RegExp('['+i.HE+']');function k(m){var n=h.firstStrongChar(m);if(n===null)return null;if(j.exec(n))return 'he';return null;}var l={getLang:k};f.exports=l;},null);
__d('UFICommentBody.react',['Locale','React','TrackingNodes','TruncatedTextWithEntities.react','UnicodeBidi','IntlLang','UFICommentUtils.react','UFIConfig','UFIConstants','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=i.PropTypes,s=i.createClass({displayName:'UFICommentBody',propTypes:{commentText:r.string.isRequired,commentRanges:r.array,groupOrEventID:r.number,useWhitespacesRender:r.bool,maxLength:r.number,maxLines:r.number,socialContext:r.object},render:function(){var t=this.props,u=t.commentText,v=j.getTrackingInfo(j.types.USER_MESSAGE),w=l.isDirectionLTR(u),x=!w,y=w&&h.isRTL()?'ltr':x&&!h.isRTL()?'rtl':null,z=m.getLang(u),aa=n.getCommentBodyInterpolator(t.groupOrEventID),ba=i.createElement(k,{key:'comment-body',className:"UFICommentBody"+(this.props.useWhitespacesRender?' '+"UFICommentBodyPreserveWhitespace":''),interpolator:aa,ranges:t.commentRanges,text:u,truncationPercent:p.commentTruncationPercent,maxLength:t.maxLength,maxLines:t.maxLines,renderEmoticons:o.renderEmoticons,renderEmoji:o.renderEmoji,'data-ft':v,dir:y,lang:z});if(t.socialContext){ba=i.createElement('div',{key:'body'},ba);}else{var ca=(w&&h.isRTL()?"_5wjy":'')+(w&&h.isRTL()?' '+"_5wjz":'')+(x&&!h.isRTL()?' '+"_5wj-":'')+(x&&!h.isRTL()?' '+"_5wj_":'');ba=ca?i.createElement('div',{key:'body',className:ca},ba):[' ',ba];}return i.createElement('span',null,ba);}});f.exports=s;},null);
__d('XUIEditButton.react',['XUIAbstractGlyphButton.react','React','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.createClass({displayName:'XUIEditButton',render:function(){var n=this.props.label,o=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!n)n=k._("Edit");o=n;}return (i.createElement(h,babelHelpers._extends({},this.props,{label:n,title:o,'aria-label':this.props.tooltip,'data-hover':this.props.tooltip&&'tooltip','data-tooltip-alignh':this.props.tooltip&&'center',className:l(this.props.className,"_5upq _5upr")})));}});f.exports=m;},null);
__d('UFICommentMenu.react',['Bootloader','React','XUICloseButton.react','XUIEditButton.react','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n,o,p,q,r=l({EDIT:true,CLOSE:true}),s=i.createClass({displayName:'UFICommentMenu',propTypes:{menuData:m.array,menuType:m.oneOf(Object.keys(r)).isRequired,onAction:m.func,onClick:m.func},getInitialState:function(){return {bootloading:false,bootloaded:false,needsExpand:false};},onClickGuard:function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});h.loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],(function(t,u,v){n=t,o=u;p=v;q=p.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}).bind(this));}else if(this.props.onClick)this.props.onClick(event);},shouldComponentUpdate:function(t,u,v){if(this.state.needsExpand&&!u.needsExpand)return false;return true;},render:function(){var t=null;if(this.props.menuType===r.EDIT){t=k;}else t=j;if(this.props.menuData&&this.state.bootloaded){var u=this.props.menuData.map(function(w){return (i.createElement(q,{'data-testid':w.testid,key:w.value,value:w.value},w.label));}),v=i.createElement(p,{onItemClick:this.props.onAction},u);return (i.createElement(o,babelHelpers._extends({},this.props,{alignh:'right',layerBehaviors:[n],menu:v,ref:'menu'}),i.createElement(t,{href:'#',onClick:this.onClickGuard})));}return i.createElement(t,babelHelpers._extends({},this.props,{href:'#',onClick:this.onClickGuard}));},componentDidUpdate:function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}}});s.MenuType=r;f.exports=s;},null);
__d('onViewportChanged',['EventListener','emptyFunction','getViewportDimensions','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=[],m=false,n=null,o,p;function q(){var ba=j.withoutScrollbars();return {top:0,bottom:ba.height,left:0,right:ba.width};}function r(ba,ca){var da={transform:ca||i.thatReturnsArgument,callback:ba,needsUpdate:true};l.push(da);y();t();return {remove:s.bind(null,da),scheduleCheck:w.bind(null,da)};}function s(ba){var ca=l.indexOf(ba);if(ca!==-1){l.splice(ca,1);if(l.length===0){u();n=null;}}}function t(){if(!p){p=h.listen(window,'scroll',x);o=h.listen(window,'resize',v);}}function u(){if(p){p.remove();o.remove();p=o=null;}}function v(){n=null;x();}function w(ba){ba.needsUpdate=true;y();}function x(){l.map(function(ba){return ba.needsUpdate=true;});y();}function y(){if(!m){m=true;k(function(){m=false;aa();});}}function z(ba){if(ba.needsUpdate){ba.needsUpdate=false;return true;}return false;}function aa(){if(!n)n=q();var ba=l.filter(z),ca=ba.map(function(da){return da.transform.call(null,n);});ba.forEach(function(da,ea){return da.callback.call(null,ca[ea]);});}f.exports=r;},null);
__d('onRectIsWithinViewport',['onViewportChanged'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k,l){return !(k.bottom<l.top||k.top>l.bottom||k.right<l.left||k.left>l.right);}function j(k,l){var m;function n(p){var q=k();return !!q&&i(q,p);}function o(p){if(m!==p){m=p;l(p);}}return h(o,n);}f.exports=j;},null);
__d('OnVisible.react',['React','ReactDOM','getElementRect','onRectIsWithinViewport','onlyChild'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=h.createClass({displayName:'OnVisible',propTypes:{onVisible:m.func,onHidden:m.func,buffer:m.number},componentDidMount:function(){this._createListener();},componentDidUpdate:function(){this._createListener();},componentWillUnmount:function(){this._removeListener();},reset:function(){this._removeListener();this._createListener();},check:function(){if(this._listener)this._listener.scheduleCheck();},_measureElementRect:function(){if(!this.isMounted())return null;var o=this.props.buffer||0,p=j(i.findDOMNode(this));p.left-=o;p.right+=o;p.top-=o;p.bottom+=o;return p;},_createListener:function(){var o=i.findDOMNode(this);if(this._listener&&o!==this._element)this._removeListener();if(!this._listener){this._element=o;this._listener=k(this._measureElementRect,(function(p){var q=p?this.props.onVisible:this.props.onHidden;q&&q();}).bind(this));}},_removeListener:function(){if(this._listener){this._listener.remove();this._listener=null;}},render:function(){return l(this.props.children);}});f.exports=n;},null);
__d('UFICommentVPVTracker.react',['OnVisible.react','React','UFICommentVPVs','UFIConfig','clearTimeout','setTimeout'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'UFICommentVPVTracker',propTypes:{comment:n.object.isRequired,contextArgs:n.object.isRequired},render:function(){var p=this.props.comment.id,q=this.props.contextArgs.instanceid,r=this.props.children;if(!j.hasLoggedVPV(q,p))r=i.createElement(h,{onVisible:this.maybeScheduleVPVLogging,onHidden:this.cancelScheduledVPVLogging},r);return r;},maybeScheduleVPVLogging:function(){if(this.state.timer!==null)return;var p=this.props.comment.id,q=this.props.contextArgs.instanceid;if(j.hasLoggedVPV(q,p))return;this.setState({timer:m((function(){j.logVPV(q,p);this.setState({timer:null});}).bind(this),k.vpvLoggingTimeout)});},cancelScheduledVPVLogging:function(){if(this.state.timer===null)return;l(this.state.timer);this.setState({timer:null});},getInitialState:function(){return {timer:null};},shouldComponentUpdate:function(p,q){return q.timer===this.state.timer;},componentWillReceiveProps:function(){this.cancelScheduledVPVLogging();},componentWillUnmount:function(){this.cancelScheduledVPVLogging();}});f.exports=o;},null);
__d('UFIComment.react',['BanzaiLogger','Bootloader','HovercardLink','React','ReactDOM','TrackingNodes','TextWithEntities.react','UFIActorIconContainer.react','UFICentralUpdates','UFICommentAction','UFICommentActions.react','UFICommentAttachment.react','UFICommentAuthorName.react','UFICommentBody.react','UFICommentMenu.react','UFICommentUtils.react','UFICommentVPVTracker.react','UFIConfig','UFIConstants','UFIImageBlock.react','UFITranslationConstants','URI','UserHovercardLocation','XUICloseButton.react','cx','emptyFunction','joinClasses','keyMirror','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja){'use strict';if(c.__markCompiled)c.__markCompiled();var ka=k.PropTypes,la=z.UFIStatus,ma=ia({edit:true,hide:true,remove:true}),na='ufi_comment_close_button',oa='ufi_highlighted_comment',pa='ufi_comment_menu_delete',qa='ufi_comment_menu_edit',ra='ufi_comment_menu_hide',sa="UFITranslateLink",ta="UFITranslatedText",ua="UFITranslationErrorText",va="UFITranslateAttribution",wa="fcg",xa={testid:pa,value:ma.remove,label:ja._("Delete Comment...")},ya={testid:ra,value:ma.hide,label:ja._("Hide Comment")},za=null,ab=function(db){var eb=db.status;return eb===la.FAILED_ADD||eb===la.FAILED_EDIT;};function bb(db){return db.commenterIsFOF!==undefined&&db.userIsMinor!==undefined&&db.reportLink!==undefined;}var cb=k.createClass({displayName:'UFIComment',propTypes:{authorProfiles:ka.object.isRequired,comment:ka.object.isRequired,contextArgs:ka.object.isRequired,feedback:ka.object.isRequired,'data-ft':ka.string,focusOnMount:ka.bool,hasPartialBorder:ka.bool,hideAsSpamForPageAdmin:ka.bool,isFeatured:ka.bool,isFirst:ka.bool,isFirstCommentComponent:ka.bool,isFirstComponent:ka.bool,isLast:ka.bool,isLastCommentComponent:ka.bool,isLastComponent:ka.bool,isLocallyComposed:ka.bool,isReply:ka.bool,onCommentReply:ka.func,permalink:ka.string,shortenTimestamp:ka.bool,showPermalink:ka.bool,isStreaming:ka.bool,showRemoveReportMenu:ka.bool,showReplyLink:ka.bool,viewerIsAuthor:ka.bool},contextTypes:{dispatch:ka.func},getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,isInlinePageDeleted:false,isInlineBanned:false,loggedLiveUpdate:false};},_onHideAsSpam:function(event){this.context.dispatch(q.markAsSpam(this.props.comment,event));this.setState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.context.dispatch(q.markAsNotSpam(this.props.comment,event));this.setState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.context.dispatch(q.remove(this.props.comment,event.target,(function(){return this.setState({isInlinePageDeleted:true});}).bind(this)));},_onRemove:function(event){this.context.dispatch(q.remove(this.props.comment,event.target,ga));},_onInlineBan:function(event){this.context.dispatch(q.inlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.context.dispatch(q.undoInlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:false});},_onAction:function(event,db){var eb=db.item,fb=eb.getValue();setTimeout((function(){if(fb===ma.remove){this._onRemove(event);}else if(fb===ma.edit){this.context.dispatch(q.edit(this.props.comment));}else if(fb===ma.hide){this._onHideAsSpam(event);}else p.inform(fb,{comment:this.props.comment,feedback:this.props.feedback});}).bind(this),0);},_createRemoveReportMenuData:function(){return [xa,ya];},_createEditDeleteMenuData:function(){return [{testid:qa,value:ma.edit,label:ja._("Edit...")},{testid:pa,value:ma.remove,label:ja._("Delete...")}];},_renderCloseButton:function(){if(this.props.isStreaming)return null;var db=this.props.comment,eb=null,fb=null,gb=null,hb=false;if(db.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor&&db.canedit){gb=ja._("Edit or Delete");fb=this._createEditDeleteMenuData();hb=true;}else if(this.props.showRemoveReportMenu){gb=ja._("Remove or Report");fb=this._createRemoveReportMenuData();}else if(this.props.feedback.customcommentactionlinks){gb=ja._("Remove");hb=true;fb=[xa];}else{gb=ja._("Remove");eb=this._onRemove;}}else if(this.props.feedback.customcommentactionlinks){gb=ja._("Hide");hb=true;fb=[ya];}else if(db.canreport){gb=ja._("Hide");eb=this._onHideAsSpam;}if(this.props.feedback.customcommentactionlinks)for(var ib in this.props.feedback.customcommentactionlinks){var jb=this.props.feedback.customcommentactionlinks[ib];if(!jb.showInMenu)continue;fb.push({testid:jb.type,value:jb.type,label:jb.title});}var kb="UFICommentCloseButton"+(eb===null&&fb===null?' '+"hdn":''),lb=null,mb=null;if(this.props.contextArgs.viewas){lb='/ajax/profile/link_disabled_in_viewas.php';mb='dialog';eb=null;}var nb=hb?v.MenuType.EDIT:v.MenuType.CLOSE;return (k.createElement(v,{ajaxify:lb,className:kb,'data-testid':na,onClick:eb,rel:mb,tooltip:gb,menuData:fb,menuType:nb,onAction:this._onAction}));},_renderFakeCloseButton:function(){return (k.createElement(ea,{className:'UFICommentCloseButtonFake',tabIndex:'-1'}));},componentDidMount:function(){if(this.state.isHighlighting){var db=l.findDOMNode(this),eb=parseInt(this.props.comment.scrolltopoffset||0,10);i.loadModules(["UFIScrollHighlight"],function(fb){setTimeout(fb.actOn.bind(null,db,eb),0);});this.setState({isHighlighting:false});}},shouldComponentUpdate:function(db,eb){var fb=this.props,gb=this.state;return (db.comment!==fb.comment||db.showReplyLink!==fb.showReplyLink||db.isFirst!==fb.isFirst||db.isLast!==fb.isLast||db.isFirstCommentComponent!==fb.isFirstCommentComponent||db.isLastCommentComponent!==fb.isLastCommentComponent||db.isFirstComponent!==fb.isFirstComponent||db.isLastComponent!==fb.isLastComponent||db.isFeatured!==fb.isFeatured||db.hasPartialBorder!==fb.hasPartialBorder||eb.wasHighlighted!==gb.wasHighlighted||eb.isHighlighting!==gb.isHighlighting||eb.markedAsSpamHere!==gb.markedAsSpamHere||eb.isInlinePageDeleted!==gb.isInlinePageDeleted||eb.isInlineBanned!==gb.isInlineBanned);},render:function(){var db=this.props.comment,eb=this.props.feedback,fb=db.status===la.DELETED,gb=db.status===la.LIVE_DELETED,hb=db.status===la.SPAM_DISPLAY,ib=this.state.markedAsSpamHere,jb=this.state.isInlinePageDeleted,kb=this.props.hideAsSpamForPageAdmin,lb=this.state.isInlineBanned;if(db.islive&&!this.state.loggedLiveUpdate){h.log('LiveWWWFeedbackLoggerConfig',{event:'update_view',update_type:'comment'});this.setState({loggedLiveUpdate:true});}var mb=bb(db),nb=!db.status&&(db.isunseen||db.islocal);if(!db.status&&eb.lastseentime){var ob=db.originalTimestamp||db.timestamp.time;nb=nb||ob>eb.lastseentime;}var pb=this.props.contextArgs.markedcomments;if(pb&&pb[db.legacyid])nb=true;var qb=(this.props.isFirst?"UFIFirstComment":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'');if(mb)if(za){var rb=null,sb=null,tb=null,ub=null;if(kb){tb=lb?this._onUndoInlineBan:this._onInlineBan;if(jb){rb=ja._("You've deleted this comment so no one can see it.");}else if(ib){rb=ja._("Now this is only visible to the person who wrote it and their friends.");ub=this._onDeleteSpam;sb=this._onMarkAsNotSpam;}}else if(ib){rb=ja._("This comment has been hidden.");ub=this._onDeleteSpam;sb=this._onMarkAsNotSpam;}if(rb)return (k.createElement('li',{className:ha(qb,"UFIRow UFIHide")},k.createElement(za,{notice:rb,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:sb,onBanAction:tb,onDeleteAction:ub,isInlineBanned:lb,isInlinePageDeleted:jb,hideAsSpamForPageAdmin:kb,pageID:this.props.feedback.ownerid})));}else i.loadModules(["UFICommentRemovalControls.react"],(function(yb){za=yb;setTimeout((function(){this.forceUpdate();}).bind(this));}).bind(this));var vb=!fb,wb=ha(qb,"UFIRow"+(' '+"UFIComment")+(ab(db)?' '+"UFICommentFailed":'')+(fb||gb||hb?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(!vb?' '+"noDisplay":'')+(vb?' '+"display":'')+(' '+"UFIComponent")+(this.props.hasPartialBorder?' '+"UFIPartialBorder":'')+(nb?' '+"UFIUnseenItem":'')),xb=this.renderComment();if(this.props.shouldLogVPVs&&!db.islocal)xb=k.createElement(x,{comment:db,contextArgs:this.props.contextArgs},xb);return (k.createElement('li',{className:wb,'data-testid':this.state.wasHighlighted?oa:null,'data-ft':this.props['data-ft']},xb));},renderComment:function(){var db=this.props,eb=db.comment,fb=eb.body?eb.body.text:'',gb=w.shallowCopyRanges(eb.body&&eb.body.ranges),hb=db.permalink,ib=db.feedback,jb=db.authorProfiles[eb.author],kb=eb.status===la.SPAM_DISPLAY,lb=eb.status===la.LIVE_DELETED,mb=!(kb||lb),nb=ib.canremoveall||eb.hiddenbyviewer;fb=w.getCommentTextWithTruncatedURIs(gb,fb);var ob=null,pb=null;if(!db.isLocallyComposed&&!this.state.wasHighlighted){pb=z.commentTruncationLength;ob=z.commentTruncationMaxLines;}var qb=m.getTrackingInfo(m.types.SMALL_ACTOR_PHOTO),rb=m.getTrackingInfo(m.types.USER_MESSAGE),sb=null,tb=null,ub=null,vb=null;if(eb.istranslatable&&eb.translatedbody===undefined)sb=k.createElement('a',{href:'#',role:'button',title:ja._("Translate this comment"),className:sa,onClick:(function(event){return this.context.dispatch(q.translate(eb,event));}).bind(this)},ja._("See Translation"));if(eb.translatedbody!==undefined)if(eb.translatedbody!==null&&eb.translatedbody.text!==''){var wb=ba.BING_PAGE_URL,xb=ba.BING_TRANSLATOR_APP,yb=null;if(eb.translatorapp===xb){var zb=new ca(wb).addQueryData({text:fb});yb=k.createElement('a',{href:zb.toString(),target:'_blank',className:wa},ja._("Translated by Bing"));}else yb=ja._("Automatically Translated");vb=k.createElement('span',{className:va},yb);var ac=w.shallowCopyRanges(eb.translatedbody.ranges),bc=eb.translatedbody.text,cc=eb.translatedbody.dir,dc=k.createElement('span',{key:'comment-body','data-ft':rb,dir:cc},k.createElement(n,{className:"UFICommentBody"+(this.props.contextArgs.useWhitespacesRender?' '+"UFICommentBodyPreserveWhitespace":''),interpolator:w.getCommentBodyInterpolator(db.feedback.grouporeventid),ranges:ac,text:bc,renderEmoticons:y.renderEmoticons,renderEmoji:y.renderEmoji}));tb=k.createElement('span',{className:!this.props.contextArgs.ltgTranslationUINew?"UFITranslatedTextLegacy":''},dc);}else ub=k.createElement('span',{className:ua},ja._("No Translation Available"));var ec=k.createElement(u,{socialContext:eb.socialcontext,commentText:fb,commentRanges:gb,groupOrEventID:ib.grouporeventid,useWhitespacesRender:this.props.contextArgs.useWhitespacesRender,maxLength:pb,maxLines:ob}),fc=db.contextArgs.viewas?null:j.constructEndpointWithGroupAndLocation(jb,ib.grouporeventid,da.UFI,eb.isauthorweakreference).toString(),gc=k.createElement(t,{author:jb,authorProfiles:db.authorProfiles,showHovercard:!!fc,isAuthorWeakReference:eb.isauthorweakreference,isAdminViewer:db.feedback.isadminviewer,focusOnMount:db.focusOnMount,groupOrEventID:ib.grouporeventid,isFeatured:db.isFeatured,socialContext:eb.socialcontext}),hc=null;if(eb.photo_comment_status)hc=k.createElement('div',{className:"_50f8"},eb.photo_comment_status);var ic=null;if(eb.sticker_attachment_status)ic=k.createElement('div',{className:"_50f8"},eb.sticker_attachment_status);var jc=null;if(eb.status!==la.DELETED&&!db.isStreaming)jc=k.createElement(s,{comment:db.comment});var kc=k.createElement(o,{actorID:eb.author});if(jb.uri||jb.isBusinessPersona)kc=k.createElement('a',{'data-ft':qb,'data-hovercard':fc,href:jb.uri},kc);return (k.createElement(aa,{spacing:'medium'},kc,k.createElement('div',{className:'UFICommentContentBlock'},k.createElement('div',{className:'UFICommentContent'},gc,ec,sb,k.createElement('div',{className:this.props.contextArgs.ltgTranslationUINew?"UFITranslatedText":''},tb,vb),ub,jc),hc,ic,k.createElement(r,{comment:eb,feedback:ib,onCommentReply:db.onCommentReply,onMarkAsNotSpam:(function(event){return this.context.dispatch(q.markAsNotSpam(eb,event));}).bind(this),permalink:hb,viewerCanMarkNotSpam:nb,shortenTimestamp:db.shortenTimestamp,showPermalink:db.showPermalink,isStreaming:db.isStreaming,showReplyLink:db.showReplyLink,contextArgs:db.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:db.hideAsSpamForPageAdmin}),mb?this._renderCloseButton():null),mb?this._renderFakeCloseButton():null));}});f.exports=cb;},null);
__d('UFICommentHeader.react',['React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'UFICommentHeader',render:function(){return (h.createElement('li',babelHelpers._extends({},this.props,{className:"accessible_elem"}),h.createElement('h6',null,j._("Comments"))));}});f.exports=k;},null);
__d('UFICommentDisabledNotice.react',['React','TextWithEntities.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes;function k(m,n){return (h.createElement('a',{href:n.entity.url,target:'_blank'},m));}var l=h.createClass({displayName:'UFICommentDisabledNotice',propTypes:{feedback:j.object.isRequired},render:function(){var m=this.props.feedback,n=m.commentdisablednotice,o=h.createElement('div',{className:'UFINotice'},h.createElement(i,{interpolator:k,ranges:n.ranges,aggregatedranges:n.aggregated_ranges,text:n.text}));return (h.createElement('li',{className:'UFIRow'},o));}});f.exports=l;},null);
__d('UFIContainer.react',['React','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createElement('li',{className:'UFIArrow'},h.createElement('i',null)),l=h.createClass({displayName:'UFIContainer',propTypes:{hasNub:j.bool,isParentLiveDeleted:j.bool,isReplyList:j.bool},render:function(){var m=(!this.props.isReplyList?"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''),n=h.createElement('ul',{className:m},this.props.hasNub?k:null,this.props.children);if(this.props.isReplyList)return h.createElement('li',null,n);return n;}});f.exports=l;},null);
__d('UFIInlineShareConfirmation.react',['React','UFIImageBlock.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=[l.object,l.string],n=h.createClass({displayName:'UFIInlineShareConfirmation',propTypes:{isError:l.bool.isRequired,isFirstComponent:l.bool,isLastComponent:l.bool,message:l.oneOfType(m).isRequired},render:function(){var o=k("UFIRow"+(' '+"UFIInlineShareConfirmation")+(this.props.isError?' '+"UFIInlineShareError":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''));return (h.createElement('li',{className:o},h.createElement(i,null,h.createElement('i',{className:'UFIConfirmationIcon'}),this._getText())));},_getText:function(){if(this.props.message.__html)return h.createElement('span',{dangerouslySetInnerHTML:this.props.message});return h.createElement('span',null,this.props.message);}});f.exports=n;},null);
__d("XUFIReactionProfileBrowserController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/browser\/",{ft_ent_identifier:{type:"String",required:true}});},null,{});
__d("XUFIReactionProfileDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/dialog\/",{reaction_type:{type:"Enum",enumType:0},ft_ent_identifier:{type:"String",required:true},__asyncDialog:{type:"Int"}});},null,{});
__d('UFILikeSentenceText.react',['ActorURI','HovercardLinkInterpolator','ProfileBrowserLink','ProfileBrowserTypes','React','TextWithEntities.react','URI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=l.PropTypes;function r(t,u,v,w){if(w.count!=null){var x=k.LIKES,y={id:t.targetfbid,actorid:t.actorid},z=[],aa;for(var ba=0;ba<u.length;ba++)if(!u[ba].count){aa=u[ba];var ca=aa.entity;z.push(ca.id);}var da=new n('/ajax/like/tooltip.php').setQueryData({comment_fbid:t.targetfbid,comment_from:t.actorforpost,seen_user_fbids:z.length?z:true});da=h.create(da,t.actorforpost);var ea,fa;if(t.displayreactions){ea=p.getURIBuilder().setString('ft_ent_identifier',t.entidentifier).getURI();ea=h.create(ea,t.actorforpost);fa=o.getURIBuilder().setString('ft_ent_identifier',t.entidentifier).getURI();fa=h.create(fa,t.actorforpost);}else{ea=j.constructDialogURI(x,y).toString();fa=j.constructPageURI(x,y).toString();}return (l.createElement('a',{'data-testid':'n_other_people_link',className:'UFINoWrap',rel:'dialog',ajaxify:ea,href:fa,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':da.toString(),role:'button'},v));}else{var ga={source_feedback_owner_id:t.ownerid,source_feedback_identifier:t.entidentifier};return i(v,w,null,null,'ufi',ga);}}var s=l.createClass({displayName:'UFILikeSentenceText',propTypes:{contextArgs:q.object.isRequired,feedback:q.object.isRequired,likeSentenceData:q.object.isRequired},render:function(){var t=this.props.feedback,u=this.props.likeSentenceData,v,w=u.aggregatedranges||u.aggregated_ranges;v=r;v=v.bind(null,t,u.ranges);return (l.createElement(m,{interpolator:v,ranges:u.ranges,aggregatedRanges:w,text:u.text}));}});f.exports=s;},null);
__d('UFILikeSentence.react',['Bootloader','LeftRight.react','ProfileBrowserLink','ProfileBrowserTypes','React','UFIImageBlock.react','UFILikeSentenceText.react','UFIStoryAction','URI','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=l.PropTypes,u=l.createClass({displayName:'UFILikeSentence',propTypes:{contextArgs:t.object.isRequired,feedback:t.object.isRequired,isFirstComponent:t.bool,isLastComponent:t.bool,onOrderingModeChange:t.func,showOrderingModeSelector:t.bool},contextTypes:{dispatch:t.func},getInitialState:function(){return {selectorModule:null,bootloadedSelectorModule:false};},componentWillMount:function(){this._bootloadSelectorModule(this.props);},componentWillReceiveProps:function(v){this._bootloadSelectorModule(v);},_bootloadSelectorModule:function(v){if(v.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){var w=(function(x){this.setState({selectorModule:x});}).bind(this);if(v.contextArgs.entstream){h.loadModules(["UFIEntStreamOrderingModeSelector.react"],w);}else h.loadModules(["UFIOrderingModeSelector.react"],w);this.setState({bootloadedSelectorModule:true});}},render:function(){var v=this.props.feedback,w=v.likesentences.current||{},x=this.props.contextArgs.entstream,y=r("UFIRow"+(v.likesentences.isunseen?' '+"UFIUnseenItem":'')+(' '+"UFILikeSentence")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),z=null,aa=null;if(w.text)aa=l.createElement('div',{className:"UFILikeSentenceText"},l.createElement(n,{contextArgs:this.props.contextArgs,feedback:v,likeSentenceData:w}));var ba=this.props.contextArgs.ufiexperiments||{};if(aa&&!x&&!ba.showSlimUFI){z=l.createElement('i',{className:'UFILikeIcon'});if(v.viewercanlike&&!v.hasviewerliked)z=l.createElement('a',{className:'UFILikeThumb',href:'#',tabIndex:'-1',title:s._("Like this"),onClick:(function(event){this.context.dispatch(o.toggleLike(event.target));event.preventDefault();}).bind(this),role:'button','aria-label':s._("Like this")},z);}var ca=aa,da=null;if(v.seencount>0&&!x){var ea=k.GROUP_MESSAGE_VIEWERS,fa={id:v.targetfbid},ga=j.constructDialogURI(ea,fa),ha=j.constructPageURI(ea,fa),ia=new p('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:v.entidentifier,displayed_count:v.seencount}),ja;if(v.seenbyall){ja=s._("Seen by everyone");}else ja=v.seencount==1?s._("Seen by 1"):s._("Seen by {count}",[s.param('count',v.seencount)]);da=l.createElement('a',{rel:'dialog',ajaxify:ga.toString(),href:ha.toString(),'data-hover':'tooltip','data-tooltip-alignh':'left','data-tooltip-uri':ia.toString(),className:"UFISeenCount"+(!!w.text?' '+"UFISeenCountRight":'')},l.createElement('span',{className:'UFISeenCountIcon'}),ja);}else if(this.props.showOrderingModeSelector&&this.state.selectorModule){var ka=this.state.selectorModule;da=l.createElement(ka,{entstream:x,feedback:v,onOrderChanged:(function(ma){return this.context.dispatch(o.changeOrderingMode(ma));}).bind(this)});if(!ca)ca=l.createElement('div',null);}var la=null;if(z&&aa){la=l.createElement(m,null,z,aa,da);}else if(ca){la=l.createElement(i,{direction:i.DIRECTION.right},ca,da);}else la=da;return (l.createElement('li',{className:y},la));}});f.exports=u;},null);
__d('UFIPager.react',['LeftRight.react','React','UFIImageBlock.react','XUISpinner.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'UFIPager',propTypes:{contextArgs:n.object.isRequired,pagerLabel:n.string.isRequired,'data-ft':n.string,countSentence:n.string,isFirstCommentComponent:n.bool,isFirstComponent:n.bool,isLastCommentComponent:n.bool,isLastComponent:n.bool,isLoading:n.bool,isReply:n.bool,isUnseen:n.bool,onPagerClick:n.func},onPagerClick:function(p){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();p.nativeEvent.prevent();},render:function(){var p=this.onPagerClick,q=m("UFIRow"+(this.props.isUnseen?' '+"UFIUnseenItem":'')+(' '+"UFIPagerRow")+(' '+"UFIComponent")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),r=null;if(this.props.isLoading)r=i.createElement(k,{className:'mls',background:'light',size:'small'});var s=i.createElement('a',{className:'UFIPagerLink',onClick:p,href:'#',role:'button'},this.props.pagerLabel,r),t="fcg"+(' '+"UFIPagerCount"),u=i.createElement('span',{className:t},this.props.countSentence),v,w=this.props.contextArgs.ufiexperiments||{};if(this.props.contextArgs.entstream||w.showSlimUFI&&!this.props.isReply){v=i.createElement(h,{direction:h.DIRECTION.right},s,u);}else v=i.createElement(j,null,i.createElement('a',{className:'UFIPagerIcon',onClick:p,href:'#',role:'button'}),s,u);return (i.createElement('li',{className:q,'data-ft':this.props['data-ft']},v));}});f.exports=o;},null);
__d('UFIPagerLabel',['fbt','intlList','NumberFormat'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',_getReplyLabel:function(l,m){var n;switch(l){case k.VIEW_ONE:return h._("View 1 reply");case k.VIEW_ONE_MORE:return h._("View 1 more reply");case k.VIEW_ALL:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View all {count} replies"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE_EXPLICIT:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View {count} more replies"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE:return h._("View more replies");case k.VIEW_PREVIOUS:return h._("View previous replies");default:return null;}},_getCommentLabel:function(l,m){if(m.commenters)return this._getCommentLabelWithCommentSentence(l,m);var n;switch(l){case k.VIEW_ONE:return h._("View 1 comment");case k.VIEW_ONE_MORE:return h._("View 1 more comment");case k.VIEW_ALL:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View all {count} comments"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE_EXPLICIT:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View {count} more comments"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE:return h._("View more comments");case k.VIEW_PREVIOUS:return h._("View previous comments");default:return null;}},_getCommentLabelWithCommentSentence:function(l,m){var n=i(m.commenters),o=m.othersCount,p=j.formatIntegerWithDelimiter(o,m.delimiter),q=j.formatIntegerWithDelimiter(m.count,m.delimiter);switch(l){case k.VIEW_ONE:return h._("View 1 comment from {names}",[h.param('names',n)]);case k.VIEW_ONE_MORE:return h._("View 1 more comment from {names}",[h.param('names',n)]);case k.VIEW_ALL:switch(o){case 0:return h._({"*":"View all {count} comments from {names}"},[h.param('count',q,[0,m.count]),h.param('names',n)]);case 1:return h._({"*":"View all {count} comments from {names} and 1 other person"},[h.param('count',q,[0,m.count]),h.param('names',n)]);default:return h._({"*":{"*":"View all {count} comments from {names} and {othersCount} others"}},[h.param('count',q,[0,m.count]),h.param('names',n),h.param('othersCount',p,[0,o])]);}break;case k.VIEW_MORE_EXPLICIT:case k.VIEW_MORE:switch(o){case 0:return h._("View more comments from {names}",[h.param('names',n)]);case 1:return h._("View more comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View more comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}break;case k.VIEW_PREVIOUS:switch(o){case 0:return h._("View previous comments from {names}",[h.param('names',n)]);case 1:return h._("View previous comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View previous comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}break;default:return null;}},_getQuestionLabel:function(l,m){var n;switch(l){case k.VIEW_ONE:return h._("View 1 question");case k.VIEW_ONE_MORE:return h._("View 1 more question");case k.VIEW_ALL:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View all {count} questions"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE_EXPLICIT:n=j.formatIntegerWithDelimiter(m.count,m.delimiter);return h._({"*":"View {count} more questions"},[h.param('count',n,[0,m.count])]);case k.VIEW_MORE:return h._("View more questions");case k.VIEW_PREVIOUS:return h._("View previous questions");default:return null;}},getLabel:function(l,m,n,o){if(m){return k._getReplyLabel(l,o);}else if(n){return k._getQuestionLabel(l,o);}else return k._getCommentLabel(l,o);}};f.exports=k;},null);
__d('UFIReplySocialSentence.react',['Badge.react','LiveTimer','React','Timestamp.react','UFIConstants','UFIImageBlock.react','UFIMiddot.react','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=j.PropTypes,s=43200,t=j.createClass({displayName:'UFIReplySocialSentence',propTypes:{author:r.object,'data-ft':r.string,isExpanded:r.bool,isFirstComponent:r.bool,isLastComponent:r.bool,isLoading:r.bool,onClick:r.func,orderingMode:r.string,replies:r.number,shortenTimestamp:r.bool,showVerified:r.bool,timestamp:r.object},render:function(){var u=this.props.isLoading?"UFIReplySocialSentenceLoading":'',v=p("UFIRow"+(' '+"UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),w,x;if(this.props.isExpanded){w=this.props.replies>1?q._({"*":"Hide {count} Replies"},[q.param('count',this.props.replies,[0])]):q._("Hide 1 Reply");}else{w=this.props.replies>1?q._({"*":"{count} Replies"},[q.param('count',this.props.replies,[0])]):q._("1 Reply");if(this.props.timestamp){var y=i.getApproximateServerTime()/1000-this.props.timestamp.time;if(y<s||this.props.orderingMode==l.UFICommentOrderingMode.RECENT_ACTIVITY)x=j.createElement('span',{className:"fcg"},j.createElement(n,{key:'middot-timestamp'}),j.createElement(k,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var z=this.props.author,aa=z&&!this.props.isExpanded,ba=null,ca;if(aa){ba=j.createElement('img',{alt:'',src:z.thumbSrc,className:"img UFIActorImage _54ru"});var da=null;if(this.props.showVerified)da=j.createElement(h,{size:'xsmall',type:'verified'});ca=[q._("{author}{verified_badge} replied",[q.param('author',z.name),q.param('verified_badge',da)]),j.createElement(n,{key:'middot-author'}),w];}else ca=w;var ea=null,fa=false;if(!aa||this.props.contextArgs.feedcarded){if(aa)fa=true;ea=j.createElement('i',{className:(!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(fa?' '+"UFIFeedCardedIconWithActor":'')});}return (j.createElement('li',{className:v,'data-ft':this.props['data-ft']},j.createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},j.createElement(m,null,j.createElement('div',{className:(aa?"UFIReplyActorPhotoWrapper":'')+(fa?' '+"UFIFeedCardedReplyActor":'')},ea,ba),j.createElement('span',{className:u},j.createElement('span',{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":'')},ca),x)))));}});f.exports=t;},null);
__d('UFISeenTracker.react',['BanzaiODS','OnVisible.react','React','throttle'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'UFISeenTracker',getInitialState:function(){return {seen:false};},render:function(){return this.state.seen?this.props.children:j.createElement(i,{onVisible:k(this.logSeen,100)},this.props.children);},logSeen:function(){this.setState({seen:true});h.bumpEntityKey('unsampled_feedback','rendered_ufi_client');}});f.exports=l;},null);
__d('UFIShareRow.react',['NumberFormat','React','UFIImageBlock.react','URI','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=i.PropTypes,p=i.createClass({displayName:'UFIShareRow',propTypes:{contextArgs:o.object.isRequired,feedback:o.object.isRequired,isFirstComponent:o.bool,isLastComponent:o.bool},render:function(){var q=new k('/ajax/shares/view').setQueryData({target_fbid:this.props.feedback.targetfbid}),r=new k('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedback.targetfbid}),s;if(this.props.feedback.sharecount>1){var t=h.formatIntegerWithDelimiter(this.props.feedback.sharecount,this.props.contextArgs.numberdelimiter||',');s=n._({"*":"{count} shares"},[n.param('count',t,[0,this.props.feedback.sharecount])]);}else s=n._("1 share");var u=m("UFIRow"+(' '+"UFIShareRow")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')),v=i.createElement('a',{className:'UFIShareLink',rel:'dialog',ajaxify:q.toString(),href:r.toString()},s),w=i.createElement(j,null,i.createElement('a',{className:'UFIShareIcon',rel:'dialog',ajaxify:q.toString(),href:r.toString()}),v),x=this.props.contextArgs.ufiexperiments||{};return (i.createElement('li',{className:u},x.showSlimUFI?v:w));}});f.exports=p;},null);
__d('UFISpamPlaceholder.react',['React','XUISpinner.react','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'UFISpamPlaceholder',propTypes:{numHidden:k.number.isRequired,isLoading:k.bool,onClick:k.func},render:function(){if(this.props.isLoading)return (h.createElement('li',{className:'UFIRow'},h.createElement('span',{className:'UFISpamCommentWrapper'},h.createElement(i,{className:'mls',background:'light',size:'small'}))));return (h.createElement('li',{className:'UFIRow'},h.createElement('a',{href:'#',role:'button',className:'UFISpamCommentLink',onClick:this.props.onClick,'aria-label':j._("Show comments marked as spam")},h.createElement('span',{'data-hover':'tooltip','data-tooltip-alignh':'center','aria-label':j._({"*":"{count} hidden"},[j.param('count',this.props.numHidden,[0])]),className:'UFISpamCommentWrapper'},h.createElement('i',{className:'placeholderIcon'})))));}});f.exports=l;},null);
__d('BinarySearch',['invariant','keyMirror'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=i({LEAST_UPPER_BOUND:null,GREATEST_LOWER_BOUND:null,LEAST_STRICT_UPPER_BOUND:null,GREATEST_STRICT_LOWER_BOUND:null}),k=function(m,n){!(typeof m==='number'&&typeof n==='number')?h(0):undefined;return m-n;},l=babelHelpers._extends({},j,{find:function(m,n,o,p,q){q=q||k;var r=l.LEAST_UPPER_BOUND,s=l.findBound(m,n,o,p,q,r);if(o<=s&&s<p){var t=m(s);return q(t,n)===0?t:undefined;}else return undefined;},findIndex:function(m,n,o,p,q){q=q||k;var r=l.LEAST_UPPER_BOUND,s=l.findBound(m,n,o,p,q,r);if(o<=s&&s<p){return q(m(s),n)===0?s:-1;}else return -1;},findBound:function(m,n,o,p,q,r){switch(r){case l.LEAST_UPPER_BOUND:return l.leastUpperBound(m,n,o,p,q);case l.GREATEST_LOWER_BOUND:return l.greatestLowerBound(m,n,o,p,q);case l.LEAST_STRICT_UPPER_BOUND:return l.leastStrictUpperBound(m,n,o,p,q);case l.GREATEST_STRICT_LOWER_BOUND:return l.greatestStrictLowerBound(m,n,o,p,q);default:h(0);}},leastUpperBound:function(m,n,o,p,q){while(o+1<p){var r=o+Math.floor((p-o)/2);if(q(n,m(r))<=0){p=r;}else o=r;}return o<p&&q(n,m(o))<=0?o:p;},greatestLowerBound:function(m,n,o,p,q){return l.leastStrictUpperBound(m,n,o,p,q)-1;},leastStrictUpperBound:function(m,n,o,p,q){while(o+1<p){var r=o+Math.floor((p-o)/2);if(q(n,m(r))<0){p=r;}else o=r;}return o<p&&q(n,m(o))<0?o:p;},greatestStrictLowerBound:function(m,n,o,p,q){return l.leastUpperBound(m,n,o,p,q)-1;},findInArray:function(m,n,o){return l.find(function(p){return m[p];},n,0,m.length,o);},findIndexInArray:function(m,n,o){return l.findIndex(function(p){return m[p];},n,0,m.length,o);},findBoundInArray:function(m,n,o,p){return l.findBound(function(q){return m[q];},n,0,m.length,o,p);}});f.exports=l;},null);
__d("EnvironmentTimezoneDecisionTree",[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports={instant:1087737300,"0":{instant:2019715200,"0":{instant:1309636800,"0":{timezone:59},"3600":{timezone:86}},"-3600":{timezone:109}},"10800":{instant:1206834162,"7200":{instant:1099178844,"7200":{instant:1309636800,"7200":{timezone:53},"10800":{timezone:134}},"10800":{instant:1783022400,"10800":{timezone:19},"7200":{timezone:115}}},"10800":{instant:2019715200,"10800":{timezone:20},"7200":{instant:1191290400,"10800":{instant:1354016700,"10800":{timezone:76},"7200":{timezone:81}},"7200":{instant:1220877000,"7200":{timezone:108},"10800":{timezone:70}}}}},"7200":{instant:2019715200,"7200":{timezone:141},"3600":{timezone:12}},"3600":{instant:2019715200,"3600":{instant:1191290400,"3600":{timezone:96},"7200":{timezone:133}},"0":{timezone:54}},"-28800":{timezone:4},"-10800":{instant:2019715200,"-10800":{instant:1205042796,"-7200":{instant:1235670300,"-7200":{timezone:10},"-10800":{timezone:11}},"-10800":{timezone:24}},"-14400":{timezone:37},"-7200":{instant:1161703800,"-7200":{timezone:138},"-10800":{timezone:25}}},"-14400":{instant:2019715200,"-10800":{instant:1398396600,"-10800":{instant:1309636800,"-10800":{timezone:9},"-14400":{timezone:41}},"-14400":{instant:1161703800,"-10800":{timezone:111},"-14400":{timezone:23}}},"-14400":{timezone:21},"-16200":{timezone:139},"-18000":{timezone:7}},"-18000":{instant:2019715200,"-18000":{timezone:33},"-21600":{instant:1206834162,"-18000":{timezone:6},"-21600":{timezone:94}}},"-21600":{instant:2019715200,"-21600":{instant:1154307150,"-21600":{timezone:32},"-18000":{instant:1117323900,"-21600":{instant:1146910500,"-18000":{timezone:61},"-21600":{timezone:63}},"-18000":{timezone:97}}},"-25200":{instant:1206834162,"-21600":{timezone:2},"-25200":{timezone:93}},"-18000":{timezone:40}},"-25200":{instant:2019715200,"-28800":{instant:1206834162,"-25200":{timezone:1},"-28800":{timezone:91}},"-25200":{timezone:5}},"-7200":{timezone:22},"-9000":{timezone:38},"14400":{instant:1235670300,"10800":{instant:1309636800,"10800":{timezone:72},"14400":{timezone:116}},"14400":{timezone:8},"18000":{timezone:89}},"25200":{instant:2019715200,"25200":{timezone:66},"21600":{timezone:119}},"21600":{instant:2019715200,"19800":{timezone:82},"21600":{timezone:17},"18000":{timezone:118}},"28800":{instant:1205042796,"28800":{timezone:42},"25200":{timezone:120},"32400":{timezone:13}},"32400":{instant:2019715200,"28800":{timezone:121},"32400":{timezone:68}},"46800":{timezone:125},"18000":{instant:2019715200,"18000":{instant:1220877000,"21600":{timezone:105},"18000":{timezone:90}},"14400":{timezone:117}},"19800":{timezone:71},"43200":{instant:2019715200,"36000":{timezone:124},"46800":{timezone:100}},"39600":{timezone:123},"36000":{instant:2019715200,"32400":{timezone:122},"39600":{timezone:15}},"34200":{timezone:14},"-36000":{timezone:3}};},null);
__d('Timezone',['BinarySearch','DateConsts','EnvironmentTimezoneDecisionTree','areEqual','invariant','memoize'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,o={},p={UTC:0,PST8PDT:1,setupTimezone:function(r,s){if(!o.hasOwnProperty(r))o[r]=s;},setupTimezoneWithPHPTransitions:function(r,s){var t=s.map(function(u){return ({start:u.ts,offset:u.offset});});t.push({start:n,offset:t[t.length-1].offset});p.setupTimezone(r,t);},getTransitions:function(r){var s=o[r];if(s==null&&r==p.getEnvironmentTimezoneID())return p.getEnvironmentTimezoneTransitions();!s?l(0):undefined;return s;},getTransitionsOrNull:function(r){return o[r]||null;},getDefaultEnvironmentOptions:function(){return {start:new Date('2004-01-01').valueOf()/i.MS_PER_SEC,end:new Date('2034-01-01').valueOf()/i.MS_PER_SEC,step:30*i.SEC_PER_DAY};},getEnvironmentTimezoneTransitions:m(function(){return (p.detectEnvironmentTimezoneTransitions(p.getDefaultEnvironmentOptions()));}),detectEnvironmentTimezoneTransitions:function(r){var s=[],t=function(z){return (-i.SEC_PER_MIN*new Date(i.MS_PER_SEC*z).getTimezoneOffset());},u=t(r.start),v;s.push({start:r.start,offset:u});for(var w=r.start;w+r.step<r.end;w+=r.step){var x=w+r.step;v=t(x);if(u!==v){var y=h.leastUpperBound(function(z){return t(z)!==u;},1,w,x,function(z,aa){return z-aa;});s.push({start:y,offset:t(y)});}u=v;}if(s[s.length-1].start!==r.end)s.push({start:r.end,offset:t(r.end)});!(2<=s.length)?l(0):undefined;return s;},getEnvironmentTimezoneID:m(function(){return p.detectEnvironmentTimezoneID();}),detectEnvironmentTimezoneID:function(){var r=function(s){if(s.timezone)return s.timezone;var t=new Date(s.instant*1000),u=""+t.getTimezoneOffset()*-60;if(!s[u])return null;return r(s[u]);};return r(j);}},q=[{start:0,offset:0},{start:n,offset:0}];p.setupTimezone(p.UTC,q);f.exports=p;},null);
__d('parseISODate',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){var j=/^([\d-]+)(?:T([\d:.]+))?(.*)/,k=j.exec(i),l=k[0],m=k[1],n=k[2],o=k[3],p=m.split('-'),q=+p[0],r=+p[1],s=+p[2],t=n?n.split(':'):[],u=+t[0]||0,v=+t[1]||0,w=+t[2]||0,x;if(!o||o==='Z'){x=0;}else{var y=/^([+-])(\d\d):?(\d\d)?$/.exec(o),z=y[0],aa=y[1],ba=y[2],ca=y[3];x=(aa==='+'?1:-1)*(3600*+ba+60*+ca);}return new Date(Date.UTC(q,r-1,s,u,v,w)-1000*x);}f.exports=h;},null);
__d('Instant',['BinarySearch','DateConsts','Timezone','formatDate','invariant','parseISODate'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,o={MAX_VALUE:n,MIN_VALUE:0,now:function(){return Math.floor(Date.now()/i.MS_PER_SEC);},getOffset:function(p,q){var r=o.getControllingTransition(p,q);return r.offset;},getControllingTransition:function(p,q){var r=j.getTransitions(q),s=h.greatestLowerBound(function(t){return r[t].start;},p,0,r.length,function(t,u){return t-u;});!(0<=s)?l(0):undefined;!(p<r[r.length-1].start)?l(0):undefined;return r[s];},getParallel:function(p,q){var r=o.getControllingTransitionsOfParallel(p,q),s=r.transition,t=r.gapTransition,u=r.overlapTransitions;if(t){return t.start;}else if(u){return p-u[0].offset;}else return p-s.offset;},getControllingTransitionsOfParallel:function(p,q){var r=j.getTransitions(q),s=h.leastUpperBound(function(v){var w=p-r[v].offset;if(w<r[v].start){return 1;}else if(r[v].start<=w&&w<r[v+1].start){return 0;}else return -1;},0,0,r.length-1,function(v,w){return v-w;});!(s<r.length-1)?l(0):undefined;var t=r[s],u=r[s+1];!(0<=s||t.start<=p-t.offset)?l(0):undefined;if(p-t.offset<t.start){return {gapTransition:t};}else if(u.start<=p-u.offset){return {overlapTransitions:[t,u]};}else return {transition:t};},toISOString:function(p){return o.format(p,'Y-m-dTH:i:sZ',{skipPatternLocalization:true});},fromISOString:function(p){return Math.floor(m(p).getTime()/i.MS_PER_SEC);},format:function(p,q,r){r=babelHelpers._extends({},r||{},{utc:true});return k(p,q,r);}};f.exports=o;},null);
__d('CommentsTimeSpentTracker.react',['Banzai','BanzaiLogger','Instant','OnVisible.react','React','SubscriptionsHandler','pageID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=l.PropTypes,p=l.createClass({displayName:'CommentsTimeSpentTracker',propTypes:{orderingMode:o.string.isRequired,targetFBID:o.string.isRequired,viewerHasInteracted:o.bool.isRequired},getInitialState:function(){return {firstVisibleTime:0};},render:function(){return (l.createElement(k,{onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children));},startInterval:function(){this.setState({firstVisibleTime:j.now()});},finishInterval:function(){if(this.state.firstVisibleTime&&this.isMounted()){var q=j.now();if(q>this.state.firstVisibleTime)i.log('CommentsTimeSpentLoggerConfig',{viewer_has_interacted:this.props.viewerHasInteracted,ordering_mode:this.props.orderingMode,post_fbid:this.props.targetFBID,start_time:this.state.firstVisibleTime,end_time:q,time_spent_id:n});}this.setState({firstVisibleTime:0});},componentWillReceiveProps:function(){this.finishInterval();},componentDidMount:function(){var q=new m();this.setState({listeners:q});q.addSubscriptions(h.subscribe(h.SHUTDOWN,this.finishInterval));},componentWillUnmount:function(){this.finishInterval();this.state.listeners.release();},shouldComponentUpdate:function(q,r){return r.firstVisibleTime===r.firstVisibleTime;}});f.exports=p;},null);
__d('StaticUFI.react',['Arbiter','BootloadedComponent.react','Bootloader','CommentPrelude','DOM','DOMScroll','Event','JSResource','LogHistory','MentionsInputUtils','NumberFormat','Parent','React','ReactDOM','ReactFragment','ScrollableArea.react','SearchableEntry','ShareNowConstants','TrackingNodes','UFIAddComment.react','UFIAddCommentLink.react','UFIComment.react','UFICommentOrdering','UFICommentHeader.react','UFICommentDisabledNotice.react','UFIConstants','UFIContainer.react','UFIFeedbackTargets','UFIInlineShareConfirmation.react','UFIInstanceState','UFILikeSentence.react','UFIPager.react','UFIPagerLabel','UFIReplySocialSentence.react','UFISeenTracker.react','UFIShareRow.react','UFISpamPlaceholder.react','UFIStoryAction','UFIUIEvents','CommentsTimeSpentTracker.react','URI','XUISpinner.react','cx','getUnboundedScrollPosition','isEmpty','focusWithinLayer','throttle','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb){'use strict';if(c.__markCompiled)c.__markCompiled();var db=t.PropTypes,eb=ga.UFIPaging,fb=t.createElement('li',{className:"UFICommentsLoadingSpinnerContainer UFIFirstCommentComponent UFIRow"},t.createElement(wa,{size:'large'})),gb=t.createClass({displayName:'StaticUFI',contextTypes:{dispatch:db.func},getInitialState:function(){return {loadingSpamIDs:{},hasPagedToplevel:false,repliesMap:{}};},getDefaultProps:function(){return {commentIDToFocusOnMount:null,focusReply:null,inlineShare:{},isActiveLoading:{},repliesExpandedMap:{},viewerHasInteracted:false};},componentDidMount:function(){if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var hb=bb(this.loadMoreComments,20);this._scrollEventListener=n.listen(window,'scroll',hb);this._resizeEventListener=n.listen(window,'resize',hb);}this._resolveFocus();},componentWillUnmount:function(){if(this._scrollEventListener)this._scrollEventListener.remove();if(this._resizeEventListener)this._resizeEventListener.remove();},componentDidUpdate:function(hb,ib){this._resolveFocus(hb);},_resolveFocus:function(hb){if(this.props.inlineShare.toggling){var ib=hb&&hb.inlineShare||{};k.expand(u.findDOMNode(this),false,'ufi.react');if(!ib.active&&!this.props.inlineShare.active)this.onComment();var jb=this.props.inlineShare.active;if(jb){var kb=!ib.loaded;setTimeout((function(){return this._focusInlineShare({shouldHighlight:kb});}).bind(this),10);}ka.updateStateField(this.props.instanceid,'inlineShare','toggling',false);}if(this.props.focusReply){var lb=this.props.focusReply,mb=lb.replyID,nb=lb.replyEntry;if(mb in this.refs){this.refs[mb].focus();if(nb)this.refs[mb].insertMention(nb);}}},_isAds:function(){return this.props.source===ga.UFIFeedbackSourceType.ADS;},_showLikeSentenceOrderingModeSelector:function(){var hb=this.props,ib=hb.hideOrderingModeSelector,jb=hb.feedback,kb=hb.commentCounts,lb=hb.id;return (!ib&&jb.orderingmodes&&kb[lb]>=ga.minCommentsForOrderingModeSelector);},_hasLikeSentenceRow:function(){var hb=this.props,ib=hb.contextArgs,jb=hb.feedback;if(this._isAds()||ib.search)return false;if(jb.displayreactions&&ib.hasReactions)return false;return (!za(jb.likesentences.current)||jb.seencount>0&&!ib.entstream||this._showLikeSentenceOrderingModeSelector());},_hasShares:function(){var hb=this.props,ib=hb.contextArgs,jb=hb.feedback;if(this._isAds())return false;return (ib.showshares&&jb.sharecount&&(!ib.hasReactions||!jb.displayreactions));},_hasShareRow:function(){return (this._hasShares()&&!this.props.contextArgs.entstream);},_hasComments:function(){if(this._isAds())return false;var hb=this.props.availableComments;return !!(hb&&hb.length);},_hasAddCommentView:function(){var hb=this.props,ib=hb.canAddCommentMap,jb=hb.contextArgs,kb=hb.feedback,lb=hb.id;return (kb.cancomment&&jb.showaddcomment&&kb.actorforpost&&ib[lb]);},_hasAddCommentLink:function(){return (this._hasAddCommentView()&&this._hasCommentOrderInverted()&&this.state.hasPagedToplevel);},_hasAddCommentDisabledNotice:function(){var hb=this.props.feedback;return hb.arecommentsdisabled===true&&hb.cancomment===false;},render:function(){var hb=this.props,ib=hb.feedback,jb=hb.contextArgs,kb=this._hasLikeSentenceRow(),lb=this._hasAddCommentDisabledNotice(),mb=this._hasShares(),nb=this._hasShareRow(),ob=hb.inlineShare.message?t.createElement(ja,this.props.inlineShare):null,pb=kb?t.createElement(la,{contextArgs:hb.contextArgs,feedback:hb.feedback,showOrderingModeSelector:this._showLikeSentenceOrderingModeSelector()}):null,qb=lb?t.createElement(fa,{feedback:hb.feedback}):null,rb=nb?t.createElement(qa,{contextArgs:jb,feedback:ib}):null;if(hb.loadingComments)return (t.createElement(ha,{hasNub:false},ob,pb,rb,fb));var sb=this._hasComments(),tb=sb?this.renderCommentMap(hb.availableComments,hb.ranges[hb.id].getOffset()):null;jb.hasComments=sb;var ub=null,vb=ib.cancomment,wb=kb||mb||sb||vb,xb=wb?t.createElement(ea,null):null;if(this._hasAddCommentView()){jb.orderingmodes=ib.orderingmodes;var yb=ka.getKeyForInstance(jb.instanceid,'isediting');ia.getFeedbackTarget(hb.id,function(oc){jb.feedbackisranked=oc.isranked;});ub=t.createElement(aa,{viewerActorID:ib.actorforpost,hide:yb,replyCommentID:null,replyCommentParentID:null,targetID:ib.ownerid,initialData:null,ref:'toplevelcomposer',withoutSeparator:null,editingComment:{},isEditing:false,mentionsDataSource:ib.mentionsdatasource,showSendOnEnterTip:ib.showsendonentertip,allowPhotoAttachments:ib.allowphotoattachments&&!jb.isstreaming,allowStickerAttachments:ib.allowstickerattachments&&!jb.isstreaming,source:jb.source,contextArgs:jb,subtitle:ib.subtitle,isQAndA:ib.isqanda,isSnowlift:jb.issnowlift,feedbackIsRanked:jb.feedbackisranked});}var zb=hb.hideToplevelPager?{topPager:null,bottomPager:null}:this.renderPagers(hb.id,hb.ranges[hb.id].getOffset(),hb.ranges[hb.id].getLength()),ac,bc,cc=this.applyToUFIComponents([zb.topPager],tb,[zb.bottomPager],{isFirstCommentComponent:true},{isLastCommentComponent:true});ac=cc[0];tb=cc[1];bc=cc[2];var dc=ac,ec=dc[0],fc=bc,gc=fc[0];zb={topPager:ec,bottomPager:gc};var hc=this._hasCommentOrderInverted()?ub:null,ic=this._hasCommentOrderInverted()?null:ub,jc=this._hasAddCommentLink()?t.createElement(ba,{onClick:this.onComment,isQAndA:ib.isqanda}):null,kc=this.applyToUFIComponents([ob,pb,rb,hc,zb.topPager],tb,[zb.bottomPager,ic,jc],{isFirstComponent:true},{isLastComponent:true});ac=kc[0];tb=kc[1];bc=kc[2];var lc=ac;ob=lc[0];pb=lc[1];rb=lc[2];hc=lc[3];ec=lc[4];var mc=bc;gc=mc[0];ic=mc[1];jc=mc[2];zb={topPager:ec,bottomPager:gc};var nc=[zb.topPager,tb&&v.create(tb),zb.bottomPager];if(jb.scrollcomments&&jb.scrollwidth)nc=t.createElement('li',null,t.createElement(w,{width:jb.scrollwidth},t.createElement('ul',null,nc)));if(sb&&jb.logCommentsTimespent)nc=t.createElement(ua,{orderingMode:this.props.orderingMode,viewerHasInteracted:this.props.viewerHasInteracted,targetFBID:ib.commentstargetfbid},t.createElement('li',null,t.createElement('ul',null,nc)));if(jb.logWhetherUFISeen)nc=t.createElement(pa,null,t.createElement('li',null,t.createElement('ul',null,nc)));if(this.props.inlineShare.active){return (t.createElement(ha,{hasNub:false},t.createElement(i,babelHelpers._extends({bootloadPlaceholder:t.createElement('span',null),bootloadLoader:o('ShareDialog.react')},this.props.inlineShare.props,{onCancel:(function(){return this._resetInlineShare();}).bind(this),onPost:(function(oc){j.loadModules(["ShareDialogOsricController"],(function(pc){pc.onPost(oc,this._beforePostInlineShare,this._onInlineShareSuccess,this._onInlineShareError);}).bind(this));}).bind(this),ref:'inlineShare',renderInline:true,status:this.props.inlineShare.status}))));}else return (t.createElement(ha,{hasNub:jb.shownub&&wb},ob,pb,rb,xb,hc,nc,ic,jc,qb));},applyToUFIComponents:function(hb,ib,jb,kb,lb){var mb=this._applyToFirstComponent(hb,ib,jb,kb,false);hb=mb[0];ib=mb[1];jb=mb[2];var nb=this._applyToFirstComponent(jb,ib,hb,lb,true);jb=nb[0];ib=nb[1];hb=nb[2];return [hb,ib,jb];},_applyToFirstComponent:function(hb,ib,jb,kb,lb){var mb,nb,ob;mb=lb?hb.length-1:0;nb=lb?-1:hb.length;for(ob=mb;ob!=nb;ob+=lb?-1:1)if(hb[ob]){hb[ob]=t.cloneElement(hb[ob],kb);return [hb,ib,jb];}var pb=Object.keys(ib||{});mb=lb?pb.length-1:0;nb=lb?-1:pb.length;for(ob=mb;ob!=nb;ob+=lb?-1:1){var qb=pb[ob];if(ib[qb]&&ib[qb].props.comment&&this._shouldRenderComment(ib[qb].props.comment)){ib[qb]=t.cloneElement(ib[qb],kb);return [hb,ib,jb];}}mb=lb?jb.length-1:0;nb=lb?-1:jb.length;for(ob=mb;ob!=nb;ob+=lb?-1:1)if(jb[ob]){jb[ob]=t.cloneElement(jb[ob],kb);return [hb,ib,jb];}return [hb,ib,jb];},_focusInlineShare:function(hb){hb=hb||{};var ib=u.findDOMNode(this.refs.inlineShare);if(!this.props.inlineShare.messageOnly)ab(ib);if(!this.props.contextArgs.ufiexperiments.inlineShareHighlight)return;m.ensureVisible(ib);if(hb.shouldHighlight)j.loadModules(["highlight","CSS","cx"],function(jb,kb,lb){kb.addClass(ib,"_5p5");var mb=function(){kb.removeClass(ib,"_5p5");};jb(ib,mb,'#f6f7f8');});},_shouldRenderComment:function(hb){return hb.status!==ga.UFIStatus.DELETED;},renderCommentMap:function(hb,ib){var jb=this.props,kb={},lb=hb.length;if(!lb)return kb;var mb=hb[0].parentcommentid,nb=[],ob=(function(){if(nb.length>0){var ac=(function(bc,cc){var dc=this.state.loadingSpamIDs;dc[bc[0]]=true;this.setState({loadingSpamIDs:dc});this.context.dispatch(sa.spamFetched(bc,cc));}).bind(this,nb,mb);kb['spam'+nb[0]]=t.createElement(ra,{onClick:ac,numHidden:nb.length,isLoading:!!this.state.loadingSpamIDs[nb[0]]});nb=[];}}).bind(this),pb=jb.instanceid,qb=ka.getKeyForInstance(pb,'editcommentid'),rb=!!hb[0].parentcommentid;for(var sb=0;sb<lb;sb++)if(hb[sb].status==ga.UFIStatus.SPAM){nb.push(hb[sb].id);}else if(jb.authorProfiles[hb[sb].author]){ob();var tb=Math.max(jb.loggingOffset-sb-ib,0),ub=hb[sb],vb;if(ub.id==qb){vb=this.renderEditCommentBox(ub);}else{var wb=sb===0,xb=sb===lb-1,yb=!rb,zb=rb&&!wb;vb=this.renderComment(ub,tb,wb,xb,yb,zb);}kb['comment'+ub.id]=vb;if(ub.status!==ga.UFIStatus.DELETED)kb['replies'+ub.id]=this.renderReplyContainer(ub);}ob();return kb;},renderReplyContainer:function(hb){var ib=this.props,jb=ib.commentCounts[hb.id],kb=this.props.repliesExpandedMap[hb.id],lb=!kb&&hb.interestingReplyId,mb,nb;if(kb||hb.interestingReplyId){mb=ib.repliesMap[hb.id];nb=ib.ranges[hb.id].getOffset();if(lb){var ob=mb.filter(function(lc){return lc.id===hb.interestingReplyId;});if(ob.length!==1){p.getInstance('ufi').error('comment '+hb.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');mb=null;}else{mb=ob;nb=hb.interestingReplyOffset;}}}var pb,qb,rb;if(mb){var sb=ib.ranges[hb.id].getOffset(),tb=ib.ranges[hb.id].getLength();if(lb){sb=nb;tb=1;}var ub=this.renderPagers(hb.id,sb,tb);pb=ub.topPager;qb=ub.bottomPager;rb=this.renderCommentMap(mb,nb);}var vb=Math.max(jb-hb.spamreplycount,0),wb;if(vb&&(kb&&mb&&mb.length>this.props.replySocialSentenceMaxReplies||!kb&&!mb)){var xb=kb&&!pb&&(this.isLoadingPrev(hb.id)||this.isLoadingNext(hb.id)),yb=null;if(hb.replyauthors&&hb.replyauthors.length)yb=ib.authorProfiles[hb.replyauthors[0]];wb=t.createElement(oa,{contextArgs:ib.contextArgs,author:yb,replies:kb?mb.length:vb,shortenTimestamp:ib.shortenTimestamp,timestamp:hb.recentreplytimestamp,onClick:this.onToggleReplies.bind(this,hb.id),isLoading:xb,isExpanded:kb,showVerified:this.props.feedback.showfeaturedreplies,orderingMode:this.props.orderingMode});}var zb;if(kb)if(hb.cancomment&&ib.canAddCommentMap[hb.id]){var ac=false,bc=Object.keys(rb);for(var cc=bc.length-1;cc>=0;cc--){var dc=bc[cc];if(dc&&rb[dc]){ac=rb[dc].props.isAuthorReply;break;}}zb=this.renderReplyComposer(hb,!ac);}var ec;if(wb||pb||rb||qb||zb){var fc,gc,hc=this.applyToUFIComponents([wb,pb],rb,[qb,zb],{isFirstComponent:true},{isLastComponent:true});fc=hc[0];rb=hc[1];gc=hc[2];var ic=fc;wb=ic[0];pb=ic[1];var jc=gc;qb=jc[0];zb=jc[1];var kc=hb.status===ga.UFIStatus.LIVE_DELETED;ec=t.createElement(ha,{isParentLiveDeleted:kc,isReplyList:true},wb,pb,rb&&v.create(rb),qb,zb);}return ec;},renderReplyComposer:function(hb,ib){var jb=this.props,kb=jb.contextArgs,lb=jb.feedback,mb=ka.getKeyForInstance(kb.instanceid,'isediting')&&!hb.id;ia.getFeedbackTarget(jb.id,function(nb){kb.feedbackisranked=nb.isranked;});return (t.createElement(aa,{viewerActorID:lb.actorforpost,hide:mb,replyCommentID:hb.id,replyCommentParentID:this.state.repliesMap[hb.id],targetID:lb.ownerid,initialData:null,ref:'replycomposer-'+hb.id,withoutSeparator:ib,editingComment:{},isEditing:false,mentionsDataSource:lb.mentionsdatasource,showSendOnEnterTip:false,allowPhotoAttachments:lb.allowphotoattachments&&!kb.isstreaming,allowStickerAttachments:lb.allowstickerattachments&&!kb.isstreaming,source:kb.source,contextArgs:kb,subtitle:lb.subtitle,isQAndA:lb.isqanda,isSnowlift:kb.issnowlift,feedbackIsRanked:kb.feedbackisranked}));},renderEditCommentBox:function(hb){var ib=this.props,jb=ib.contextArgs,kb=ib.feedback,lb;if(hb.attachment)lb=hb.attachment.type=='sticker'?hb.attachment:null;var mb=q.generateDataFromTextWithEntities(hb.body),nb={mentionsinput:jb.mentionsinput};return (t.createElement(aa,{viewerActorID:kb.actorforpost,targetID:kb.ownerid,initialData:mb,mentionsDataSource:kb.mentionsdatasource,source:undefined,contextArgs:nb,isEditing:true,editingComment:hb,attachedSticker:lb,allowPhotoAttachments:kb.allowphotoattachments,allowStickerAttachments:kb.allowstickerattachments,isQAndA:kb.isqanda}));},renderComment:function(hb,ib,jb,kb,lb,mb){var nb=this.props,ob=nb.feedback,pb=ob.actorforpost===hb.author,qb=ka.getKeyForInstance(this.props.instanceid,'locallycomposed'),rb=hb.islocal||qb&&qb[hb.id],sb=ob.showremovemenu||ob.viewerid===hb.author,tb=ob.canremoveall&&ob.isownerpage&&!pb,ub=nb.source!=ga.UFIFeedbackSourceType.INTERN,vb=z.getTrackingInfo(z.types.COMMENT,ib),wb=!!hb.parentcommentid,xb=!!hb.isfeatured;switch(this.props.source){case ga.UFIFeedbackSourceType.TOPIC_CONVERSATION:return (t.createElement(i,{bootloadPlaceholder:t.createElement('span',null),bootloadLoader:o('UFITopicConversationComment.react'),isFirst:jb,isLast:kb,comment:hb,authorProfiles:this.props.authorProfiles,viewerIsAuthor:pb,feedback:ob,contextArgs:this.props.contextArgs,focusOnMount:hb.id===this.props.commentIDToFocusOnMount,isLocallyComposed:rb}));default:var yb=new va(nb.commentPermalinks[hb.id]).addQueryData({comment_tracking:vb}).toString();return (t.createElement(ca,{isFirst:jb,isLast:kb,showReplyLink:lb,hasPartialBorder:mb,comment:hb,authorProfiles:this.props.authorProfiles,viewerIsAuthor:pb,feedback:ob,'data-ft':vb,contextArgs:this.props.contextArgs,hideAsSpamForPageAdmin:tb,isLocallyComposed:rb,isReply:wb,isFeatured:xb,permalink:yb,shortenTimestamp:nb.shortenTimestamp,showPermalink:ub,isStreaming:nb.isStreaming,showRemoveReportMenu:sb,focusOnMount:hb.id===this.props.commentIDToFocusOnMount,onCommentReply:this.onCommentReply.bind(this,hb),shouldLogVPVs:this.props.shouldLogVPVs}));}},onToggleReplies:function(hb){var ib=hb!==this.props.id;this.setState({hasPagedToplevel:this.state.hasPagedToplevel||!ib});this.context.dispatch(sa.toggleReplies(hb));},onPage:function(hb,ib,jb){var kb=hb!==this.props.id;this.setState({hasPagedToplevel:this.state.hasPagedToplevel||!kb});this.context.dispatch(sa.pageInComments(hb,ib,jb));},isLoadingPrev:function(hb){var ib=this.props;hb=hb||ib.id;var jb=ib.ranges[hb].getRequestedOffset(),kb=ib.ranges[hb].getOffset();return jb<kb;},isLoadingNext:function(hb){var ib=this.props;hb=hb||ib.id;var jb=ib.ranges[hb].getRequestedOffset(),kb=ib.ranges[hb].getRequestedLength(),lb=ib.ranges[hb].getOffset(),mb=ib.ranges[hb].getLength();return jb+kb>lb+mb;},renderPagers:function(hb,ib,jb){var kb=this.props,lb=kb.deletedCounts[hb],mb=kb.commentCounts[hb],nb=mb-lb,ob=jb-lb,pb=kb.contextArgs.numberdelimiter||',',qb=hb!==kb.id,rb,sb={topPager:null,bottomPager:null};if(kb.source==ga.UFIFeedbackSourceType.ADS)return sb;var tb=this.isLoadingPrev(hb),ub=this.isLoadingNext(hb);if(jb==mb)return sb;var vb={delimiter:pb},wb=kb.feedback.commentsentenceinfo;if(wb){vb.commenters=wb.explicit_commenter_names;vb.othersCount=wb.other_commenter_count;}var xb=ib+jb==mb;if(mb<kb.pageSize&&xb||ob===0){rb=Math.min(mb,kb.pageSize);var yb=this.onPage.bind(this,hb,this._hasCommentOrderInverted()&&!qb?eb.BOTTOM:eb.TOP,{offset:mb-rb,length:rb}),zb;if(ob===0){if(nb==1){zb=na.VIEW_ONE;}else{vb.count=nb;zb=na.VIEW_ALL;}}else if(nb-ob==1){zb=na.VIEW_ONE_MORE;}else{zb=na.VIEW_MORE_EXPLICIT;vb.count=nb-ob;}var ac=z.getTrackingInfo(z.types.VIEW_ALL_COMMENTS),bc=na.getLabel(zb,qb,kb.feedback.isqanda,vb),cc=this._hasCommentOrderInverted()&&!qb,dc=t.createElement(ma,{key:'allPager'+hb,ref:cc?'topLevelBottomPager':null,contextArgs:kb.contextArgs,isUnseen:kb.feedback.hasunseencollapsed,isLoading:tb,isReply:qb,pagerLabel:bc,onPagerClick:yb,'data-ft':ac});if(cc){sb.bottomPager=dc;}else sb.topPager=dc;return sb;}var ec=na.getLabel(na.VIEW_MORE,qb,kb.feedback.isqanda,vb),fc=na.getLabel(na.VIEW_PREVIOUS,qb,kb.feedback.isqanda,vb);if(ib>0){var gc=Math.max(ib-kb.pageSize,0);rb=ib+jb-gc;var hc;if(!qb||ob>1){var ic=r.formatIntegerWithDelimiter(ob,pb),jc=r.formatIntegerWithDelimiter(nb,pb);hc=cb._("{countshown} of {totalcount}",[cb.param('countshown',ic),cb.param('totalcount',jc)]);}var kc;if(this._hasCommentOrderInverted()&&!qb){kc=this.onPage.bind(this,hb,eb.BOTTOM,{offset:gc,length:rb});sb.bottomPager=t.createElement(ma,{key:'bottomPager'+hb,ref:!qb?'topLevelBottomPager':null,contextArgs:kb.contextArgs,isLoading:tb,isReply:qb,pagerLabel:ec,onPagerClick:kc,countSentence:hc});}else{kc=this.onPage.bind(this,hb,eb.TOP,{offset:gc,length:rb});sb.topPager=t.createElement(ma,{key:'topPager'+hb,contextArgs:kb.contextArgs,isLoading:tb,isReply:qb,pagerLabel:fc,onPagerClick:kc,countSentence:hc});}}if(ib+jb<mb){rb=Math.min(jb+kb.pageSize,mb-ib);var lc;if(this._hasCommentOrderInverted()&&!qb){lc=this.onPage.bind(this,hb,eb.TOP,{offset:ib,length:rb});sb.topPager=t.createElement(ma,{key:'topPager'+hb,contextArgs:kb.contextArgs,isLoading:ub,isReply:qb,pagerLabel:fc,onPagerClick:lc});}else{lc=this.onPage.bind(this,hb,eb.BOTTOM,{offset:ib,length:rb});sb.bottomPager=t.createElement(ma,{key:'bottomPager',ref:!qb?'topLevelBottomPager':null,contextArgs:kb.contextArgs,isLoading:ub,isReply:qb,pagerLabel:ec,onPagerClick:lc});}}return sb;},loadMoreComments:function(){if(this.isMounted()&&this.refs.topLevelBottomPager&&!(this.props.id in this.props.isActiveLoading)){var hb=u.findDOMNode(this.refs.topLevelBottomPager),ib=ya(window).y,jb=ib+document.documentElement.clientHeight+ga.infiniteScrollRangeForQANDAPermalinks;if(hb.offsetHeight&&hb.offsetTop<jb)this.refs.topLevelBottomPager.props.onPagerClick();}},onCommentReply:function(hb){var ib=this.props.feedback;if(ib.isthreaded&&hb.cancomment){this.context.dispatch(sa.showReplies(hb.id));}else if(hb.parentcommentid){var jb=hb.parentcommentid,kb,lb=hb.author;if(lb!==ib.actorforpost){var mb=this.props.authorProfiles[lb],nb=mb.type;kb=new x({uniqueID:lb,title:mb.name,type:nb==='friend'?'user':nb});}this.context.dispatch(sa.showReplies(jb,kb));}},onComment:function(){var hb=null;if(this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();hb=u.findDOMNode(this.refs.toplevelcomposer);}else{var ib=s.byTag(u.findDOMNode(this),'form');hb=l.scry(ib,'[name="add_comment_text_text"]').concat(l.scry(ib,'[name="add_comment_text"]')).find(function(jb){return !s.byClass(jb,'UFIReplyList');});hb&&hb.focus();}if(hb)h.inform(ta.CommentFocus,{element:hb});},_beforePostInlineShare:function(){ka.updateStateField(this.props.instanceid,'inlineShare','status',{type:'posting'});},_onInlineShareSuccess:function(hb){var ib=hb.payload.message||y.success;this._resetInlineShare({message:ib,isError:false});},_onInlineShareError:function(hb){var ib=hb.errorDescription||y.error;this._resetInlineShare({message:ib,isError:true});},_resetInlineShare:function(hb){ka.updateState(this.props.instanceid,'inlineShare',hb||{});},_hasCommentOrderInverted:function(){return da.inverted(this.props.orderingMode);}});f.exports=gb;},null);
__d('UFICallbackStore',['FluxStore'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;'use strict';i=babelHelpers.inherits(k,h);j=i&&i.prototype;k.prototype.__onDispatch=function(l){var m=l.type,n=babelHelpers.objectWithoutProperties(l,['type']);this.__emitter.emit(m,n);};k.prototype.on=function(l,m){return this.__emitter.addListener(l,m);};k.prototype.remove=function(){this.__emitter.removeAllListeners();};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d('UFICommentFilters',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getAuthors:function(i){return i.reduce(function(j,k){if(k.author)j=j.concat(k.author);if(k.socialcontext)j=j.concat(k.socialcontext.topmutualid);if(k.replyauthors&&k.replyauthors.length)j=j.concat(k.replyauthors);return j;},[]);}};f.exports=h;},null);
__d('UFIDispatcherContext.react',['React','UFIDispatcher'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes,k=h.createClass({displayName:'UFIDispatcherContext',propTypes:{dispatcher:j.instanceOf(i).isRequired,stores:j.object.isRequired},childContextTypes:{dispatch:j.func,stores:j.object},getChildContext:function(){return {dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores};},render:function(){return this.props.children;}});f.exports=k;},null);
__d('UFIFeaturedReplyCommentList',['UFIReplyCommentList'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;'use strict';i=babelHelpers.inherits(k,h);j=i&&i.prototype;k.getCommentList=function(l,m){};function k(l,m,n,o){j.constructor.call(this,l,m);var p=0,q=n.length;this.updateCommentCount(q);this.addCommentIDs(p,q,n);var r={};o.forEach(function(s){r[s.id]=s;});n.forEach((function(s){this.addOrUpdateComment(r[s]);}).bind(this));}k.prototype.fetchComments=function(l,m,n){};f.exports=k;},null);
__d('UFIFeaturedToplevelCommentList',['UFIConstants','UFIToplevelCommentList'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,i);k=j&&j.prototype;l.getCommentList=function(m,n){};l.getCommentListsForFeedbackTargetID=function(m){};l.getCommentListForFeedbackTargetID_UNSAFE=function(m){};l.resetCommentListsForFeedbackTargetID=function(m){};function l(m,n,o){k.constructor.call(this,m,h.UFICommentOrderingMode.FEATURED);var p=0,q=n.length;this.updateCommentCount(q);this.addCommentIDs(p,q,n);var r={};o.forEach(function(s){r[s.id]=s;});n.forEach((function(s){this.addOrUpdateComment(r[s]);}).bind(this));}l.prototype.fetchComments=function(m,n,o){};f.exports=l;},null);
__d("XWebGraphQLQueryController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/webgraphql\/query\/",{query_id:{type:"String"},variables:{type:"String"}});},null,{});
__d("CommentCreateSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g,h){"use strict";if(c.__markCompiled)c.__markCompiled();var i={getURI:function(j){return h.getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(j)).getURI();},getQueryID:function(){return "1660573210832508";}};f.exports=i;},null);
__d('BaseGraphQLSubscription',['BanzaiLogger','CurrentEnvironment','CurrentUser','CurrentLocale','RTISubscriptionManager'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={subscribe:function(n,o){var p={transformContext:JSON.stringify(this._getTransformContext(n))};this._logEvent('subscribe');return l.subscribe(this._getTopic(n),function(q){o(JSON.parse(q.payload));},p);},_getTransformContext:function(n){var o=155160167952447;return {viewerID:j.getID(),appID:o,locale:k.get(),queryID:this._getQueryID(),serializedQueryParameters:JSON.stringify(this._getQueryParameters(n))};},_logEvent:function(n){h.log('GraphQLSubscriptionsLoggerConfig',{mechanism:'skywalker',subscription_call:this._getSubscriptionCallName(),event:n});}};f.exports=m;},null);
__d('UFICommentSubscription',['CommentCreateSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=babelHelpers._extends({},i,{_getTopic:function(l){return 'graphql/comment_create_subscribe;top_level_feedback_id_'+l;},_getQueryID:function(){return h.getQueryID();},_getQueryParameters:function(l){return {input:JSON.stringify({client_subscription_id:j(),feedback_id:l})};},_getSubscriptionCallName:function(){return 'comment_create_subscribe';}});f.exports=k;},null);
__d("FeedbackLikeSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g,h){"use strict";if(c.__markCompiled)c.__markCompiled();var i={getURI:function(j){return h.getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(j)).getURI();},getQueryID:function(){return "1654910451398784";}};f.exports=i;},null);
__d('UFILikeSubscription',['FeedbackLikeSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=babelHelpers._extends({},i,{_getTopic:function(l){return 'graphql-sample/feedback_like_subscribe;feedback_id_'+l;},_getQueryID:function(){return h.getQueryID();},_getQueryParameters:function(l){return {input:JSON.stringify({client_subscription_id:j(),feedback_id:l})};},_getSubscriptionCallName:function(){return 'feedback_like_subscribe';}});f.exports=k;},null);
__d("XLiveStreamingCommentsAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/livecomments\/",{eft_id:{type:"String",required:true}});},null,{});
__d('UFILiveStreamingComments',['AsyncRequest','BanzaiODS','Map','Set','UFICentralUpdates','UFIConfig','UFIConstants','UFIToplevelCommentList','XLiveStreamingCommentsAsyncController','clearInterval','setInterval'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s=new j();function t(v,w,x){this.eftID=v;this.totalCommentCount=w;this.tailCommentFBID=x;this.queue=[];this.localCommentBodies=new k();this.errorCount=0;this.interval=r((function(){if(this.queue.length>m.facecastWWWCommentQueueThreshold){this.renderNextComment();return;}new h().setURI(this.getNextURI()).setHandler((function(y){switch(y.payload.status){case 'streaming':this.enqueueMoreComments(y.payload);this.renderNextComment();this.errorCount=0;return;case 'not-streaming':q(this.interval);return;case 'error':this.renderNextComment();this.errorCount+=1;if(this.errorCount===1)i.bumpEntityKey('streaming_comments','first_streaming_comments_error');if(this.errorCount===5){i.bumpEntityKey('streaming_comments','too_many_streaming_comments_errors');q(this.interval);return;}break;}}).bind(this)).send();}).bind(this),2000);l.subscribe('update-comments',(function(y,z){if(z.comments&&z.comments.length)z.comments.forEach((function(aa){if(aa.parentcommentid)return;if(aa.islocal)this.trackLocalComment(aa);}).bind(this));}).bind(this));}t.prototype.enqueueMoreComments=function(v){if(!v.ufipayloads||isNaN(v.commentcount))return;var w=v.ufipayloads.filter((function(z){return !this.resemblesLocalComment(z.comments[0]);}).bind(this)),x=-1;if(this.tailCommentFBID!==null)x=w.findIndex((function(z){return z.comments[0].fbid===this.tailCommentFBID;}).bind(this),this);if(x===-1){this.queue=w;}else this.queue=this.queue.concat(w.slice(x+1));if(this.queue.length>0)this.tailCommentFBID=this.queue[this.queue.length-1].comments[0].fbid;var y=v.commentcount-this.queue.length;if(y>this.totalCommentCount)this.totalCommentCount=y;if(m.showAccurateStreamingCommentCount)o.getCommentList(this.eftID,n.UFICommentOrderingMode.LIVE_STREAMING).updateOverriddenDisplayCount(this.totalCommentCount);};t.prototype.renderNextComment=function(){if(this.queue.length===0)return;l.handleUpdate(n.UFIPayloadSourceType.LIVE_SEND,this.queue.shift());};t.prototype.getNextURI=function(){return p.getURIBuilder().setString('eft_id',this.eftID).getURI();};t.prototype.trackLocalComment=function(v){var w=t.hashCommentData(v);this.localCommentBodies.add(w);};t.prototype.resemblesLocalComment=function(v){var w=t.hashCommentData(v);return this.localCommentBodies.has(w);};t.hashCommentData=function(v){var w=v.author+v.body.text;if(v.attachment)w+=':'+v.attachment.fbid;return w;};var u={start:function(v,w,x){if(s.get(v))return;s.set(v,new t(v,w,x));}};f.exports=u;},null);
__d('UFILiveVideoCommentSubscription',['CommentCreateSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=babelHelpers._extends({},i,{_getTopic:function(l){return 'gqls/live_video_comment_create_subscribe/feedback_id_'+l;},_getQueryID:function(){return h.getQueryID();},_getQueryParameters:function(l){return {input:JSON.stringify({client_subscription_id:j(),feedback_id:l})};},_getSubscriptionCallName:function(){return 'live_video_comment_create_subscribe';}});f.exports=k;},null);
__d('UFIRange',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){this.offset=i||0;this.length=j||0;this.requestedOffset=this.offset;this.requestedLength=this.length;}h.prototype.getOffset=function(){return this.offset;};h.prototype.getLength=function(){return this.length;};h.prototype.updateRange=function(i,j){this.offset=i;this.length=j;if(this.requestedLength>0){var k=Math.min(this.offset,this.requestedOffset),l=Math.max(this.offset+this.length,this.requestedOffset+this.requestedLength);this.requestedOffset=k;this.requestedLength=l-k;}else{this.requestedOffset=this.offset;this.requestedLength=this.length;}};h.prototype.getRequestedOffset=function(){return this.requestedOffset;};h.prototype.getRequestedLength=function(){return this.requestedLength;};h.prototype.updateRequestedRange=function(i,j){this.requestedOffset=i;this.requestedLength=j;};f.exports=h;},null);
__d('UFIRetryActions',['JSLogger','UFICentralUpdates','UFIConstants','UFIUserActions'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.create('UFIRetryActions');function m(p,q){var r={actiontype:j.UFIActionType.DELETE_COMMENT,commentid:p.id};i.handleUpdate(j.UFIPayloadSourceType.USER_ACTION,{actions:[r]});var s=p.body.text,t=p.body.mentionstext;q.replyid=p.parentcommentid;q.attachedphoto=p.body.mentionsphoto;k.addComment(p.ftentidentifier,s,t,q);}function n(p,q){var r=p.body.text,s=p.body.mentionstext;q.attachedPhoto=p.body.mentionsphoto;q.attachedSticker=p.attachment;k.editComment(p.id,r,s,q);}var o={retrySubmit:function(p,q){switch(p.status){case j.UFIStatus.FAILED_ADD:m(p,q);break;case j.UFIStatus.FAILED_EDIT:n(p,q);break;default:l.error('retrysubmitstatus',{status:p.status});break;}}};f.exports=o;},null);
__d('UFISubscriptionUpdates',['BanzaiLogger','BanzaiODS','UFICentralUpdates','UFIConstants','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();i.setEntitySample('feedback',.0001);function m(o){h.log('LiveWWWFeedbackLoggerConfig',{mechanism:'graphql_subscriptions',event:'receive_payload',update_type:o});}var n={handleLiveLike:function(o,p){i.bumpEntityKey('feedback','gql_like_received');m('like');var q=p.feedback_like_subscribe.feedback,r=p.feedback_like_subscribe.liker;if(!q||!r)return;j.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:k.UFIActionType.LIKE_ACTION,actorid:r.id,clientid:p.feedback_like_subscribe.client_mutation_id,entidentifier:o,likesentences:{current:q.does_viewer_like?q.viewer_likes_sentence:q.viewer_does_not_like_sentence,alternate:q.does_viewer_like?q.viewer_does_not_like_sentence:q.viewer_likes_sentence},hasviewerliked:q.does_viewer_like,likecount:q.likers.count}]});},handleLiveComment:function(o,p){i.bumpEntityKey('feedback','gql_comment_received');m('comment');var q=p.comment_create_subscribe.comment;if(!q)return;var r=babelHelpers._extends({author:q.author.id,body:q.body,cancomment:q.feedback.can_viewer_comment,canedit:q.can_viewer_edit,canremove:q.can_viewer_delete,clientid:p.comment_create_subscribe.client_mutation_id,ftentidentifier:o,id:q.legacy_token,fbid:q.legacy_fbid,legacyid:q.legacy_fbid,timestamp:{time:q.created_time,text:l._("a few seconds ago")},hasviewerliked:q.feedback.does_viewer_like,isfeatured:q.is_featured,istranslatable:q.translation_available_for_viewer,likecount:q.feedback.likers.count,viewercanlike:q.feedback.can_viewer_like,parentcommentid:q.comment_parent&&q.comment_parent.legacy_token,spamreplycount:0},{});if(q.attachments.length){var s=q.attachments[0],t=s.style_list;if(t&&t.length&&t[0]=='sticker'){var u=s.target;r.attachment={metadata:{source_uri:u.img.uri,source_uri_2x:u.img_2x.uri,width:u.img.width,height:u.img.height,frameCount:u.frame_count,frameRate:u.frame_rate,framesPerCol:u.frames_per_column,framesPerRow:u.frames_per_row,sprite_uri:u.sprite_img&&u.sprite_img.uri,sprite_uri_2x:u.sprite_img_2x&&u.sprite_img_2x.uri},type:'sticker'};}else if(t&&t.length&&t[0]=='photo'){var v=s.target;r.attachment={metadata:{preview_uri:v.photo_img&&v.photo_img.uri,width:v.photo_img.width,height:v.photo_img.height,url:v.url},type:'photo'};}else if(t&&t.length&&t[0]=='share'){s.type='live_share';r.attachment=s;}}j.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,{comments:[r]});}};f.exports=n;},null);
__d('UFIController',['Arbiter','Bootloader','BootloadedComponent.react','CommentPrelude','DOM','JSResource','LayerRemoveOnHide','LiveTimer','PageAdminSignatureSettings','Parent','React','ReactDOM','ReactMount','Run','ScrollSuppressor','ShortProfiles','SubscriptionsHandler','StaticUFI.react','UFIActionLinkController','UFIActionTypes','UFICallbackStore','UFICentralUpdates','UFICommentFilters','UFIDispatcher','UFIDispatcherContext.react','UFIFeaturedReplyCommentList','UFIFeaturedToplevelCommentList','UFICommentSubscription','UFICommentTemplates','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIInstanceState','UFILikeSubscription','UFILiveStreamingComments','UFILiveVideoCommentSubscription','UFINewCommentNotifier','UFIRange','UFIReplyCommentList','UFIRetryActions','UFIStoryAction','UFISubscriptionUpdates','UFIToplevelCommentList','UFIUIEvents','UFIUserActions','URI','csx','emptyFunction','forEachObject','isEmpty','onEnclosingPageletDestroy','fbt','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb){'use strict';if(c.__markCompiled)c.__markCompiled();var ib=la.UFIPayloadSourceType,jb=la.UFIPaging,kb=function(nb,ob,pb,qb,rb){var sb=nb+ob===pb;return {offset:nb,length:sb&&lb(rb)?qb-nb:ob};},lb=function(nb){return nb==ib.USER_ACTION||nb==ib.LIVE_SEND;};mb.preload=function(){};mb.prototype.$UFIController1=function(nb,ob){if(!this.$UFIController2||ob!==ib.INITIAL_SERVER)return;this.$UFIController2.startRecording(nb);};mb.prototype.$UFIController3=function(nb,ob){if(!this.$UFIController2||ob!==ib.INITIAL_SERVER)return;this.$UFIController2.log(nb,ob,{num_comments:this.comments&&this.comments.length||0,num_likes:this.feedback&&this.feedback.likecount||0,features:{is_featured:!!this.featuredToplevelCommentList,is_streaming:this.$UFIController4(),is_lazy_fetch:this.$UFIController5.lazyFetch,is_disable_css_hiding:this.$UFIController5.disableCSSHiding}});};function mb(nb,ob,pb){this.id=ob.ftentidentifier;this.$UFIController2=ob.perfLogger?new ob.perfLogger(this.id):null;this.$UFIController1('construct',ib.INITIAL_SERVER);this.$UFIController6();this.root=nb;this.source=ob.source;this.$UFIController7=ob.instanceid;this.$UFIController8={oldRange:{offset:0,length:0},commentIDToFocusOnMount:null,showLoadingUFI:false,repliesExpandedMap:null,isActiveLoading:{},requestedInitialComments:false,isHidden:ob.feedbackMode!=='expanded',viewerHasInteracted:false};this.featuredToplevelCommentList=null;this.featuredReplyCommentLists={};this.$UFIController5=ob;this.$UFIController5.rootid=this.root.id;this.$UFIController9={};this.$UFIController10={};var qb=pb.feedbacktargets[0];this.$UFIController5.livevideographqlcomments=qb.lvc;new z(nb,this.$UFIController5,qb,this.$UFIController7,(function(){if(!this.$UFIController5.disableinlinetoggle){this.$UFIController8.isHidden=!this.$UFIController8.isHidden;this.render(ib.COLLAPSE_ACTION);}}).bind(this));if(qb.ll)this.liveLikeSubscription=oa.subscribe(qb.targetfbid,(function(wb){wa.handleLiveLike(this.id,wb);}).bind(this));if(qb.lc)this.liveCommentSubscription=ia.subscribe(qb.targetfbid,(function(wb){wa.handleLiveComment(this.id,wb);}).bind(this));if(qb.lvc)this.liveVideoCommentSubscription=qa.subscribe(qb.targetfbid,(function(wb){wa.handleLiveComment(this.id,wb);}).bind(this));this.$UFIController5.pagesAdminSignatureSettings=new p(this.$UFIController5.initAdminSignatureContext,qb.actorforpost);this.orderingMode=qb.defaultcommentorderingmode;var rb=null;if(pb.featuredcommentlists&&pb.featuredcommentlists.comments&&pb.featuredcommentlists.comments[this.id]){rb=pb.featuredcommentlists.comments[this.id];this.featuredToplevelCommentList=new ha(this.id,rb.values,pb.comments);}else rb=pb.commentlists.comments[this.id][this.orderingMode];this.ranges={};this.replyRanges={};this.repliesMap={};this.shortenTimestamp=ob.shortenTimestamp;this.commentcounts={};this.commentcounts[this.id]=this.getToplevelCommentList().getCommentCount();this.ranges[this.orderingMode]=new sa(rb.range.offset,rb.range.length);this.$UFIController8.oldRange={offset:this.getRange().getOffset(),length:this.comments&&this.comments.length||0};var sb,tb,ub;if(pb.commentlists.replies)for(sb=0;sb<rb.values.length;sb++){tb=rb.values[sb];ub=pb.commentlists.replies[tb];if(ub){this.commentcounts[tb]=this.getReplyCommentList(tb).getCommentCount();this.getReplyRange(tb).updateRange(ub.range.offset,ub.range.length);}}if(pb.featuredcommentlists)if(pb.featuredcommentlists.replies)for(sb=0;sb<rb.values.length;sb++){tb=rb.values[sb];ub=pb.featuredcommentlists.replies[tb];if(ub){this.featuredReplyCommentLists[tb]=new ga(this.id,tb,ub.values,pb.comments);this.commentcounts[tb]=this.getReplyCommentList(tb).getCommentCount();this.getReplyRange(tb).updateRange(ub.range.offset,ub.range.length);}}this.$UFIController11=null;this.$UFIController12=null;this.ufiCentralUpdatesSubscriptions=[ca.subscribe('feedback-updated',(function(wb,xb){var yb=xb.updates,zb=xb.payloadSource;if(zb!=ib.COLLAPSED_UFI&&this.id in yb)this.fetchAndUpdate(zb,false);}).bind(this)),ca.subscribe('feedback-id-changed',(function(wb,xb){var yb=xb.updates;if(this.id in yb)this.id=yb[this.id];}).bind(this)),ca.subscribe('instance-updated',(function(wb,xb){var yb=xb.updates;if(this.$UFIController7 in yb){var zb=yb[this.$UFIController7];if(zb.editcommentid||zb.inlineShare)this.render(xb.payloadSource);}}).bind(this)),ca.subscribe('actor-changed',(function(wb,xb){this.$UFIController13();}).bind(this))];this.clearPageletSubscription=fb(this.root,this.$UFIController14.bind(this));this.clearPageSubscription=h.subscribe(ya.PageCleared,this.$UFIController15.bind(this));u.onUnload(this.$UFIController16.bind(this));ca.handleUpdate(ib.INITIAL_SERVER,pb);if(this.$UFIController5.viewas)this.viewasUFICleanSubscription=h.subscribe('pre_page_transition',(function(wb,xb){if(this.$UFIController5.viewas!==new ab(xb.to).getQueryData('viewas'))xa.resetCommentListsForFeedbackTargetID(this.id);}).bind(this));i.loadModules(["ScrollAwareDOM"],function(wb){t.scrollMonitor=wb.monitor;});if(this.$UFIController4()){var vb=null;if(this.comments&&this.comments.length>0)vb=this.comments[0].fbid;pa.start(this.id,qb.commentcount,vb);}if(!this.$UFIController5.lazyFetch)this.$UFIController17(qb);this.$UFIController3('construct',ib.INITIAL_SERVER);}mb.prototype.$UFIController6=function(){if(!this.$UFIController18){this.$UFIController19=new ea();this.$UFIController20={UFICallbackStore:new ba(this.$UFIController19)};this.$UFIController18=new x();this.$UFIController18.addSubscriptions(this.$UFIController20.UFICallbackStore.on(aa.ADD_COMMENT.CANCEL,(function(){return this.$UFIController13();}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.TOGGLE_LIKE,(function(nb){return za.changeCommentLike(nb.comment.id,nb.like,{source:this.source,target:nb.target});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.REMOVE,(function(nb){return this.$UFIController21(nb.comment,nb.target,nb.onConfirm);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.EDIT,(function(nb){return this.$UFIController22(nb.comment);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.TRANSLATE,(function(nb){return za.translateComment(nb.comment,{source:this.source,target:nb.target});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.TOGGLE_MARK_AS_SPAM,(function(nb){return za.setHideAsSpam(nb.comment.id,nb.is_spam,{source:this.source,target:nb.target});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.TOGGLE_INLINE_BAN,(function(nb){return za.banUser(nb.comment,nb.ownerid,nb.is_banned,{source:this.source,target:nb.target});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.STORY.TOGGLE_LIKE,(function(nb){return za.changeReaction(this.id,this.feedback.hasviewerliked?0:la.LikeReaction,{source:this.source,target:nb.target,rootid:this.$UFIController5.rootid});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.ADD_COMMENT.TYPING_CHANGE,(function(nb){return za.typingChange(this.id,nb.state);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.ADD_COMMENT.SUBMIT_NEW,(function(nb){return ra.onNewComment(this.id,this.$UFIController7,this.$UFIController23(),this.$UFIController5,nb.comment,nb.target,nb.replyCommentID,nb.replyCommentParentID);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.ADD_COMMENT.SUBMIT_EDIT,(function(nb){return this.$UFIController24(nb.comment,nb.commentData,nb.target);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.COMMENT.REMOVE_PREVIEW,(function(nb){return za.removePreview(nb.comment,{source:this.source,target:nb.target});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.STORY.SPAM_FETCHED,(function(nb){return za.fetchSpamComments(this.id,nb.commentIDs,nb.parentCommentID,this.$UFIController5.viewas);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.ADD_COMMENT.RETRY_SUBMIT,(function(nb){return ua.retrySubmit(nb.comment,{source:this.source});}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.STORY.CHANGE_ORDER_MODE,(function(nb){this.orderingMode=nb.mode;this.$UFIController8.showLoadingUFI=true;var ob=ib.USER_ACTION;this.render(ob);this.fetchAndUpdate(ob,false);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.STORY.PAGE_IN_COMMENTS,(function(nb){return this.$UFIController25(nb.commentID,nb.direction,nb.nextRange);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.STORY.TOGGLE_REPLIES,(function(nb){var ob=nb.commentID,pb=this.$UFIController8.repliesExpandedMap[ob];if(pb){delete this.$UFIController8.isActiveLoading[ob];this.$UFIController8.repliesExpandedMap[ob]=false;this.render(ib.USER_ACTION);}else this.$UFIController26(ob,null);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.STORY.SHOW_REPLIES,(function(nb){return this.$UFIController26(nb.commentID,nb.replyEntry);}).bind(this)),this.$UFIController20.UFICallbackStore.on(aa.STORY.COMMENTS_ARRIVED,(function(nb){this.$UFIController8.isActiveLoading={};this.$UFIController8.commentIDToFocusOnMount=this.$UFIController27(nb.newOffset,nb.newLength);this.$UFIController8.oldRange={offset:nb.newOffset,length:nb.newLength};setTimeout((function(){return this.$UFIController8.focusedReplyComposer=null;}).bind(this),0);if(nb.source==ib.ENDPOINT_COMMENT_FETCH)h.inform(ya.CommentPager);}).bind(this)));}};mb.prototype.getStores=function(){return this.$UFIController20;};mb.prototype.$UFIController26=function(nb,ob){this.$UFIController8.focusedReplyComposer={replyID:'replycomposer-'+nb,replyEntry:ob||null};var pb=this.commentcounts[nb],qb=Math.min(pb,this.$UFIController5.pagesize),rb={offset:pb-qb,length:qb};this.$UFIController25(nb,jb.BOTTOM,rb);};mb.prototype.$UFIController25=function(nb,ob,pb){var qb=nb!==this.id;this.$UFIController8.isActiveLoading[nb]=ob;if(qb)this.$UFIController8.repliesExpandedMap[nb]=true;if(nb==this.id){var rb=this.$UFIController9[this.orderingMode]||0;this.$UFIController9[this.orderingMode]=rb+1;this.getRange().updateRequestedRange(pb.offset,pb.length);}else{var sb=this.$UFIController10[nb]||0;this.$UFIController10[nb]=sb+1;this.replyRanges[nb].updateRequestedRange(pb.offset,pb.length);}var tb=ib.USER_ACTION;this.fetchAndUpdate(tb,true);this.$UFIController28();this.render(tb);};mb.prototype.$UFIController4=function(){if(this.$UFIController5.livevideographqlcomments)return false;if(!this.$UFIController5.isstreaming)return false;if(this.$UFIController5.feedcarded)return ka.enableStreamingCommentsInFeed;return true;};mb.prototype.$UFIController23=function(){if(!this.$UFIController29)this.$UFIController29=q.byTag(this.root,'form');return this.$UFIController29;};mb.prototype.$UFIController22=function(nb){na.updateState(this.$UFIController7,'isediting',true);na.updateState(this.$UFIController7,'editcommentid',nb.id);};mb.prototype.$UFIController24=function(nb,ob,pb){if(!ob.visibleValue&&!ob.attachedPhoto&&!ob.attachedSticker){this.$UFIController21(nb,pb,cb);}else za.editComment(nb.id,ob.visibleValue,ob.encodedValue,{source:this.$UFIController5.source,target:pb,attachedPhoto:ob.attachedPhoto,attachedSticker:ob.attachedSticker});na.updateStateField(this.$UFIController7,'locallycomposed',nb.id,true);this.$UFIController13();};mb.prototype.$UFIController13=function(){na.updateState(this.$UFIController7,'isediting',false);na.updateState(this.$UFIController7,'editcommentid',null);};mb.prototype.$UFIController21=function(nb,ob,pb){var qb=ja[':fb:ufi:hide-dialog-template'].build();l.setContent(qb.getNode('body'),gb._("Are you sure you want to delete this comment?"));l.setContent(qb.getNode('title'),gb._("Delete Comment"));i.loadModules(["DialogX"],(function(rb){var sb=new rb({modal:true,width:465,addedBehaviors:[n]},qb.getRoot());sb.subscribe('confirm',(function(){za.removeComment(nb.id,{source:this.source,oneclick:false,target:ob});pb();sb.hide();}).bind(this));sb.show();}).bind(this));};mb.prototype.$UFIController30=function(){var nb=this.getToplevelCommentList().count,ob=Math.min(nb,this.$UFIController5.numLazyComments);db(this.ranges,function(pb){return pb.updateRequestedRange(nb-ob,ob);});this.$UFIController8.requestedInitialComments=true;this.fetchAndUpdate(ib.USER_ACTION,false);ma.getFeedbackTarget(this.id,(function(pb){this.$UFIController17(pb);}).bind(this));};mb.prototype.$UFIController17=function(nb){if(nb.orderingmodes&&this.commentcounts[this.id]>=la.minCommentsForOrderingModeSelector&&!this.featuredToplevelCommentList)l.scry(this.root,"^form ._3csb").slice(0,1).forEach((function(ob){s.render(r.createElement(j,{bootloadPlaceholder:r.createElement('div',null),bootloadLoader:m('UFIOrderingModeSelector.react'),onOrderChanged:(function(pb){return this.$UFIController19.dispatch(va.changeOrderingMode(pb));}).bind(this),feedback:nb}),ob);}).bind(this));};mb.prototype.setRange=function(nb,ob){nb.updateRange(ob.offset,ob.length);};mb.prototype.render=function(nb){if(nb!==ib.INITIAL_SERVER)this.$UFIController8.viewerHasInteracted=true;this.$UFIController1('render',nb);if(this.$UFIController8.showLoadingUFI){s.render(this.$UFIController31(),this.root);this.$UFIController3('render',nb);return;}var ob=na.getKeyForInstance(this.$UFIController7,'inlineShare')||{},pb=this.comments.length||!eb(this.feedback.likesentences.current);if((pb&&lb(nb)||ob.toggling)&&this.$UFIController5.feedbackMode!=='never'){this.$UFIController8.isHidden=false;k.expand(this.root,false,'ufi_controller');}if(this.$UFIController5.disableCSSHiding&&this.$UFIController8.isHidden){this.$UFIController3('render',nb);s.unmountComponentAtNode(this.root);return;}if(this.$UFIController5.lazyFetch&&!this.$UFIController8.requestedInitialComments&&!ob.active){s.render(this.$UFIController31(),this.root);this.$UFIController3('render',nb);this.$UFIController30();return;}var qb=this.getRange();if(this.$UFIController11===null)this.$UFIController11=qb.getOffset()+qb.getLength()-1;var rb=this.feedback.replysocialsentencemaxreplies||-1,sb={};sb[this.id]=this.getToplevelCommentList().getDeletedCount();var tb={},ub={},vb={};ub[this.id]=!this.featuredToplevelCommentList;this.comments.forEach((function(dc){var ec=dc.id;sb[ec]=this.getReplyCommentList(ec).getDeletedCount();tb[ec]=this.getToplevelCommentList().getPermalinkForComment(ec);ub[ec]=!this.featuredReplyCommentLists[ec];if(this.repliesMap[ec]){var fc=this.repliesMap[ec].length;vb[ec]=ec===this.feedback.permalinkcommentid||fc>1||fc>0&&dc.interestingReplyOffset===undefined||dc.author===this.feedback.viewerid&&this.getReplyCommentList(ec).getCommentCount()==1;this.repliesMap[ec].forEach((function(gc){var hc=gc.id;tb[hc]=ta.getCommentList(this.id,ec).getPermalinkForComment(hc);}).bind(this));}}).bind(this));var wb={};wb[this.id]=new sa(qb.offset,qb.length);for(var xb in this.replyRanges)wb[xb]=new sa(this.replyRanges[xb].offset,this.replyRanges[xb].length);if(!this.$UFIController8.repliesExpandedMap)this.$UFIController8.repliesExpandedMap=vb;var yb=!!this.featuredToplevelCommentList,zb=this.getToplevelCommentList().getForceNotPageable(),ac=this.$UFIController5.mayLogVPVs&&this.orderingMode===la.UFICommentOrderingMode.FILTERED,bc=this.$UFIController32(nb),cc=r.createElement(fa,{dispatcher:this.$UFIController19,stores:this.$UFIController20},r.createElement(y,{feedback:this.feedback,id:this.id,contextArgs:this.$UFIController5,repliesMap:this.repliesMap,shortenTimestamp:this.shortenTimestamp,commentCounts:this.commentcounts,deletedCounts:sb,availableComments:this.comments,source:this.source,ranges:wb,pageSize:this.$UFIController5.pagesize,authorProfiles:this.authorProfiles,instanceid:this.$UFIController7,loggingOffset:this.$UFIController11,replySocialSentenceMaxReplies:rb,orderingMode:this.orderingMode,hideOrderingModeSelector:yb,commentPermalinks:tb,canAddCommentMap:ub,focusReply:bc,inlineShare:ob,isActiveLoading:this.$UFIController8.isActiveLoading,repliesExpandedMap:this.$UFIController8.repliesExpandedMap,commentIDToFocusOnMount:this.$UFIController8.commentIDToFocusOnMount,hideToplevelPager:zb,isStreaming:this.$UFIController5.isstreaming,shouldLogVPVs:ac,viewerHasInteracted:this.$UFIController8.viewerHasInteracted}));s.render(cc,this.root);o.updateTimeStamps();if(this.$UFIController23())h.inform(ya.Changed,{form:this.$UFIController23()});if(nb!=ib.INITIAL_SERVER&&nb!=ib.COLLAPSED_UFI)h.inform('reflow');this.$UFIController3('render',nb);};mb.prototype.$UFIController32=function(nb){if(nb===ib.INITIAL_SERVER){return this.feedback.permalinkcommentid?{replyID:'replycomposer-'+this.feedback.permalinkcommentid}:null;}else if(this.$UFIController8.focusedReplyComposer)return this.$UFIController8.focusedReplyComposer;return null;};mb.prototype.$UFIController27=function(nb,ob){var pb=this.$UFIController8.oldRange;if(pb.offset!=nb||pb.length!=ob){var qb=nb<pb.offset?pb.length:0;if(qb<ob)return this.comments[qb].id;}return this.$UFIController8.commentIDToFocusOnMount;};mb.prototype.$UFIController28=function(){var nb=this.$UFIController8.isActiveLoading;v.start();Object.keys(nb).filter(function(ob){return nb[ob]!==jb.TOP;}).forEach(function(ob){return v.increment();});};mb.prototype.shouldExecDeferredCallback=function(nb){if(nb.callbackCount<nb.expectedCallbackCount)return false;return true;};mb.prototype.deferredCallback=function(nb,ob){w.getMulti(nb,(function(pb){this.authorProfiles=pb;ob();}).bind(this));};mb.prototype.maybeExecDeferredCallback=function(nb,ob,pb){this.$UFIController8.showLoadingUFI=false;nb.callbackCount++;if(this.shouldExecDeferredCallback(nb))this.deferredCallback(ob,(function(){hb((function(){return this.$UFIController19.dispatch(va.commentsArrived(this.getRange().getOffset(),this.comments.length,pb));}).bind(this));this.render(pb);}).bind(this));};mb.prototype.getNewRange=function(nb,ob,pb){if(ob.isstreaming){var qb=ob.feedcarded?4:50;return {offset:Math.max(0,pb-qb),length:Math.min(qb,pb)};}else{var rb=this.getRange();return kb(rb.getRequestedOffset(),rb.getRequestedLength(),this.commentcounts[this.id],pb,nb);}};mb.prototype.getNewReplyRange=function(nb,ob,pb,qb){var rb=ob.id;if(this.replyRanges[rb]){var sb=this.getReplyRange(rb);return kb(sb.getRequestedOffset(),sb.getRequestedLength(),this.commentcounts[rb],qb,nb);}else if(ob.interestingReplyOffset!==undefined){return {offset:ob.interestingReplyOffset,length:1};}else{var tb=pb.isranked?0:Math.min(qb,2);return {offset:0,length:tb};}};mb.prototype.getRequestedIDsFromFeedback=function(nb){var ob=[];if(nb.reactorids)ob=ob.concat(nb.reactorids);if(nb.actorforpost)ob=ob.concat(nb.actorforpost);return ob;};mb.prototype.fetchAndUpdate=function(nb,ob){ma.getFeedbackTarget(this.id,(function(pb){this.feedback=pb;var qb=this.getToplevelCommentList().getCommentCount(),rb=this.getNewRange(nb,this.$UFIController5,qb),sb=this.getRequestedIDsFromFeedback(this.feedback),tb={expectedCallbackCount:0,callbackCount:0},ub=ob?this.$UFIController9[this.orderingMode]||0:null,vb={numPagerClicks:ub,viewAs:this.$UFIController5.viewas,feedContext:this.$UFIController5.feedcontext};this.getToplevelCommentList().getComments(rb.offset,rb.length,vb,(function(wb,xb,yb){this.commentcounts[this.id]=xb;this.setRange(this.getRange(),wb);this.comments=[];for(var zb in yb)this.comments.push(yb[zb]);sb=sb.concat(da.getAuthors(this.comments));if(this.feedback.isthreaded&&this.comments.length){tb.expectedCallbackCount=this.comments.length;}else tb.expectedCallbackCount=1;if(this.feedback.isthreaded)this.comments.forEach((function(ac){var bc=ac.id,cc=this.getReplyCommentList(bc).getCommentCount(),dc=this.getNewReplyRange(nb,ac,this.feedback,cc),ec=ob?this.$UFIController10[bc]||0:null,fc={numPagerClicks:ec,viewAs:this.$UFIController5.viewas,feedContext:this.$UFIController5.feedcontext};this.getReplyCommentList(bc).getComments(dc.offset,dc.length,fc,(function(gc,hc,ic,jc){this.commentcounts[gc]=ic;this.setRange(this.getReplyRange(gc),hc);this.repliesMap[gc]=[];for(var kc in jc)this.repliesMap[gc].push(jc[kc]);sb=sb.concat(da.getAuthors(this.repliesMap[gc]));this.maybeExecDeferredCallback(tb,sb,nb);}).bind(this,bc,dc,cc));}).bind(this));if(!this.feedback.isthreaded||!this.comments.length)this.maybeExecDeferredCallback(tb,sb,nb);}).bind(this,rb,qb));}).bind(this));};mb.prototype.getToplevelCommentList=function(){if(this.featuredToplevelCommentList)return this.featuredToplevelCommentList;return xa.getCommentList(this.id,this.orderingMode);};mb.prototype.getReplyCommentList=function(nb){if(nb in this.featuredReplyCommentLists)return this.featuredReplyCommentLists[nb];return ta.getCommentList(this.id,nb);};mb.prototype.getRange=function(){if(!(this.orderingMode in this.ranges)){var nb=this.getToplevelCommentList().getCommentCount(),ob=Math.min(nb,this.$UFIController5.defaultNumCommentsToExpand);this.ranges[this.orderingMode]=new sa(nb-ob,ob);}return this.ranges[this.orderingMode];};mb.prototype.getReplyRange=function(nb){if(!(nb in this.replyRanges))this.replyRanges[nb]=new sa();return this.replyRanges[nb];};mb.prototype.$UFIController14=function(){s.unmountComponentAtNode(this.root);this.ufiCentralUpdatesSubscriptions.forEach(ca.unsubscribe,ca);var nb=[this.viewasUFICleanSubscription,this.clearPageSubscription];nb.map(function(ob){return ob&&h.unsubscribe(ob);});this.$UFIController33();if(this.$UFIController18){this.$UFIController18.release();this.$UFIController18=null;}};mb.prototype.$UFIController15=function(){this.$UFIController14();h.unsubscribe(this.clearPageletSubscription);};mb.prototype.$UFIController16=function(){this.$UFIController33();};mb.prototype.$UFIController33=function(){var nb=[this.liveLikeSubscription,this.liveCommentSubscription,this.liveVideoCommentSubscription];nb.map(function(ob){return ob&&ob.unsubscribe();});};mb.prototype.$UFIController31=function(){var nb=na.getKeyForInstance(this.$UFIController7,'inlineShare');return (r.createElement(fa,{dispatcher:this.$UFIController19,stores:this.$UFIController20},r.createElement(y,{feedback:this.feedback,id:this.id,contextArgs:this.$UFIController5,commentCounts:this.commentcounts,inlineShare:nb,loadingComments:true,isStreaming:this.$UFIController5.isstreaming})));};f.exports=mb;},null);
__d("cssURL",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){return "url('"+i.replace(/(\\|\s|\(|\)|'|\")/g,'\\$1')+"')";}f.exports=h;},null);
__d('MentionsTypeaheadViewItem.react',['Badge.react','ImageBlock.react','React','TypeaheadViewItem','cssURL','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=j.createClass({displayName:'MentionsTypeaheadViewItem',mixins:[k.Mixin],propTypes:babelHelpers._extends({},k.propTypes,{ariaDescribedBy:n.string}),render:function(){var p=this.props.entry,q=p.getAuxiliaryData(),r=null;if(q)if(q.verified){r=j.createElement(h,{type:'verified',size:'xsmall'});}else if(q.workUser)r=j.createElement(h,{type:'work',size:'xsmall'});var s=p.getPhoto()?j.createElement('span',{className:"_5u93",style:{backgroundImage:l(p.getPhoto())}}):j.createElement('span',null),t=null;if(p.getSubtitle())t=j.createElement('div',{className:"_5u95"},p.getSubtitle());var u="_5u91"+(this.props.highlighted?' '+"_5u92":'');return (j.createElement('li',{role:'option',className:u,'aria-label':p.getTitle(),'aria-selected':this.props.highlighted,'aria-describedby':this.props.ariaDescribedBy,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight},j.createElement(i,{spacing:'medium'},s,j.createElement('div',null,j.createElement('div',{className:"_5u94"},p.getTitle(),r),t))));}});f.exports=o;},null);
__d('GroupMentionsTypeaheadView.react',['Image.react','MentionsTypeaheadViewItem.react','React','cx','fbt','ix','uniqueID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=j.PropTypes,p=l._("No Results"),q=j.createClass({displayName:'GroupMentionsTypeaheadView',propTypes:{id:o.string,viewProps:o.object,highlightedEntry:o.object,entries:o.array.isRequired,onSelect:o.func.isRequired,onHighlight:o.func,onRenderHighlight:o.func},getInitialState:function(){return {emptyMembersHeaderID:n(),membersHeaderID:n(),nonMembersHeaderID:n()};},_renderItem:function(r,s){var t=r===this.props.highlightedEntry;return (j.createElement(i,{key:r.getUniqueID(),ariaDescribedBy:s,entry:r,highlighted:t,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this._onRenderHighlight}));},_renderHashtagItem:function(r){var s=r===this.props.highlightedEntry;return (j.createElement(i,{key:r.getUniqueID(),entry:r,highlighted:s,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},_renderMembers:function(r){var s=null;if(r.length){s=r.map((function(v,w){var x=w===0?this.state.membersHeaderID:null;return this._renderItem(v,x);}).bind(this));}else s=[j.createElement('li',{className:"_2ph-",key:this.state.emptyMembersHeaderID,role:'option','aria-describedby':this.state.membersHeaderID,'aria-label':p},p)];var t=null;if(this.props.viewProps.member.aux)t=j.createElement('span',{className:"_1knr"},' \u00b7 ',this.props.viewProps.member.aux);var u=[j.createElement('li',{key:this.state.membersHeaderID,className:"_1kns"},this.props.viewProps.member.title,t)];u.push.apply(u,s);return u;},_renderNonMembers:function(r){if(!r.length)return null;var s=null;if(this.props.viewProps.nonMember.aux)s=j.createElement('span',{className:"_1knr"},' \u00b7 ',this.props.viewProps.nonMember.aux);var t=[j.createElement('li',{key:this.state.nonMembersHeaderID,className:"_1kns"},j.createElement(h,{src:m('/images/groups/secret-tag.png'),className:"_1knt"}),this.props.viewProps.nonMember.title,s)];t.push.apply(t,r.map((function(u,v){var w=v===0?this.state.nonMembersHeaderID:null;return this._renderItem(u,w);}).bind(this)));return t;},render:function(){var r=[],s=[],t=[];this.props.entries.forEach(function(x){var y=x.getAuxiliaryData(),z=y.renderType;if(z==='member'){r.push(x);}else if(z==='hashtag'){t.push(x);}else s.push(x);});var u="_5u8_"+(!r.length&&!s.length&&!t.length?' '+"_5u90":''),v=r.length===0&&s.length===0&&t.length>0,w=v?this.props.entries.map(this._renderHashtagItem):this._renderMembers(r).concat(this._renderNonMembers(s));return (j.createElement('ul',{className:u,role:'listbox',id:this.props.id},w));}});f.exports=q;},null);
__d('UFIMentionsInputProxy.react',['Bootloader','React','cx','emptyFunction','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.createClass({displayName:'UFIMentionsInputProxy',getInitialState:function(){return {component:null};},componentDidMount:function(){this._cmdBuffer=this._cmdBuffer||[];if(this.props.initialData)this._bootload();},componentDidUpdate:function(){if(this.state.component)this._drainFnBuffer();},hasEnteredText:function(){return this._fillCmdBuffer({fn:'hasEnteredText',args:[]});},setSignature:function(n){this._fillCmdBuffer({fn:'setSignature',args:[n]});},focus:function(){this._bootload();this._fillCmdBuffer({fn:'focus',args:[]});},submitComment:function(event){this._fillCmdBuffer({fn:'submitComment',args:[event]});},insertMention:function(n){this._fillCmdBuffer({fn:'insertMention',args:[n]});},insertEmoticon:function(n){this._fillCmdBuffer({fn:'insertEmoticon',args:[n]});},_bootload:function(){h.loadModules(["UFIMentionsInput.react"],(function(n){if(this.isMounted())this.setState({component:n});}).bind(this));},_shouldDrainBuffer:function(){return this._cmdBuffer.length>0;},_fillCmdBuffer:function(n){if(this.refs.mentionsinputchild){return this._execCmd(n);}else this._cmdBuffer=this._cmdBuffer.concat([n]);},_drainFnBuffer:function(){if(this._shouldDrainBuffer()){var n=this._cmdBuffer[0];this._execCmd(n);this._cmdBuffer=this._cmdBuffer.slice(1);l(this._drainFnBuffer);}},_execCmd:function(n){var o=this.refs.mentionsinputchild;return o[n.fn].apply(o,n.args);},_renderProxyInput:function(){var n="_1osa mentionsHidden";return (i.createElement('input',{className:n,name:'add_comment_text',ref:'proxyInput',onFocus:this.focus}));},_renderDummy:function(){var n="UFIAddCommentInput _1osb _1osc";return (i.createElement('div',{onFocus:this.focus,onClick:this.focus,onTouchStart:k,onMouseOver:this._bootload},i.createElement('div',{className:n},this._renderProxyInput(),this.props.placeholder)));},render:function(){var n=this.state.component;if(!n)return this._renderDummy();return (i.createElement(n,babelHelpers._extends({key:'mentionsinputchild',ref:'mentionsinputchild'},this.props),this.props.children));}});f.exports=m;},null);
__d('MentionsInputTypeaheadView.react',['MentionsTypeaheadViewItem.react','React','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=i.PropTypes,l=i.createClass({displayName:'MentionsInputTypeaheadView',propTypes:{id:k.string,highlightedEntry:k.object,entries:k.array.isRequired,onSelect:k.func.isRequired,onHighlight:k.func,onRenderHighlight:k.func},_renderItem:function(m){var n=m===this.props.highlightedEntry;return (i.createElement(h,{key:m.getUniqueID(),entry:m,highlighted:n,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},render:function(){var m="_5u8_"+(!this.props.entries.length?' '+"_5u90":'');return (i.createElement('ul',{className:m,role:'listbox',id:this.props.id},this.props.entries.map(this._renderItem)));}});f.exports=l;},null);
__d('ReactComposerIDGenerator',['ReactComposerConstants','uniqueID'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={getID:function(){return h.ID_PREFIX+i();},isComposerID:function(k){return !!k&&k.startsWith(h.ID_PREFIX);}};f.exports=j;},null);
__d('FbFeedHighlight',['JSXDOM','CSS','DOM','DOMScroll','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=1000,n=1000,o=null;function p(){return (h.div({className:"_1usz"},h.div({className:"_1us-"}),h.div({className:"_1us_"}),h.div({className:"_1ut0"}),h.div({className:"_1ut1"})));}var q={highlightAndScrollTo:function(r){q.highlight(r);q.scrollTo(r);},highlightSingle:function(r){var s=p();j.appendContent(r,s);setTimeout(function(){if(o)j.remove(o);o=s;i.addClass(r,"_1ut2");},0);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(function(){j.remove(s);if(s==o)o=null;},m+n);},m+n);},highlight:function(r){var s=q.highlightPermanent(r);setTimeout(function(){i.removeClass(r,"_1ut2");setTimeout(j.remove.bind(null,s),m+m);},m+n);},highlightPermanent:function(r){var s=p();j.appendContent(r,s);setTimeout(i.addClass.bind(null,r,"_1ut2"),0);return s;},scrollTo:function(r){setTimeout(k.scrollTo.bind(null,r),0);}};f.exports=q;},null);
__d('VideoFeedFastPreloadController',['Run','DOMQuery'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=0,k={preload:function(l){if(j<2){l=i.scry(l,'video')[0];if(l instanceof b.HTMLVideoElement){if(!j)h.onBeforeUnload(function(){return k.reset();});l.preload='auto';j+=1;}}},reset:function(){j=0;}};k.reset();f.exports=k;},null);