/*!CK:876633078!*//*1444180950,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["IWL9m"]); }

__d("P2PTransferRiskResult",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SUCCESS:"SUCCESS",UNDER_MANUAL_REVIEW:"UNDER_MANUAL_REVIEW",REQUIRE_VERIFICATION:"REQUIRE_VERIFICATION"};},null,{});
__d('MessengerContextualDialog.react',['ContextualLayerAutoFlipHorizontal','LayerHideOnEscape','ReactAbstractContextualDialog','ReactLayer','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=12,n=k.createClass(j.createSpec({addedBehaviors:[h,i],displayName:'MessengerContextualDialog',shouldSetARIAProperties:false,theme:{wrapperClassName:"_1r_9",arrowDimensions:{offset:m,length:16}}}));f.exports=n;},null);
__d('P2PEditCreditCardDialog.react',['CreditCardFormParam','CurrentEnvironment','Link.react','React','P2PAPI','P2PAPIUtils','P2PCreditCard','P2PCreditCardForm.react','P2PLoadingMask.react','P2PLinkConstants','P2PDialog.react','P2PDialogTitle.react','P2PDialogBody.react','P2PDialogFooter.react','P2PButton.react','P2PText.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';if(c.__markCompiled)c.__markCompiled();var z='fbP2PEditCreditCardDialog_learnMoreSentenceID',aa=k.PropTypes,ba=k.createClass({displayName:'P2PEditCreditCardDialog',propTypes:{asyncRequestState:aa.object.isRequired,creditCard:aa.instanceOf(n).isRequired,onCancel:aa.func.isRequired,onSuccess:aa.func.isRequired,saveButtonText:aa.string,showCancelButton:aa.bool},getInitialState:function(){return {formData:{},isValid:false,loading:false,requestID:'',saveErrors:null};},getDefaultProps:function(){return {saveButtonText:y._("Save"),showCancelButton:true,width:i.messengerdotcom?350:300};},componentWillReceiveProps:function(ca){var da=ca.asyncRequestState?ca.asyncRequestState[this.state.requestID]:null;if(da){this.setState({requestID:''});if(da.error){this.handleOnSaveError(da.error);}else this.handleOnSaveSuccess(da);}},clearSaveErrors:function(){this.setState({saveErrors:null});},onSaveClick:function(ca){var da={},ea=m.genRequestID();da[h.CREDENTIAL_ID]=this.props.creditCard.getCredentialId();this.clearSaveErrors();this.setState({loading:true,requestID:ea});l.updateCreditCard(babelHelpers._extends({requestID:ea},da,this.state.formData));},handleOnSaveSuccess:function(ca){this.props.onSuccess(ca);},onCancelClick:function(ca){this.props.onCancel();},handleOnSaveError:function(ca){this.setState({loading:false,saveErrors:ca});},isSaveDisabled:function(){return !this.state.isValid||this.state.loading;},isCancelDisabled:function(){return this.state.loading;},handleValidation:function(ca,da){this.setState({isValid:ca,formData:da});},getPrefilledFormData:function(){var ca={};ca[h.CARD_NUMBER]=this.props.creditCard.getCreditCardNumberMask();ca[h.CARD_EXPIRATION]=this.props.creditCard.getExpFormattedShort();ca[h.ZIP]=this.props.creditCard.getZipCode();return ca;},handleErrorDialogOKClick:function(){this.clearSaveErrors();},onToggle:function(ca){if(!ca)this.props.onCancel();},render:function(){var ca,da=this.props.text;if(!da)da=y._("Please update the expiration date for your card ending in {card numbers}.",[y.param('card numbers',this.props.creditCard.getCreditCardNumber())]);if(this.props.showCancelButton)ca=k.createElement(v,{use:'default',size:'medium',label:y._("Cancel"),disabled:this.isCancelDisabled(),onClick:this.onCancelClick});return (k.createElement(r,{behaviors:this.props.behaviors,layerHideOnBlur:false,onToggle:this.onToggle,repositionOnUpdate:true,shown:true,width:this.props.width},k.createElement(s,null,y._("Update Debit Card")),k.createElement(t,null,k.createElement(w,{className:"_3-96",type:'primary'},da),k.createElement(o,{onValidation:this.handleValidation,saveErrors:this.state.saveErrors,editMode:true,prefilledFormData:this.getPrefilledFormData(),cscMaxLength:this.props.creditCard.getMaxCSCLength()}),k.createElement(w,{className:"_3-8y",id:z,type:'secondary'},y._("Your payment info is stored securely. {Learn more about p2p link}",[y.param('Learn more about p2p link',k.createElement(j,{'aria-describedby':z,href:q.addDebitCardHelpURI,target:'_blank'},y._("Learn more.")))]))),k.createElement(u,null,ca,k.createElement(v,{use:'confirm',size:'medium',label:this.props.saveButtonText,disabled:this.isSaveDisabled(),onClick:this.onSaveClick})),k.createElement(p,{visible:this.state.loading})));}});f.exports=ba;},null);
__d('P2PConfirmAmountDialog.react',['CurrentEnvironment','React','P2PButton.react','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PLoadingMask.react','P2PText.react','emptyFunction','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=i.PropTypes,t=h.messengerdotcom,u=i.createClass({displayName:'P2PConfirmAmountDialog',propTypes:{amount:s.string,currencySymbol:s.string,onCancel:s.func,onConfirm:s.func,receiverName:s.string},getDefaultProps:function(){return {amount:'',currencySymbol:'',onCancel:q,onConfirm:q,receiverName:s.string};},getInitialState:function(){return {loading:false};},handleCancelClick:function(){this.props.onCancel();},handleConfirmClick:function(){this.setState({loading:true});this.props.onConfirm();},getFormattedAmount:function(){var v=this.props.amount,w=parseFloat(v).toFixed(2);return this.props.currencySymbol+''+w;},render:function(){var v=t?350:300;return (i.createElement(k,{layerHideOnBlur:false,shown:true,width:v},i.createElement(n,{showCloseButton:false},r._("Confirm Payment")),i.createElement(l,null,i.createElement(p,{type:'primary'},r._("Do you want to pay {recipient name} {amount}?",[r.param('recipient name',this.props.receiverName),r.param('amount',this.getFormattedAmount())]))),i.createElement(m,null,i.createElement(j,{label:r._("Cancel"),onClick:this.handleCancelClick,use:'default'}),i.createElement(j,{label:r._("Pay"),onClick:this.handleConfirmClick,use:'confirm'})),i.createElement(o,{visible:this.state.loading})));}});f.exports=u;},null);
__d('P2PGroupSendDialog.react',['CurrentEnvironment','Image.react','MercuryIDs','MessengerContextualDialog.react','P2PActions','P2PGKValues','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PText.react','React','ScrollableArea.react','XUIContextualDialog.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w=r.PropTypes,x=r.createClass({displayName:'P2PGroupSendDialog',propTypes:{amount:w.string,currency:w.string,flyoutAlignment:w.string,onToggle:w.func.isRequired,participants:w.arrayOf(w.object).isRequired,threadID:w.string.isRequired,threadFBID:w.string.isRequired},componentDidMount:function(){if(this.props.amount){this.log(o.UI_ACTN_INITIATE_GROUP_SEND_TRIGGER,{raw_amount:this.props.amount,currency:this.props.currency});}else this.log(o.UI_ACTN_INITIATE_GROUP_SEND);},log:function(y,z){n.log(y,babelHelpers._extends({www_event_flow:p.UI_FLOW_P2P_GROUP_SEND},z));},_handleToggle:function(y){this.props.onToggle(y);this.log(o.UI_ACTN_GROUP_SEND_CANCELLED);},_handleBlur:function(){this._handleToggle(false);},renderParticipantRow:function(y){var z=h.messengerdotcom,aa=z?32:40,ba=!y.p2p_eligible,ca;if(ba)ca=r.createElement(q,{className:"_4cof",type:'primary'},v._("Isn't able to receive money right now"));return (r.createElement('li',{className:"_4cog"+(ba?' '+"_4coh":''),key:y.id,onClick:this.handleGroupThreadClicked.bind(this,y)},r.createElement('div',{className:"_4coi"},r.createElement(i,{className:"_4coj",height:aa,src:y.big_image_src||y.image_src,width:aa})),r.createElement('div',{className:"_4cok"},r.createElement(q,{className:"_4col",type:'primary'},y.name),ca)));},renderGroupList:function(){return (r.createElement(s,{height:178},r.createElement('ul',null,this.props.participants.map(this.renderParticipantRow))));},handleGroupThreadClicked:function(y){if(!y.p2p_eligible)return;this.props.onToggle(false);if(m.P2PGroupSendToGroupThread){l.chatSendViewOpened({amount:this.props.amount,threadID:this.props.threadID,groupSendRecipient:y,groupThreadFBID:this.props.threadFBID});}else{var z=j.getThreadIDFromParticipantID(y.id);l.chatSendViewOpened({amount:this.props.amount,threadID:z,groupThreadFBID:this.props.threadFBID});}this.log(o.UI_ACTN_GROUP_SEND_RECIPIENT_PICKED,{raw_amount:this.props.amount,currency:this.props.currency,object_id:y.userID});},render:function(){var y=h.messengerdotcom,z=y?k:t,aa=y?302:280;return (r.createElement(z,{alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:y?'right':'left',context:this.props.context,onBlur:this._handleBlur,onToggle:this._handleToggle,shown:true,width:aa,position:'above'},r.createElement('div',{className:"_4com"+(y?' '+"_4con":'')},r.createElement(q,{className:"_4coo",type:'primary',weight:'bold'},v._("Who are you paying?")),this.renderGroupList())));}});f.exports=x;},null);
__d('P2PGroupSendReceiptDialog.react',['CurrentEnvironment','Image.react','Link.react','P2PAmountUtils','P2PButton.react','P2PBigAmount.react','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PLinkConstants','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PText.react','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';if(c.__markCompiled)c.__markCompiled();var z=w.PropTypes,aa=w.createClass({displayName:'P2PGroupSendReceiptDialog',propTypes:{amount:z.string.isRequired,onClose:z.func.isRequired,receiver:z.object.isRequired,sender:z.object.isRequired},componentDidMount:function(){this.log(t.UI_ACTN_3RD_PARTY_RECEIPT_SHOWN,{raw_amount:this.props.amount});},log:function(ba,ca){s.log(ba,babelHelpers._extends({www_event_flow:u.UI_FLOW_P2P_GROUP_SEND},ca));},handleClose:function(){this.log(t.UI_ACTN_3RD_PARTY_RECEIPT_DISMISSED);this.props.onClose();},renderParticipantRow:function(ba,ca){var da;if(ca){da=y._("From");}else da=y._("To");return (w.createElement('li',{className:"_2chg",key:ba.id},w.createElement('div',{className:"_2chh"},w.createElement(j,{href:ba.profile_uri,onClick:this.props.onClose},w.createElement(i,{height:50,src:ba.picture,width:50}))),w.createElement('div',{className:"_2chi"},w.createElement(v,{type:'primary'},w.createElement(v,{type:'secondary'},da),ba.full_name))));},render:function(){var ba=h.messengerdotcom,ca=ba?380:360;return (w.createElement(n,{className:ba?"_bpv":'',layerHideOnBlur:false,onToggle:this.props.onClose,width:ca},w.createElement(q,null,y._("Payment Details")),w.createElement(o,null,w.createElement('ul',null,this.renderParticipantRow(this.props.sender,true),this.renderParticipantRow(this.props.receiver,false)),w.createElement('div',{className:"_bpy"},w.createElement(m,{amount:k.sanitizeAmount(this.props.amount),size:'large'})),w.createElement(v,{className:"_bpt",size:'small',type:'secondary'},y._("You can send money to friends in groups."),' ',w.createElement(j,{href:r.helpCenterURI,target:'_blank'},y._("Learn More")))),w.createElement(p,null,w.createElement(l,{label:y._("OK"),onClick:this.handleClose,type:'primary'}))));}});f.exports=aa;},null);
__d('P2PSendMoneyAmountInput.react',['CurrentEnvironment','React','ReactDOM','XUIError.react','P2PAmountUtils','P2PText.react','cx','emptyFunction','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=i.PropTypes,r=h.messengerdotcom,s=i.createClass({displayName:'P2PSendMoneyAmountInput',propTypes:{currencySymbol:q.string,onInputChange:q.func,value:q.string},getDefaultProps:function(){return {currencySymbol:'$',onInputChange:o,value:''};},getInitialState:function(){return {inputError:null,maxInputWidth:r?236:100,value:this.props.value,width:''};},componentDidMount:function(){this.updateAmount(this.state.value);this.initDelayedFocus();},initDelayedFocus:function(){setTimeout(this.focus);},focus:function(){var t,u=this.state.value,v=0;if(this.isMounted()&&this.refs.textInput){t=j.findDOMNode(this.refs.textInput);t.focus();if(u){v=u.length;t.setSelectionRange(v,v);}}},handleAmountInputChange:function(t){var u=t.target.value;this.clearInputError();this.updateAmount(u);},clearInputError:function(){this.setState({inputError:null});},setInputError:function(t){this.setState({inputError:t});},updateAmount:function(t){var u=true,v,w=l.isAmountOverLegalLimit(t);t=l.sanitizeAmount(t);v=parseFloat(t);if(w){u=false;this.setInputError(p._("Please enter a smaller amount"));}var x=t.split('.'),y=x[0],z=x[1];if(z!==undefined){t=(y&&parseFloat(y)!==0?y:'0')+'.'+z.substr(0,2);}else if(y&&parseFloat(y)===0)t='0';this.setValue(t);v=parseFloat(t);u=u&&!isNaN(v)&&v>0;this.props.onInputChange(t,u);},setValue:function(t){this.setState({value:t},this.updateWidth);},updateWidth:function(){var t=this.getMockWidth();if(t)this.setState({width:Math.min(t,this.state.maxInputWidth)});},getMockWidth:function(){return j.findDOMNode(this.refs.mock_input).offsetWidth;},render:function(){var t;if(r&&!this.state.value.length)t=i.createElement('div',{ref:'placeholder_input',className:"_1-sv"},'0');return (i.createElement('div',{className:"_ipw"+(r?' '+"_1-sw":'')},i.createElement('label',null,i.createElement(m,{className:"_3-91 _1-sx",display:'inline',type:'primary'},p._("Enter Amount")),i.createElement('div',{className:"_4puh"+(!this.state.value.length?' '+"_1-sy":'')},i.createElement('div',{className:"_5fbp"},this.props.currencySymbol),t,i.createElement('div',{ref:'mock_input',className:"_5fbs"},this.state.value),i.createElement(k,{xuiError:this.state.inputError},i.createElement('span',{className:"_1-sz"},i.createElement('input',{className:"_5fbv",onChange:this.handleAmountInputChange,ref:'textInput',style:{width:this.state.width},value:this.state.value})))))));}});f.exports=s;},null);
__d('P2PSendMoneyDialog.react',['Arbiter','CreditCardFormParam','CurrentEnvironment','Image.react','ImageBlock.react','Link.react','MessengerContextualDialog.react','P2PAPI','P2PAddCreditCardDialog.react','P2PButton.react','P2PCreditCardStore','P2PChooseCreditCardForm.react','P2PConfirmAmountDialog.react','P2PEditCreditCardDialog.react','P2PLinkConstants','P2PLoadingMask.react','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PSendMoneyAmountInput.react','P2PText.react','P2PVerifyCreditCardDialog.react','React','ReactDOM','ReactLayeredComponentMixin','XUIContextualDialog.react','cx','fbt','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja){'use strict';if(c.__markCompiled)c.__markCompiled();var ka=da.PropTypes,la=j.messengerdotcom,ma=ia._("Change"),na=ia._("Add Debit Card"),oa=100,pa=da.createClass({displayName:'P2PSendMoneyDialog',mixins:[fa],propTypes:{amount:ka.string,currency:ka.string.isRequired,currencySymbol:ka.string.isRequired,groupThreadFBID:ka.string,flyoutAlignment:ka.string,onError:ka.func,onSendSuccess:ka.func,onToggle:ka.func,platformData:ka.object,receiver:ka.object},getDefaultProps:function(){return {amount:'',onError:ja,onSendSuccess:ja,onToggle:ja,receiver:{}};},getInitialState:function(){var qa=r.getAll();return {asyncRequestState:r.getAsyncRequestState(),addCreditCardDialogShown:false,amount:this.props.amount,creditCards:qa,confirmAmountDialogShown:false,isAmountValid:false,loading:false,selectedCard:qa[0],showChooseCreditCardForm:false,verifyCreditCardDialogShown:false};},_isAmountVerified:false,passwordCancelSubscribeToken:null,log:function(qa,ra){x.log(qa,babelHelpers._extends({www_event_flow:z.UI_FLOW_P2P_SEND,object_id:this.props.receiver.userID},this.getPlatformLoggingData(),ra));},componentWillUnmount:function(){if(this.passwordCancelSubscribeToken!==null){h.unsubscribe(this.passwordCancelSubscribeToken);this.passwordCancelSubscribeToken=null;}if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}},componentWillMount:function(){this.creditCardStoreSub=r.addListener('change',this.onCreditCardStoreChange);this.log(y.UI_ACTN_INITIATE_SEND);},getPlatformLoggingData:function(){var qa=this.props.platformData&&this.props.platformData.loggingData;if(qa)return {platform_logging_data:qa};return null;},onAmountInputChange:function(qa,ra){this.setState({amount:qa,isAmountValid:ra});},onCreditCardStoreChange:function(){var qa=r.getAll(),ra;if(this.state.selectedCard)ra=qa.filter((function(sa){return (sa.getCredentialId()===this.state.selectedCard.getCredentialId());}).bind(this))[0];if(!ra)ra=qa[0];this.setState({asyncRequestState:r.getAsyncRequestState(),creditCards:qa,selectedCard:ra});},shouldShowConfirmAmountDialog:function(){var qa=parseFloat(this.state.amount);return (!this._isAmountVerified&&qa>=oa);},shouldShowVerifyCreditCardDialog:function(){return !this.state.selectedCard.getIsVerified();},shouldShowEditCreditCardDialog:function(){return this.state.selectedCard.isExpired();},handleSendClick:function(qa){if(this.isSendButtonDisabled())return false;this.log(y.UI_ACTN_SEND_CLICKED,{raw_amount:this.state.amount,currency:this.props.currency});this._isAmountVerified=false;this.initiatePayment();},initiatePayment:function(){if(this.shouldShowConfirmAmountDialog()){this.hideAllDialogs();this.setState({confirmAmountDialogShown:true});this.log(y.UI_ACTN_CONFIRM_AMOUNT,{raw_amount:this.state.amount,currency:this.props.currency});return;}else if(this.shouldShowEditCreditCardDialog()){this.hideAllDialogs();this.setState({editCreditCardDialogShown:true});this.log(y.UI_ACTN_EDIT_CARD,{raw_amount:this.state.amount,currency:this.props.currency});return;}else if(this.shouldShowVerifyCreditCardDialog()){this.hideAllDialogs();this.setState({verifyCreditCardDialogShown:true});this.log(y.UI_ACTN_VERIFY_CSC,{raw_amount:this.state.amount,currency:this.props.currency});return;}this.createTransaction();},shouldShowLoading:function(){return (!this.state.addCreditCardDialogShown&&!this.state.confirmAmountDialogShown&&!this.state.verifyCreditCardDialogShown&&!this.state.editCreditCardDialogShown);},createTransaction:function(){var qa={};this.setState({loading:this.shouldShowLoading()});qa[i.CREDENTIAL_ID]=this.state.selectedCard.getCredentialId();qa.amount=this.state.amount;qa.receiverId=this.props.receiver.userID;if(this.props.groupThreadFBID)qa.group_thread_fbid=this.props.groupThreadFBID;if(this.props.platformData)qa.platform_context_id=this.props.platformData.platformContextID;this.passwordCancelSubscribeToken=h.subscribeOnce('PasswordReauthDialogCancelClick',this.handlePasswordReauthDialogCancelClick);o.createTransaction({formData:qa,error:this.setCreateTransferError,success:this.setCreateTransferSuccess});this.log(y.UI_ACTN_CONFIRM_SEND,{raw_amount:this.state.amount,currency:this.props.currency});},hideAllDialogs:function(){this.setState({addCreditCardDialogShown:false,confirmAmountDialogShown:false,verifyCreditCardDialogShown:false,editCreditCardDialogShown:false});},setCreateTransferError:function(qa){if(this.isMounted()){this.hideAllDialogs();this.setState({loading:false});}this.props.onError(qa);this.log(y.UI_ACTN_SEND_FAIL);},setCreateTransferSuccess:function(qa){if(this.isMounted()){this.setState({loading:false});this.hideAllDialogs();}this.props.onSendSuccess(qa);this.log(y.UI_ACTN_SEND_SUCCESS);},handlePasswordReauthDialogCancelClick:function(){this.passwordCancelSubscribeToken=null;this.setState({loading:false});this.hideAllDialogs();},onAddCreditCardCancel:function(){this.setState({addCreditCardDialogShown:false});},onAddCreditCardSuccess:function(qa){var ra=this.state.creditCards.filter(function(sa){var ta=sa.getCredentialId();return (qa[i.CREDENTIAL_ID]===ta);})[0];this.setState({selectedCard:ra});if(this.state.isAmountValid){this.initiatePayment();}else{this.setState({addCreditCardDialogShown:false});this.focusAmountInput();}},onEditCreditCardSuccess:function(){this.initiatePayment();},onEditCreditCardCancel:function(){this.setState({editCreditCardDialogShown:false});},focusAmountInput:function(){if(this.refs.send_money_amount_input)ea.findDOMNode(this.refs.send_money_amount_input).focus();},_handleToggle:function(qa){this.props.onToggle(qa);if(!this.state.loading)this.log(y.UI_ACTN_SEND_MONEY_CANCELLED);},_handleBlur:function(){this._handleToggle(false);},handleAddCreditCardClick:function(){this.setState({addCreditCardDialogShown:true,showChooseCreditCardForm:false});this.log(y.UI_ACTN_CHANGE_CARD);},handleBackClick:function(){this.setState({showChooseCreditCardForm:false},function(){this.focusAmountInput();});},handleChooseCardNextClick:function(){var qa=this.refs.choose_credit_card_form.getSelectedCard();this.setState({selectedCard:qa,showChooseCreditCardForm:false},function(){this.focusAmountInput();});},handleAddCardNextClick:function(){this.setState({addCreditCardDialogShown:true});},handleChangeSelectedCardClick:function(){var qa={};if(this.state.creditCards.length===1){qa.addCreditCardDialogShown=true;this.log(y.UI_ACTN_CHANGE_CARD);}else{qa.showChooseCreditCardForm=true;this.log(y.UI_ACTN_INITIATE_CHOOSE_CARD);}this.setState(qa);},onConfirmAmountCancel:function(){this.setState({confirmAmountDialogShown:false});},onConfirmAmountSuccess:function(){this._isAmountVerified=true;this.initiatePayment();},onVerifyCreditCardSuccess:function(){this.initiatePayment();},onVerifyCreditCardCancel:function(){this.setState({verifyCreditCardDialogShown:false});},isSendButtonDisabled:function(){return (!this.state.isAmountValid||!this.state.creditCards.length||this.state.loading);},isAddCardNextButtonDisabled:function(){return !this.state.isAmountValid;},renderAddDebitCardLink:function(){return (da.createElement(ba,{className:"_42h3",type:'secondary',ref:'send_money_dialog_add_card_text'},da.createElement(m,{className:"_49nm",href:'#',onClick:this.handleAddCreditCardClick},na)));},renderSelectedCard:function(){var qa=this.state.selectedCard;return (da.createElement(ba,{className:"_21x5",size:'small',type:'primary'},da.createElement('div',{className:"_49nn"},qa.getName()),da.createElement('div',{className:"_21wx"},qa.getCreditCardNumberFormatted()),da.createElement('div',{className:"_21ww"},'\u00b7'),da.createElement(m,{className:"_21wy",onClick:this.handleChangeSelectedCardClick,href:'#'},ma)));},renderFormButtons:function(){var qa;if(!this.state.creditCards.length){qa=this.renderAddCardNextButton();}else if(this.state.showChooseCreditCardForm){qa=da.createElement('div',null,this.renderChooseCardBackButton(),this.renderChooseCardNextButton());}else qa=this.renderPayButton();return qa;},renderChooseCardBackButton:function(){return (da.createElement(q,{className:"_2abj",label:ia._("Back"),onClick:this.handleBackClick,ref:'back_button',size:'medium',type:'secondary',use:'default'}));},renderAddCardNextButton:function(){return (da.createElement(q,{className:"_5p-b",disabled:this.isAddCardNextButtonDisabled(),label:ia._("Next"),onClick:this.handleAddCardNextClick,ref:'add_card_next_button',size:'medium',type:'primary',use:'default'}));},renderChooseCardNextButton:function(){return (da.createElement(q,{label:ia._("Next"),onClick:this.handleChooseCardNextClick,ref:'choose_card_next_button',size:'medium',type:'primary',use:'confirm'}));},renderPayButton:function(){return (da.createElement(q,{className:"_21x6 _5p-b",disabled:this.isSendButtonDisabled(),label:ia._("Pay"),onClick:this.handleSendClick,ref:'send_button',size:'medium',type:'primary',use:'confirm'}));},renderPaymentDetails:function(){var qa;if(this.state.creditCards.length){if(this.state.showChooseCreditCardForm){qa=this.renderAddDebitCardLink();}else qa=this.renderSelectedCard();}else qa=da.createElement('div',{className:"_2abl"},da.createElement(ba,{type:'secondary',ref:'send_money_dialog_add_card_next_text'},ia._("Sending money is free and secure")));return qa;},renderSendMoneyForm:function(){var qa=la?32:40;return (da.createElement('div',null,da.createElement('div',{className:"_49no _2pi4",ref:'send_money_dialog_title'},da.createElement(l,{spacing:'large'},da.createElement(k,{className:"_5p-i",height:qa,src:this.props.receiver.big_image_src||this.props.receiver.image_src,width:qa}),da.createElement('div',{className:"_3-8w"},da.createElement(ba,{type:'secondary'},ia._("Send to")),da.createElement(ba,{className:"_5p-j",size:'small',type:'primary',weight:'bold'},this.props.receiver.name))),da.createElement(m,{className:"_49np",href:v.helpCenterURI,target:'_blank'})),da.createElement('div',{className:"_2abm"},this.renderMainContainer()),da.createElement('div',{className:"_21w-"+(la?' '+"_4eb_":'')},da.createElement('div',{className:"_5p-k"},da.createElement('div',{className:"_21x4"},this.renderPaymentDetails()),da.createElement('div',{className:"_4zf-"},this.renderFormButtons())))));},renderMainContainer:function(){var qa;if(this.state.showChooseCreditCardForm){qa=da.createElement('div',{className:"_xn7"},da.createElement(s,{creditCards:this.state.creditCards,selectedCard:this.state.selectedCard,ref:'choose_credit_card_form'}));}else qa=da.createElement('div',{className:"_2abn"},da.createElement(aa,{currencySymbol:this.props.currencySymbol,onInputChange:this.onAmountInputChange,ref:'send_money_amount_input',value:this.state.amount}));return qa;},renderLayers:function(){var qa={},ra,sa;if(this.state.addCreditCardDialogShown){if(this.state.isAmountValid){sa=ia._("Please enter a debit card to send {Amount} to {Recipient name}. Credit cards can't be used.",[ia.param('Amount',this.props.currencySymbol+this.state.amount),ia.param('Recipient name',this.props.receiver.short_name)]);ra=ia._("Pay");}qa.addCreditCard=da.createElement(p,{eventFlow:z.UI_FLOW_P2P_SEND,loggingData:this.getPlatformLoggingData(),onCancel:this.onAddCreditCardCancel,onSuccess:this.onAddCreditCardSuccess,ref:'send_money_dialog_add_credit_card_form',saveButtonText:ra,showCancelButton:!!la,text:sa});}else if(this.state.confirmAmountDialogShown){qa.confirmAmount=da.createElement(t,{amount:this.state.amount,currencySymbol:this.props.currencySymbol,onCancel:this.onConfirmAmountCancel,onConfirm:this.onConfirmAmountSuccess,receiverName:this.props.receiver.short_name});}else if(this.state.verifyCreditCardDialogShown){qa.verifyCreditCard=da.createElement(ca,{asyncRequestState:this.state.asyncRequestState,creditCard:this.state.selectedCard,isSending:true,onCancel:this.onVerifyCreditCardCancel,onSuccess:this.onVerifyCreditCardSuccess});}else if(this.state.editCreditCardDialogShown)qa.confirmAmount=da.createElement(u,{asyncRequestState:this.state.asyncRequestState,creditCard:this.state.selectedCard,onCancel:this.onEditCreditCardCancel,onSuccess:this.onEditCreditCardSuccess});return qa;},render:function(){var qa=la?n:ga,ra=la?286:260;return (da.createElement(qa,{alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:la?'right':'left',context:this.props.context,onBlur:this._handleBlur,onToggle:this._handleToggle,shown:true,width:ra,position:this.props.position||'above'},da.createElement('div',{className:"_21x9"+(la?' '+"_1pka":'')},this.renderSendMoneyForm(),da.createElement(w,{ref:'send_money_dialog_loader',visible:this.state.loading}))));}});f.exports=pa;},null);