/*!CK:3458211271!*//*1444361905,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["e61ox"]); }

__d("TimelineSeenStateConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FT_TIMELINE_HASH_IDENTIFIER_KEY:"thid"};},null,{});
__d("TimelineViewportTrackingLogType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={IMPRESSION:"impression",DURATION:"duration"};},null,{});
__d('TimelineContextItemLogger',['BanzaiLogger','Event','FBJSON','Parent','Run','cx','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o='MTimelineXContextItemsLoggerConfig',p='impression',q='click',r='context_item_url',s='event',t="_md0",u=[];function v(x,y,z){var aa=j.parse(x.getAttribute('data-store'));aa[s]=y;if(z)aa[r]=z;h.log(o,aa);}var w={logWhenVisible:function(x){if(!u.length)l.onLeave(function(){u=[];});u.push(x);},logWhenClicked:function(x){n(i.listen(x,'click',function(y){var z=y.getTarget();if(z.nodeName!=='A')return;var aa=k.byClass(z,t);aa&&v(aa,q,z.href);}));},listenToExpand:function(x){n(x.addListener('expanded',function(){while(u.length)v(u.pop(),p);}));}};f.exports=w;},null);
__d('TimelineCapsule',['Arbiter','CSS','DataStore','DOM','DOMQuery','DOMScroll','Parent','TimelineConstants','TimelineLegacySections','Vector','$','csx','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=(function(){var v={},w={};function x(z){l.scry(z,"._3ram").forEach(function(aa){var ba=aa.getAttribute('data-endmarker'),ca=aa.getAttribute('data-pageindex'),da=function(){if(!aa.parentNode)return;j.set(o.DS_LOADED,z.id,ca);k.remove(aa);h.inform(o.SECTION_FULLY_LOADED,{scrubberKey:ba,pageIndex:ca,capsuleID:z.id,childCount:z.childNodes.length});};if(p.get(ba)){da();}else var ea=h.subscribe(o.SECTION_REGISTERED,function(fa,ga){if(ga.scrubberKey===ba){da();ea.unsubscribe();}});});h.inform('TimelineCapsule/balanced',{capsule:z});}function y(z,aa){var ba=n.byAttribute(z,'data-size');if(ba)if(i.hasClass(z.parentNode,'timelineReportContent')){aa(z);}else aa(ba);}return {removeUnit:function(z){y(z,function(aa){k.remove(aa);});},removeUnitWithID:function(z){u.removeUnit(r(z));},hideUnit:function(z){y(z,function(aa){i.addClass(aa,'fbTimelineColumnHidden');});},undoHideUnit:function(z,aa){k.remove(n.byClass(aa,'hiddenText'));y(z,function(ba){i.removeClass(ba,'fbTimelineColumnHidden');});},unplacehold:function(z){var aa=r(z);aa.style.top=null;i.removeClass(aa,'visiblePlaceholder');i.removeClass(aa,'placeholder');var ba=n.byClass(aa,'fbTimelineCapsule');delete v[ba.id][z];u.balanceCapsule(ba);},scrollToCapsule:function(z){if(!w.hasOwnProperty(z.id)){var aa=q.getElementPosition(z.parentNode);m.scrollTo(new q(q.getScrollPosition().x,aa.y-o.SCROLL_TO_OFFSET,'document'));w[z.id]=true;}},loadTwoColumnUnits:function(z,aa,ba){var ca=r(z);t(function(){var da=n.byClass(ca,'fbTimelineSection');if(da&&!aa){var ea=l.find(ca,"._2t4u"),fa=l.find(ca,"._2t4v"),ga=fa.offsetHeight-ea.offsetHeight;j.set(o.DS_COLUMN_HEIGHT_DIFFERENTIAL,ba,ga);}},x.bind(null,ca));}};})();f.exports=u;},null);
__d('TimelineSection',['Arbiter','CSS','DOM','Parent','ScrollingPager','TimelineConstants','TimelineLegacySections','TimelineScrubberKey','UIPagelet'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();function q(r,s,t,u,v){'use strict';this.$TimelineSection1=r;this.$TimelineSection2=u;this.$TimelineSection3=s;this.$TimelineSection4=null;this.$TimelineSection5=null;this.$TimelineSection6=true;this.$TimelineSection7=true;this.$TimelineSection8=s!==o.RECENT_ACTIVITY;this.$TimelineSection9=v;this.$TimelineSection10=t;this.$TimelineSection11={};this.$TimelineSection12=false;this.$TimelineSection13=[];this.$TimelineSection14=false;}q.prototype.load=function(r,s){'use strict';if(this.$TimelineSection2){this.activateContentScrollLoad();return;}var t=this.$TimelineSection10;h.inform(m.SECTION_LOADING,{data:t,scrubberKey:this.$TimelineSection3});this.$TimelineSection2=true;i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');var u=n.shouldForceNoFriendActivity();t=babelHelpers._extends({},t,{highlight_unit_data:r,parent_key:this.$TimelineSection4,force_no_friend_activity:u});i.addClass(this.$TimelineSection1,'fbTimelineSectionLoading');this.$TimelineSection6=false;this.activateContentScrollLoad();if(s){this.$TimelineSection1.style.minHeight=window.innerHeight+'px';h.subscribeOnce(m.SECTION_FULLY_LOADED,(function(v,w){if(w.scrubberKey===this.$TimelineSection3){this.$TimelineSection1.style.minHeight='';n.destroyOnVisible(this.$TimelineSection3);}}).bind(this));}n.addLoadPagelet(this.$TimelineSection3,p.loadFromEndpoint('ProfileTimelineSectionPagelet',this.$TimelineSection1.id,t,{usePipe:true,jsNonblock:true,constHeight:true,append:false}));n.collapsePlaceHolderHeaders();};q.prototype.preload=function(){'use strict';i.addClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');var r=j.find(this.$TimelineSection1,'span.sectionLabel');if(r.getAttribute('data-original-label')){j.setContent(r,r.getAttribute('data-original-label'));r.removeAttribute('data-original-label');}};q.prototype.unload=function(){'use strict';if(!this.$TimelineSection2||!this.$TimelineSection8)return;this.$TimelineSection2=false;n.cancelLoadPagelet(this.$TimelineSection3);i.addClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');if(this.$TimelineSection1.nextSibling&&i.hasClass(this.$TimelineSection1.nextSibling,'fbTimelineSection')){j.setContent(this.$TimelineSection1,this.$TimelineSection1.nextSibling);i.show(this.$TimelineSection1.firstChild);}else j.empty(this.$TimelineSection1);this.deactivateScrollLoad();};q.prototype.canScrollLoad=function(){'use strict';return this.$TimelineSection6;};q.prototype.activateScrollLoad=function(){'use strict';this.$TimelineSection6=true;i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');i.addClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');var r=n.getOnVisible(this.$TimelineSection3);if(r)r.reset();return this;};q.prototype.deactivateScrollLoad=function(){'use strict';if(!this.$TimelineSection2){this.$TimelineSection6=false;i.removeClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded');i.addClass(this.$TimelineSection1,'fbTimelineTimePeriodSuppressed');var r=n.getOnVisible(this.$TimelineSection3);if(r)r.remove();}j.scry(this.$TimelineSection1,'.fbTimelineSectionExpandPager').forEach(function(s){var t=l.getInstance(s.id);t&&t.removeOnVisible();var u=k.byClass(s,'stat_elem');if(u)i.removeClass(u,'async_saving');});return this;};q.prototype.canContentScrollLoad=function(){'use strict';return this.$TimelineSection7;};q.prototype.activateContentScrollLoad=function(){'use strict';this.$TimelineSection7=true;return this;};q.prototype.deactivateContentScrollLoad=function(){'use strict';this.$TimelineSection7=false;return this;};q.prototype.getNode=function(){'use strict';return this.$TimelineSection1;};q.prototype.getScrubberKey=function(){'use strict';return this.$TimelineSection3;};q.prototype.getParentKey=function(){'use strict';return this.$TimelineSection4;};q.prototype.setParentKey=function(r){'use strict';this.$TimelineSection4=r;return this;};q.prototype.addSubSection=function(r,s){'use strict';if(!Array.isArray(this.$TimelineSection5))this.$TimelineSection5=[];if(Array.isArray(this.$TimelineSection5))this.$TimelineSection5[r]=s;return this;};q.prototype.getSubSections=function(){'use strict';return this.$TimelineSection5;};q.prototype.isLoaded=function(){'use strict';return this.$TimelineSection2;};q.prototype.isRightColumnFinished=function(){'use strict';return this.$TimelineSection12;};q.prototype.setRightColumnFinished=function(){'use strict';this.$TimelineSection12=true;return this;};q.prototype.getHistoricUnitCount=function(){'use strict';return this.$TimelineSection9;};q.prototype.setExpandLoadData=function(r){'use strict';this.$TimelineSection11=r;return this;};q.prototype.expand=function(r){'use strict';if(!this.$TimelineSection2)return this;var s=j.find(this.$TimelineSection1,'.fbTimelineSectionExpander');i.addClass(s.firstChild,'async_saving');r&&i.addClass(r,'async_saving');h.inform(m.SECTION_EXPAND,this.$TimelineSection3);j.scry(this.$TimelineSection1,'.fbTimelineCapsule').forEach(j.remove);this.$TimelineSection11.new_expand=true;n.cancelLoadPagelet(this.$TimelineSection3);n.addLoadPagelet(this.$TimelineSection3,p.loadFromEndpoint('ProfileTimelineSectionPagelet',s.id,this.$TimelineSection11,{usePipe:true,jsNonblock:true,constHeight:true}));return this;};q.prototype.isPermalinkPeriod=function(){'use strict';return !!this.$TimelineSection10.is_permalink_period;};q.prototype.isHidden=function(){'use strict';return this.$TimelineSection14;};q.prototype.hide=function(){'use strict';this.$TimelineSection14=true;i.hide(j.find(this.$TimelineSection1,'.fbTimelineSection'));return this;};q.prototype.isHiddenFromView=function(){'use strict';return (!this.$TimelineSection2||this.$TimelineSection14||i.hasClass(this.$TimelineSection1,'fbTimelineTimePeriodUnexpanded'));};q.prototype.hasPendingCallbacks=function(){'use strict';return this.$TimelineSection13.length>0;};q.prototype.queueDisplayCallback=function(r,s){'use strict';this.$TimelineSection13[r]=s;return this;};q.prototype.runPendingDisplayCallbacks=function(){'use strict';while(this.hasPendingCallbacks()){var r=this.$TimelineSection13.shift();if(r)r();}return this;};f.exports=q;},null);
__d('TimelineContentLoader',['Arbiter','CSS','DOM','DOMScroll','Event','OnVisible','Parent','ScrollingPager','setImmediate','TimelineComponentKeys','TimelineConstants','TimelineController','TimelineDOMID','TimelineGating','TimelineLegacySections','TimelineScrubberKey','TimelineSection','TimelineSmartInsert','Vector','$','arrayContains','createArrayFromMixed','csx','debounce','ge','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){if(c.__markCompiled)c.__markCompiled();var ha=false,ia=null,ja={},ka={},la=[],ma={},na=null,oa=null,pa=80,qa=250,ra=500;function sa(){if(ha)return;s.register(q.CONTENT,ya);oa=h.subscribe(r.SECTION_EXPAND,function(za,ab){ya.navigateToSection(ab);});ha=true;}var ta=ea(function(za,ab,bb){var cb=v.get(za).getHistoricUnitCount();ab-=cb;bb-=1;if(cb==-1||bb<=0||ab<0)return;var db=ya.getNextSectionKey(za);if(db){v.get(db).load();ta(db,ab,bb);}},ra);function ua(za,ab){if(!ab)ab=0;if(ab<pa&&!za())setTimeout(ua.bind(null,za,ab+1),qa);}function va(za){ua(function(){if(za===w.WAY_BACK)return true;var ab=ya.getNextSectionKey(za);if(ab){xa(ab);return true;}return false;});}function wa(za,ab,bb){ua(function(){if(ab===w.WAY_BACK)return true;var cb=ya.getNextSectionKey(ab);if(cb){v.addOnVisible(cb,new m(za,xa.bind(null,cb),false,bb||1000));return true;}return false;});}function xa(za){var ab=v.get(za);if(ab&&ab.canScrollLoad()){ab.load();if(na)ta(za,na.required_units,na.max_parallelism);}}var ya={CURRENT_SECTION_OFFSET:150,registerTimePeriod:function(za,ab,bb,cb,db,eb,fb){sa();if(ba(la,ab))return;if(ka)Object.assign(bb||{},ka);var gb=new x(za,ab,bb,cb,fb);if(!db){v.setMainSectionOrder(ab,eb);ja[ab]=true;}else{gb.setParentKey(db);var hb=v.get(db);if(hb)hb.addSubSection(eb,gb);}v.set(ab,gb);ya.checkCurrentSectionChange();h.inform(r.SECTION_REGISTERED,{scrubberKey:ab,section:gb});},reset:function(){v.removeAllOnVisibles();v.cancelLoadPagelets();for(var za in ma){ma[za].unsubscribe();delete ma[za];}oa&&oa.unsubscribe();oa=null;v.removeAll();ia=null;ja={};ka={};la=[];ha=false;},checkCurrentSectionChange:function(){var za=null;ga(function(){za=ya.getCurrentSection();},function(){var ab=ia&&ia.getScrubberKey();if(za&&za.getScrubberKey()!==ab&&!za.isPermalinkPeriod()){ia=za;var bb=za.getScrubberKey(),cb=za.getParentKey();if(!cb){cb=bb;bb=null;}s.sectionHasChanged(cb,bb);}});},setParallelLoadConfig:function(za){na=za;},getCurrentSection:function(){var za={},ab=v.getAll();for(var bb in ab){var cb=ab[bb];if(!cb||cb.isHiddenFromView())continue;var db=z.getElementPosition(cb.getNode(),'viewport').y;if(cb.getScrubberKey()===w.RECENT_ACTIVITY)db--;if(db<ya.CURRENT_SECTION_OFFSET)za[db]=cb;}var eb=Math.max.apply(null,Object.keys(za)),fb=v.getMainSectionOrder(),gb=eb==-Infinity;if(!gb){return za[eb];}else if(fb[0])return v.get(fb[0]);return null;},getLastVisibleSection:function(){var za=v.getMainSectionOrder();for(var ab=za.length-1;ab>=0;ab--){var bb=v.get(za[ab]);if(bb&&!bb.isHiddenFromView())return bb;}return null;},getRecentActivitySection:function(){return v.get(w.RECENT_ACTIVITY);},capsuleForCurrentSection:function(){var za=ya.getCurrentSection();return za&&j.scry(za.getNode(),'.fbTimelineCapsule')[0];},enableScrollLoad:function(za,ab,bb,cb){za=aa(za);var db=n.byClass(za,'fbTimelineSection')||za.parentNode,eb=db&&j.scry(db,'.fbTimelineCapsule')[0];if(!eb)return;if(bb===null){wa(za,ab,cb);}else s.runOnceWhenSectionFullyLoaded(wa.bind(null,za,ab,cb),ab,bb);},expandSectionOnClick:function(za,ab){l.listen(za,'click',function(bb){bb.prevent();v.get(ab).expand();});},expandSubSectionsOnClick:function(za,ab){l.listen(za,'click',function(bb){bb.prevent();v.cancelLoadPagelet(ab);var cb=v.get(ab),db=cb.getSubSections();if(db&&db.length)ya.navigateToSection(db[0].getScrubberKey());});},getNextSectionKey:function(za){var ab=v.getMainSectionOrder();for(var bb=0;bb<ab.length-1;bb++)if(ab[bb]==za){while(bb<ab.length-1&&!ab[bb+1])bb++;return ab[bb+1];}var cb=v.get(za);if(!cb||!cb.getParentKey())return;var db=v.get(cb.getParentKey());if(!db)return;var eb=db.getSubSections(),fb=eb[eb.length-1];if(cb.getScrubberKey()===fb.getScrubberKey())return ya.getNextSectionKey(cb.getParentKey());for(var gb=0;gb<eb.length-1;gb++)if(eb[gb].getScrubberKey()==za)return eb[gb+1].getScrubberKey();},hideSection:function(za){var ab=v.get(za);if(ab)ab.hide();var bb=s.getCurrentScrubber();if(bb){var cb=null;if(!ja[za]){cb=s.getCurrentScrubber().getSubnav(ab.getParentKey(),za);}else cb=s.getCurrentScrubber().getNav(za);cb&&i.hide(cb);}var db=s.getCurrentStickyHeaderNav();db&&db.removeTimePeriod(za);},loadSectionOnClick:function(za,ab){l.listen(za,'click',function(bb){bb.prevent();v.get(ab).load();});},removeSection:function(za){v.removeOnVisible(za);v.remove(za);delete ja[za];var ab=s.getCurrentStickyHeaderNav();ab&&ab.removeTimePeriod(za);la.push(za);},removeSectionParent:function(za){j.remove(aa(za).parentNode);},navigateToSection:function(za,ab,bb){ab=!!ab;var cb=za,db=v.get(za);if(!db)return;if(!db.isLoaded()){y.enable();j.scry(aa(t.TAB_CONTENT),'.fbTimelineShowOlderSections').forEach(j.remove);}if(!ja[za]){if(!db.isLoaded())db.getNode().style.minHeight=z.getViewportDimensions().y+'px';var eb=h.subscribe(r.SECTION_FULLY_LOADED,function(ob,pb){if(pb.scrubberKey===za){db.getNode().style.minHeight='';eb.unsubscribe();}});cb=db.getParentKey();var fb=v.get(cb);if(fb){var gb=fb.getNode();if(!i.hasClass(gb,'fbTimelineSectionExpanded')){k.scrollTo(gb,0);i.addClass(gb,'fbTimelineSectionExpanded');j.scry(gb,'.fbTimelineCapsule').forEach(j.remove);j.scry(gb,'div.fbTimelineSectionExpandPager').forEach(j.remove);j.scry(gb,'div.fbTimelineContentHeader').forEach(j.remove);j.scry(gb,"._5vf").forEach(function(ob){if(!ob.getAttribute('data-subsection'))j.remove(ob);});}}var hb=ya.getNextSectionKey(cb),ib=v.getOnVisible(hb);if(ib)ib.setBuffer(0);}var jb=v.getMainSectionOrder();for(var kb=0;kb<jb.length;kb++){var lb=jb[kb];if(!lb)continue;if(lb==cb)break;v.get(lb).deactivateScrollLoad().deactivateContentScrollLoad();}db.load(bb,true);v.collapsePlaceHolderHeaders();var mb=z.getScrollPosition().x,nb=z.getElementPosition(db.getNode()).y;if(!ab)k.scrollTo(new z(mb,nb-r.SCROLL_TO_OFFSET,'document'),!u.noScrollAnimation,false,false,0,function(){var ob=z.getElementPosition(db.getNode()).y;k.scrollTo(new z(mb,ob-r.SCROLL_TO_OFFSET,'document'),false);if(za!==w.RECENT_ACTIVITY){var pb=j.scry(db.getNode(),'h3.uiHeaderTitle')[0];if(pb){pb.tabIndex=0;pb.focus();}}});},appendContentAfterLoad:function(za,ab,bb){s.runOnceWhenSectionFullyLoaded(j.appendContent.bind(null,aa(za),ab),bb,'0');},markSectionAsLoaded:function(za,ab,bb){s.runOnceWhenSectionFullyLoaded(function(){fa(za)&&i.removeClass(aa(za).parentNode,'fbTimelineSectionLoading');},ab,bb);},scrollToTimeline:function(za,ab){s.runOnceWhenSectionFullyLoaded(function(){var bb=aa('fbTimelineHeadline');p(function(){k.scrollTo(bb);});},za,ab);},suppressSectionsAbove:function(za){var ab,bb,cb=v.getMainSectionOrder();for(var db=0;db<cb.length;db++){var eb=cb[db];if(!eb)continue;ab=v.get(eb).getNode();bb=null;if(ca(za.parentNode.children).indexOf(za)<=ca(ab.parentNode.children).indexOf(ab)){bb=eb;break;}v.get(eb).deactivateScrollLoad();}if(bb)ya.navigateToSection(bb,true);},forceNoFriendActivity:function(){v.forceNoFriendActivity();},removeDupes:function(za){var ab=fa(za);if(!ab)return;var bb=j.scry(ab,'li.fbTimelineUnit'),cb={};for(var db=0;db<bb.length;db++){var eb=bb[db];if(eb.id&&eb.id.startsWith('tl_unit_')){var fb=eb.id.substring(8,eb.id.length),gb=j.scry(eb,'div.timelineUnitContainer');if(gb.length>0)fb=fb+gb[0].getAttribute('data-time');if(cb.hasOwnProperty(fb)){eb.id='dupe_unit_'+Math.random();eb.className="hidden_elem";}else cb[fb]=1;}}},removeLoadingState:function(za){fa(za)&&i.removeClass(aa(za),'fbTimelineSectionLoading');},setExpandLoadDataForSection:function(za,ab){var bb=v.get(za);bb&&bb.setExpandLoadData(ab);},updatePagerAfterLoad:function(za,ab,bb,cb,db){var eb=o.getInstance(za.firstChild.id);if(!eb){ma[za.firstChild.id]=h.subscribe(o.REGISTERED,function(gb,hb){ma[za.firstChild.id].unsubscribe();delete ma[za.firstChild.id];if(hb.id===za.firstChild.id)ya.updatePagerAfterLoad(za,ab,bb,cb,db);});return;}var fb=eb.getHandler();eb.setHandler(function(gb){i.addClass(za,'async_saving');fb(gb);});s.runOnceWhenSectionFullyLoaded(function(){i.removeClass(za,'fbTimelineHiddenPager');eb.checkBuffer();},bb,cb);if(db)s.runOnceWhenSectionFullyLoaded(s.adjustScrollingPagerBuffer.bind(null,za.firstChild.id,bb),bb,cb);},repositionDialog:function(za){h.subscribe(r.SECTION_LOADED,function(){za.updatePosition();});},rightColumnFinished:function(za){var ab=v.get(za);ab.setRightColumnFinished();}};f.exports=ya;},null);
__d('TimelineLogging',['TimelineComponentKeys','TimelineController','reportData'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=false,l=0,m=null,n=null,o={init:function(p){if(k)return;l=p;i.register(h.LOGGING,this);},reset:function(){k=false;l=0;m=null;},log:function(p,q){q.profile_id=l;j(p,{gt:q});},logSectionChange:function(p,q){var r={timeline_section_change:1,key:p};if(m&&p==m){r.timeline_scrubber=1;m=null;}if(n&&p==n){r.sticky_header_nav=1;n=null;}o.log('timeline',r);},logScrubberClick:function(p){m=p;},logStickyHeaderNavClick:function(p){n=p;}};f.exports=o;},null);
__d('TimelineStickyColumn',['Arbiter','CSS','DOMQuery','Event','Run','Style','TimelineComponentKeys','TimelineConstants','TimelineContentLoader','TimelineController','UITinyViewportAction','Vector','csx','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v=100,w=15,x=15,y=35,z="._2t4u",aa="._5nb8",ba="._2t4v",ca=false,da={},ea=null,fa=null,ga=null,ha,ia,ja,ka=0,la=0,ma=0,na=0,oa=0,pa=0,qa=0,ra;function sa(){ha=p.getCurrentSection();ia=p.getRecentActivitySection();if(!ha||!ha.isRightColumnFinished())return;var jb,kb;if(da.hasDecoupledColumns){jb=db(ia);kb=bb(ia);}else{kb=bb(ha);jb=cb(ha);}ka=jb?jb.offsetHeight:0;la=kb?kb.offsetHeight:0;ma=s.getViewportDimensions().y;qa=jb?s.getElementPosition(jb).y:0;ja=p.getLastVisibleSection();na=ha.getNode().offsetHeight;ra=document.body.clientWidth<document.body.scrollWidth;}function ta(){if(!da.hasDecoupledColumns&&ha)return ha.isRightColumnFinished();if(ia&&ha===ia&&oa>=pa)return ia.isRightColumnFinished();return true;}function ua(){if(!ha)return;if(!da.hasDecoupledColumns&&ga&&ga!==ha){var jb=bb(ga);if(jb)eb(jb,'','','');}pa=oa;oa=s.getScrollPosition().y;var kb;if(da.hasDecoupledColumns){kb=bb(ia);}else kb=bb(ha);if(!kb)return;if(ra){eb(kb,'','','');return;}if(ta()){va(kb);ga=ya(kb)==='fixed'?ha:null;}}function va(jb){if(la>=ka||ka<=ma)return;var kb=qa-fb();if(oa<=kb){eb(jb,'','','');return;}var lb=x+y,mb=oa+ma-lb,nb=oa+la+fb(),ob=qa+na;if(ha===ja)ob+=y;if(!da.hasDecoupledColumns&&ob<=Math.min(nb,mb)){eb(jb,'absolute','',x+'px');return;}var pb=ma-x-fb();if(la<=pb){eb(jb,'fixed',fb()+'px','');return;}if(oa<pa){wa(jb);}else xa(jb);}function wa(jb){var kb=false;if(ya(jb)==='absolute'){var lb=qa+ka-fb(),mb=oa+fb()-qa;if(!!ab(jb)&&mb<=ab(jb)){kb=true;}else if(jb.style.bottom!==''&&oa<=lb-la)kb=true;}if(kb){eb(jb,'fixed',fb()+'px','');return;}if(ya(jb)==='absolute'&&!!ab(jb))return;if(za(jb)){if(ab(jb)>=fb())return;var nb=ma-y,ob=oa-qa-(la-nb);if(!da.hasDecoupledColumns&&ha===ia)ob+=v;if(pa)ob+=pa-oa;eb(jb,'absolute',ob+'px','');return;}}function xa(jb){var kb,lb=false;if(!za(jb)){kb=ab(jb);var mb=oa+ma+y,nb=qa+kb+la;if(mb>=nb)lb=true;}if(!lb)if(oa===pa||!za(jb))return;if(lb){kb=ma-la-x-y;eb(jb,'fixed',kb+'px','');return;}if(za(jb)&&ab(jb)>=fb()){kb=oa-qa+fb();if(pa)kb+=pa-oa;eb(jb,'absolute',kb+'px','');}}function ya(jb){switch(jb.style.position){case 'absolute':case 'static':return jb.style.position;default:return i.hasClass(jb,'fixed_always')?'fixed':'static';}}function za(jb){switch(ya(jb)){case 'absolute':case 'static':return false;default:return true;}}function ab(jb){return jb.style.top?parseInt(jb.style.top,10):0;}function bb(jb){if(jb)return j.scry(jb.getNode(),ba)[0];return null;}function cb(jb){if(jb)return j.scry(jb.getNode(),z)[0];return null;}function db(jb){if(jb)return j.scry(jb.getNode(),aa)[0];return null;}function eb(jb,kb,lb,mb){m.set(jb,'bottom',mb);if(kb==='fixed'){i.addClass(jb,'fixed_always');m.set(jb,'position','');}else{i.removeClass(jb,'fixed_always');m.set(jb,'position',kb);}m.set(jb,'top',lb);h.inform('reflow');}function fb(){return r.isTiny()?w:v;}function gb(){u(sa,ua);}function hb(){ca=false;ga=null;while(ea&&ea.length)ea.pop().remove();ea=null;if(fa)fa.unsubscribe();}var ib={init:function(jb){if(!ca){ca=true;da=jb;ea=[k.listen(window,'scroll',gb),k.listen(window,'resize',gb)];fa=h.subscribe(o.SECTION_FULLY_LOADED,gb);l.onLeave(hb);q.register(n.STICKY_COLUMN,this);}},adjust:function(){if(ca){sa();ua();}}};f.exports=ib;},null);
__d('TimelineViewportTracking',['Arbiter','Banzai','DOM','TimelineSeenStateConstants','TimelineViewportTrackingLogType','ViewportTracking','$','csx','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s;q=babelHelpers.inherits(t,m);r=q&&q.prototype;t.prototype.getAllStories=function(){'use strict';var u=j.scry(this.getStream(),"._5pat"),v=[];for(var w=0;w<u.length;w++)if(this.getStoryID(u[w]))v.push(u[w]);return v;};t.prototype.getStream=function(){'use strict';if(!this.$TimelineViewportTracking1)this.$TimelineViewportTracking1=n('timeline_tab_content');return this.$TimelineViewportTracking1;};t.prototype.getStoryID=function(u){'use strict';var v=JSON.parse(u.getAttribute('data-ft'));if(v){var w=k.FT_TIMELINE_HASH_IDENTIFIER_KEY;return v[w];}return null;};t.prototype.getDataToLog=function(u){'use strict';var v=JSON.parse(u.getAttribute('data-ft'));return {ft:v,log_type:l.IMPRESSION};};t.prototype.getTimetrackingDataToLog=function(u){'use strict';var v=r.getTimetrackingDataToLog.call(this,u);v.log_type=l.DURATION;return v;};t.prototype.sendDataToLog=function(u,v,w,x){'use strict';if(!v.ft)return;var y={};if(x)y.retry=x;if(w)y.delay=2000;i.post('timeline_feed_tracking',v,y);};t.prototype.getDataFromConfig=function(u){'use strict';this.timeout=u.record_delay;this.isSeenStateLoggingEnabled=u.is_seen_state_logging_enabled;this.isTimetrackingEnabled=u.is_timetracking_enabled;this.vpvdDebug=!!u.vpvd_debug;p(h.subscribe(['TimelineConstants/unitSegmentLoaded'],(function(){this.invalidateAllStoriesCache();this.invalidateVisibleStoriesCache();}).bind(this)));};t.prototype.getTimeout=function(){'use strict';return this.timeout;};t.prototype.cleanup=function(){'use strict';s=null;r.cleanup.call(this);};function t(){'use strict';q.apply(this,arguments);}f.exports={getInstance:function(){return s;},init:function(u){if(s)return;s=new t();s.init(u);}};},null);