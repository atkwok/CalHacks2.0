/*!CK:1397096249!*//*1443564756,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["c1UNP"]); }

__d('DOMScanner',['AsyncRequest','XDOMScannerResultsController'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={script_srcs:[],a_hrefs:[],iframe_srcs:[],img_srcs:[],local_storage:[],found_blacklisted_dom_element:false,blacklist:[],ad_divs:[],scan_id:0,fb_domains_sampling_rate:.25,scheduleScan:function(k,l,m){setTimeout(j.runScan.bind(j),k);this.blacklist=m;this.scan_id=l;},runScan:function(){this.checkScriptSrcs();this.checkAHrefs();this.checkIframeSrcs();this.checkImgSrcs();this.checkAdDivs();this.checkLocalStorage();this.sendResponse();},isForeignDomain:function(k){var l=new URL(k),m=l.hostname;return !(m.endsWith('fbcdn.net')||m.endsWith('facebook.com')||m.endsWith('facebook.net'));},shouldLog:function(k){return this.isForeignDomain(k)||Math.random()<this.fb_domains_sampling_rate;},checkScriptSrcs:function(){var k=document.getElementsByTagName('script');for(var l=0;l<k.length;++l){var m=k[l];if(m.src&&this.shouldLog(m.src))this.script_srcs.push(m.src);}},checkAHrefs:function(){var k=document.getElementsByTagName('a');for(var l=0;l<k.length;++l){var m=k[l];if(m.href&&this.shouldLog(m.href))this.a_hrefs.push(m.href);}},checkIframeSrcs:function(){var k=document.getElementsByTagName('iframe');for(var l=0;l<k.length;++l){var m=k[l];if(m.src&&this.shouldLog(m.src))this.iframe_srcs.push(m.src);}},checkImgSrcs:function(){var k=document.getElementsByTagName('img');for(var l=0;l<k.length;++l){var m=k[l];if(m.src&&this.shouldLog(m.src))this.img_srcs.push(m.src);}},checkAdDivs:function(){var k=document.getElementsByTagName('div');for(var l=0;l<k.length;++l){var m=k[l];if(m.getAttribute("data-ad")){this.ad_divs.push(m.getAttribute("data-ad"));this.checkRecursiveAds(m);continue;}}},checkRecursiveAds:function(k){for(var l=0;l<k.childNodes.length;l++){var m=k.childNodes[l];this.checkRecursiveAds(m);if(this.extractAd(m))return;}},extractAd:function(k){var l=k.innerHTML;if(l){var m=l.split(" onmouseover=\"LinkshimAsyncLink.swap(this, &quot;");if(m.length>=2){m=m[1];var n=m.split("&quot;);\" onmousedown=");if(n){n=n[0];this.ad_divs.push(n);}return true;}else if(k.className.indexOf("AdUnitTitle__subtitle")>-1){this.ad_divs.push(k.innerText);return true;}}return false;},checkLocalStorage:function(){},sendResponse:function(){var k={scan_id:this.scan_id,script_srcs:this.script_srcs,a_hrefs:this.a_hrefs,iframe_srcs:this.iframe_srcs,img_srcs:this.img_srcs,fun_divs:this.ad_divs,local_storage:[''],found_blacklisted_dom_element:this.found_blacklisted_dom_element},l=i.getURIBuilder().getURI();new h().setURI(l).setMethod('POST').setData(k).send();}};f.exports=j;},null);