/*!CK:1322739472!*//*1444281402,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["NyQNx"]); }

__d('OGCollectionAddCuration',['AsyncRequest','DataStore','DOM','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='OGCollectionAddCuration';function m(n,o,p,q,r,s){this._container=n;this._control=o;this._itemID=p;this._surface=r;this._display=s.display;if(o)k([o.subscribe('reload',this.reloadControl.bind(this))]);if(q)i.set(String(q),l,this);if(p)i.set(String(p),l,this);}Object.assign(m,{handleDeleteAction:function(n){var o=i.get(String(n),l);if(o)o.reloadControl();},handleAddItemSuccess:function(n,o,p){var q=i.get(String(n),l);i.set(String(o),l,q);q.insertMenuIntoDialog(p);},hideControl:function(n){var o=i.get(String(n),l);o.hideControl();},insertControl:function(n,o){var p=i.get(String(n),l);p.replaceControl(o);},reloadControl:function(n){var o=i.get(String(n),l);if(o)o.reloadControl();}});Object.assign(m.prototype,{hideControl:function(){this._control.hide();},reloadControl:function(){var n=new h('/ajax/collections/add_curation').setData({itemid:this._itemID,surface:this._surface,forceedit:true,display:this._display}).setHandler(this._handleAddCurationResponse.bind(this));n.send();},insertMenuIntoDialog:function(n){this._control.insertMenuIntoDialog(n);},replaceControl:function(n){j.replace(this._container,n);},getMenuControl:function(){return this._control;},_handleAddCurationResponse:function(n){this._control.destroy();j.replace(this._container,n.payload);}});f.exports=m;},null);
__d('OGCollectionAddObject',['AsyncRequest','CSS','DOM','DOMQuery','Form','JSLogger','Parent','TidyArbiterMixin','TimelineAppCollection','ProfileOverviewSection','csx','cx','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=m.create('og_collection_add_object'),v=babelHelpers._extends({ADD_PLACEHOLDER:'OGCollectionAddObject/addPlaceholder',NEW_ITEM:'OGCollectionAddObject/newItem',PLACEHOLDER:'OGCollectionAddObject/placeholder',REMOVE_PLACEHOLDER:'OGCollectionAddObject/removePlaceholder',init:function(w,x,y,z){q.callWithSection(z,(function(aa){this.initImpl(w,x,y,aa.getNode(),z,aa.id);}).bind(this));},initInReport:function(w,x,y){var z=n.byClass(y,"_w8_");this.initImpl(w,x,y,z,null,null);},initImpl:function(w,x,y,z,aa,ba){var ca=k.scry(z,"._620")[0];if(!ca){u.error('grid_not_found',{collection_id:aa,section:ba,csx:'.public/fbTimelineCollectionGrid/root'});return;}x.subscribe('select',function(da,ea){if(!ea.selected.uid||ea.selected.type.indexOf('disabled')!=-1)return;v.inform(v.ADD_PLACEHOLDER,aa);var fa=ca.nextSibling,ga=null;if(fa&&i.hasClass(fa,"_3t3")){i.hide(ca.lastChild);ga=ca.lastChild;}p.addGenericPlaceholderToCollection(l.serialize(y).collection_token,{entityID:ea.selected.uid});v.inform(v.PLACEHOLDER,{grid:ca});var ha=babelHelpers._extends({action:'add',mechanism:'typeahead'},l.serialize(y));new h().setURI(w).setData(ha).setRelativeTo(ca).setErrorHandler(function(ia){var ja=j.scry(ca,'[data-item="'+ea.selected.uid+'"]')[0];if(ja)j.remove(ja);v.inform(v.REMOVE_PLACEHOLDER,aa);ga&&i.show(ga);}).setHandler(function(ia){ga&&j.remove(ga);}).setFinallyHandler(function(ia){v.inform(v.PLACEHOLDER,{grid:ca});}).send();});},replaceItem:function(w,x,y){var z=j.scry(w,'div[data-obj="'+x+'"]')[0];if(z){var aa=n.byClass(z,"_30f");if(aa)v.inform(v.REMOVE_PLACEHOLDER,aa.id);j.remove(z.parentNode);}var ba=j.find(w,'[data-item="'+x+'"]'+"._2804");j.replace(ba,y);this.inform(v.NEW_ITEM,{grid:w,newItem:y});},prependItem:function(w,x){var y=k.scry(t(w),"._620")[0];j.prependContent(y,x);this.inform(v.NEW_ITEM,{grid:y,newItem:x});}},o);f.exports=v;},null);
__d('TimelineCollectionsCuration',['getContextualParent','CSS','Parent','$','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={hideAppSection:function(n){var o=h(k(n),true),p=['getTimelineUnitFromChildElement','getMedleyAppSectionFromChildElement'];for(var q=0;q<p.length;q++){var r=m[p[q]](o);if(r)return i.hide(r);}},getTimelineUnitFromChildElement:function(n){return j.byClass(n,'fbTimelineUnit');},getMedleyAppSectionFromChildElement:function(n){return j.byClass(n,"_30f");}};f.exports=m;},null);
__d('OGCollectionAddToggle',['CSS','DOM','Event','TimelineCollectionsCuration','csx','cx','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o={},p="_91n";function q(s,t,u){h.conditionShow(s,u);h.conditionClass(t,p,u);}var r={initTypeaheadToggleInReport:function(s,t,u){i.prependContent(i.find(k.getTimelineUnitFromChildElement(s),"._5amu"),t);if(o[u]===undefined){o[u]=h.hasClass(t,p);}else q(s,t,o[u]);n(j.listen(t,'click',function(v){q(s,t,o[u]=!o[u]);}));}};f.exports=r;},null);
__d('OGCollectionBatchAddCuration',['AsyncRequest','Event','OGCollectionAddCuration','Parent','Run'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={},n;function o(q){for(var r=0;r<m[q].listeners.length;r++)m[q].listeners[r].remove();m[q]=null;}var p={loadControls:function(q,r,s){if(!r||!Array.isArray(r))return;m[s]=m[s]||{tokens:[],listeners:[]};m[s].tokens=m[s].tokens.concat(r);var t=k.byClass(q,'fbTimelineUnit');m[s].listeners.push(i.listen(t,'mouseenter',function(){new h('/ajax/collections/batch_add_curation').setData({collectionitemtokens:m[s].tokens.join(),surface:s}).send();o(s);}));if(!n){n=true;l.onLeave(function(){for(var u in m)m[u]&&o(u);m={};n=null;});}},attachControls:function(q,r){for(var s=0;s<q.length;s++)j.insertControl(q[s],r[s]);}};f.exports=p;},null);
__d('ProfileInfoRequestSuggestion',['CSS','Event','tidyEvent'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={listenThinker:function(l,m,n){n=n||'hidden_elem';j(i.listen(l,'click',h.removeClass.bind(h,m,n)));}};f.exports=k;},null);
__d('TimelineOGCollectionReportGrid',['CSS','OGCollectionAddObject'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={init:function(k,l){i.subscribe([i.NEW_ITEM,i.PLACEHOLDER],j.hideOverflowNodes.bind(null,k,l));},hideOverflowNodes:function(k,l,m,n){if(n.grid!=k)return;for(var o=0;o<k.childNodes.length;o++)h.conditionShow(k.childNodes[o],o<l);}};f.exports=j;},null);