/*!CK:3592398134!*//*1443410166,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["9NH46"]); }

__d('ChatTabTypeaheadRenderer',['DOM','MercuryNonEmployeeTypeaheadRenderer','MercuryTypeaheadConstants','MercuryThreadMetadataRawRenderer','TypeaheadFacepile'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(o,p){switch(o.type){case j.USER_TYPE:case j.PAGE_TYPE:return i(o,p);case j.THREAD_TYPE:return n(o,p);default:return h.create('div');}}function n(o,p){var q=[],r=o.mercury_thread;if(r.image_src){q.push(h.create('img',{alt:'',src:r.image_src}));}else{var s=o.participants_to_render.map(function(v){return v.big_image_src||v.image_src;});if(s){if(s instanceof Array){s=l.render(s);}else s=h.create('img',{alt:'',src:s});q.push(s);}}var t=r.name,u=k.renderRawParticipantList(r.thread_id,o.participants_to_render,r.participants.length,{names_renderer:k.renderShortNames});q.push(h.create('span',{className:'timestamp'},r.timestamp_relative));q.push(h.create('span',{className:'text'},t));q.push(h.create('span',{className:'subtext'},u));return h.create('li',{className:'node'},q);}m.className='compact';f.exports=m;},null);
__d("XAssociateGroupThreadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/groups\/messenger\/associate_group_thread\/",{});},null,{});
__d('MultiChatController',['AsyncSignal','ChatOpenTab','Form','MercuryIDs','MercuryLocalIDs','MercuryViewer','MercuryServerDispatcher','XAssociateGroupThreadController','MercuryThreadIDMap','MercuryThreads','MercuryDispatcher'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=c('MercuryThreadIDMap').get(),q=c('MercuryThreads').get(),r=c('MercuryDispatcher').get(),s=o.getURIBuilder().getURI().toString();function t(){}Object.assign(t,{subscribe:function(v,w){v.subscribe('confirm',(function(){this.createGroupThreadFromChooserDialog(v,w);}).bind(this));},createGroupThreadFromChooserDialog:function(v,w){var x=j.serialize(v.getRoot()),y=JSON.parse(x.profileChooserItems),z=[];for(var aa in y)if(y[aa])z.push(aa);var ba=t.createThreadForFBIDs(z),ca=r.subscribe('update-thread-ids',function(da,ea){for(var fa in ea)if(ea[fa]==ba){var ga=q.getThreadMetaNow(ba),ha=p.getServerIDFromClientIDNow(ba);if(ga&&!ga.is_canonical&&ha)n.trySend(s,{group_id:w,thread_id:ha});new h('/ajax/groups/chat/log',{group_id:w,message_id:fa}).send();r.unsubscribe(ca);break;}});v.hide();},createThreadForTokens:function(v){var w=m.getID();if(!v.length)return;v=v.filter(function(y){return y!==w;});var x;if(v.length===0){return;}else if(v.length===1){x=k.getThreadIDFromParticipantID(v[0]);i.openThread(x,'ChatTabView');}else{x=l.generateThreadID();v.unshift(w);q.createNewLocalThread(x,v);i.openThread(x,'MultiChatController');}return x;},createThreadForFBIDs:function(v){var w=[];for(var x=0;x<v.length;x++)w.push("fbid:"+v[x]);return t.createThreadForTokens(w);}});var u={};u[s]={mode:n.IMMEDIATE};n.registerEndpoints(u);f.exports=t;},null);
__d('ChatAddFriendsTabSheetRawRenderer',['ChatTabTypeaheadRenderer','ContextualTypeaheadView','DOM','Event','MercuryDataSourceWrapper','MercuryTypeahead','ChatTabTemplates','WorkModeConfig','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q={render:function(r,s,t,u,v,w){var x=w?n[':fb:mercury:chat:tab-sheet:add-friends-empty-tab'].build():n[':fb:mercury:chat:tab-sheet:add-friends'].build(),y=w?l.chat_typeahead_source:l.chat_add_people_source;y.setShowThreads(w);var z=new m(y,i);z.setViewOption('renderer',h);z.setExcludedParticipantsFromThreadMeta(u);if(!w){var aa=o.is_work_user?p._("Add co-workers to this chat"):p._("Add friends to this chat");z.setPlaceholder(aa);}z.build();j.replace(x.getNode('participantsTypeahead'),z.getElement());j.setContent(t,x.getRoot());z.getTokenizer().adjustWidth();var ba=x.getNode('participantsTypeahead').getAttribute('data-labelid'),ca=j.scry(z.getElement(),'input[type="text"]')[0];if(ca)if(ba){ca.setAttribute('aria-labelledby',ba);}else ca.setAttribute('aria-label',p._("To"));z.focus();if(!w){var da=function(){var ea=z.getSelectedParticipantIDs();if(ea.length)v(ea);s.close(r);};k.listen(x.getNode('doneButton'),'click',da);z.subscribe('tokens-return',function(){if(z.getTokens().length)da();});}return z;}};f.exports=q;},null);
__d('ChatAddFriendsTabSheet',['ArbiterMixin','BanzaiLogger','ChatAddFriendsTabSheetRawRenderer','ChatOpenTab','ChatTabActions','MercuryLogMessageType','MercurySourceType','MercuryThreadInfo','MercuryTypeaheadConstants','MultiChatController','Style','MercuryMessageObject','MercuryMessageActions','MercuryThreadActions','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=c('MercuryMessageObject').get(),t=c('MercuryMessageActions').get(),u=c('MercuryThreadActions').get(),v=c('MercuryThreads').get();function w(aa,ba,ca,da){this._threadID=aa;this._rootElement=ba;this._sheetView=ca;this._typeahead=null;this._chatTabView=da;}Object.assign(w.prototype,h,{render:function(){v.getThreadMeta(this._threadID,(function(aa){var ba=aa.is_canonical_user?x:y,ca=v.isNewEmptyLocalThread(this._threadID);this._typeahead=j.render(this,this._sheetView,this._rootElement,aa,ba.bind(null,aa),ca);this._typeahead.subscribe('tokens-changed',(function(){if(ca)z(this,this._typeahead,this._threadID,this._chatTabView);}).bind(this));this._typeahead.subscribe('resize',(function(){this._sheetView.resize();}).bind(this));this._typeahead.subscribe('esc-pressed',(function(){this.inform('esc-pressed');}).bind(this));}).bind(this));},getParticipants:function(){if(!this._typeahead)return null;return this._typeahead.getSelectedParticipantIDs();},isPermanent:function(){return true;},isSheetWithInput:function(){return true;},getType:function(){return 'add_friends_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);},getHeight:function(){return r.get(this._rootElement,'height');}});function x(aa,ba){var ca=aa.participants;q.createThreadForTokens(ca.concat(ba));}function y(aa,ba){var ca=aa.thread_id;if(o.isEmptyLocalThread(aa)){u.addParticipants(ca,ba);}else t.send(s.constructLogMessageObject(n.CHAT_WEB,ca,m.SUBSCRIBE,{added_participants:ba}));k.openThread(ca,'ChatAddFriendsTabSheet');}function z(aa,ba,ca,da){var ea=ba.getTypeahead().getData(),fa=ba.getTokens(),ga=ba.getTypeahead().getCore();ga.getElement().removeAttribute('disabled');ea.setShowThreads(fa.length===0);var ha=fa.length==1&&fa[0].getInfo().render_type===p.THREAD_TYPE;if(ha){var ia=fa[0].getInfo().mercury_thread;if(ia){var ja=da._sharePreview,ka=ja&&ja.getShareData();if(ka)var la=function(ma){return ma.loadShareFromParams(ka.share_type,ka.share_params);};k.openThread(ia.thread_fbid,'openGroupChat','',la);}i.log('MercuryQueryResultsLoggerConfig',{event:'chat_tab_group_thread_click'});l.closeTab(ca,'open_group_chat');}else{if(fa.length==1&&fa[0].getInfo().render_type===p.PAGE_TYPE)ga.getElement().setAttribute('disabled','disabled');i.log('MercuryQueryResultsLoggerConfig',{event:'chat_tab_tokens_changed',chat_tab_tokens:fa.map(function(ma){return ma.info.uid;})});aa.inform('chat/tokens-changed',{token_count:fa.length,tokens:fa});}}f.exports=w;},null);
__d('ChatEmployeeAwaySheet',['ArbiterMixin','DOM','mixin','ChatTabTemplates'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,j(h));m=l&&l.prototype;function n(o,p,q){'use strict';m.constructor.call(this);this.$ChatEmployeeAwaySheet1=o;this.$ChatEmployeeAwaySheet2=p;this.$ChatEmployeeAwaySheet3=q;}n.prototype.render=function(){'use strict';var o=k[':fb:mercury:employee-away-sheet'].build();i.setContent(this.$ChatEmployeeAwaySheet2,o.getRoot());};n.prototype.isPermanent=function(){'use strict';return true;};n.prototype.getType=function(){'use strict';return 'employee-away';};n.prototype.open=function(){'use strict';this.$ChatEmployeeAwaySheet3.open(this);};n.prototype.close=function(){'use strict';this.$ChatEmployeeAwaySheet3.close(this);};f.exports=n;},null);
__d('ChatNameConversationTabSheetRawRenderer',['DOM','Event','Input','Keys','ChatTabTemplates','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n={render:function(o,p,q,r,s,t){var u=l[':fb:mercury:chat:tab-sheet:name-conversation'].build(),v=u.getNode('nameInput'),w=u.getNode('doneButton'),x=m._("Done"),y=m._("Hide"),z=r.name;if(z){j.setValue(v,z);}else h.setContent(w,y);var aa=function(){var ba=j.getValue(v);if(ba)s(ba);t();p.close(o);};i.listen(v,'input',function(){h.setContent(w,j.getValue(v).length===0?y:x);});i.listen(w,'click',aa);i.listen(v,'keyup',function(ba){if(ba.keyCode===k.RETURN){aa();return false;}});h.setContent(q,u.getRoot());!o.isAutomatic()&&v.focus();}};f.exports=n;},null);
__d('ChatNameConversationTabSheet',['AsyncRequest','ChatNameConversationTabSheetRawRenderer','MercuryAPIArgsSource','MercuryLogMessageType','MercurySourceType','MercuryMessageObject','MercuryMessageActions','MercuryThreadIDMap','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=c('MercuryMessageObject').get(),n=c('MercuryMessageActions').get(),o=c('MercuryThreadIDMap').get(),p=c('MercuryThreads').get(),q='/ajax/chat/multichat/name_conversation/dismiss.php',r={};function s(t,u,v){'use strict';this.$ChatNameConversationTabSheet1=t;this.$ChatNameConversationTabSheet2=u;this.$ChatNameConversationTabSheet3=v;this.$ChatNameConversationTabSheet4=false;}s.prototype.render=function(){'use strict';p.getThreadMeta(this.$ChatNameConversationTabSheet1,(function(t){i.render(this,this.$ChatNameConversationTabSheet3,this.$ChatNameConversationTabSheet2,t,this.$ChatNameConversationTabSheet5.bind(null,t),this.$ChatNameConversationTabSheet6.bind(this,t));this.$ChatNameConversationTabSheet3.resize();}).bind(this));};s.prototype.isPermanent=function(){'use strict';return true;};s.prototype.isSheetWithInput=function(){'use strict';return true;};s.prototype.getType=function(){'use strict';return 'name_conversation_type';};s.prototype.open=function(t){'use strict';this.$ChatNameConversationTabSheet4=t;if(!(this.$ChatNameConversationTabSheet4&&this.$ChatNameConversationTabSheet7()))this.$ChatNameConversationTabSheet3.open(this);};s.prototype.close=function(){'use strict';this.$ChatNameConversationTabSheet3.close(this);};s.prototype.isAutomatic=function(){'use strict';return this.$ChatNameConversationTabSheet4;};s.prototype.$ChatNameConversationTabSheet7=function(){'use strict';return !!r[this.$ChatNameConversationTabSheet1];};s.prototype.$ChatNameConversationTabSheet8=function(){'use strict';r[this.$ChatNameConversationTabSheet1]=true;};s.prototype.$ChatNameConversationTabSheet6=function(t){'use strict';if(!t.name_conversation_sheet_dismissed||!this.$ChatNameConversationTabSheet7()){this.$ChatNameConversationTabSheet8();o.getServerIDFromClientID(t.thread_id,function(u){new h(q).setData({thread_fbid:u}).send();});}};s.prototype.$ChatNameConversationTabSheet5=function(t,u){'use strict';var v=t.name;if((u||v)&&u!=v)n.send(m.constructLogMessageObject(l.CHAT_WEB,t.thread_id,k.THREAD_NAME,{name:u}),null,j.CHAT);};f.exports=s;},null);
__d('ChatNewMessagesTabSheet',['Event','ArbiterMixin','DOM','ChatTabTemplates','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(n,o,p){this._threadID=n;this._rootElement=o;this._sheetView=p;}Object.assign(m.prototype,i,{render:function(){var n=k[':fb:mercury:chat:tab-sheet:clickable-message-icon-sheet'].build();j.setContent(n.getNode('text'),l._("Scroll down to see new messages."));j.setContent(this._rootElement,n.getRoot());h.listen(n.getRoot(),'click',(function(){this.inform('clicked',this._threadID);}).bind(this));},isPermanent:function(){return true;},isSheetWithInput:function(){return true;},getType:function(){return 'new_messages_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);}});f.exports=m;},null);
__d('ChatNoRecipientsTabSheet',['DOM','ChatTabTemplates','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m,n){this._threadID=l;this._rootElement=m;this._sheetView=n;}Object.assign(k.prototype,{render:function(){var l=i[':fb:mercury:chat:tab-sheet:message-icon-sheet'].build();h.setContent(l.getNode('text'),j._("Everyone has left the conversation."));h.setContent(this._rootElement,l.getRoot());},isPermanent:function(){return true;},getType:function(){return 'no_recipients_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);}});f.exports=k;},null);
__d('ChatOfflineTabSheet',['ChatPrivacyActionController','ChatVisibility','CSS','DOM','JSXDOM','Event','JSLogger','MercuryIDs','MercuryParticipants','ChatTabTemplates','WorkModeConfig','cx','emptyFunction','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();function v(w,x,y){this._rootElement=x;this._sheetView=y;this._logger=n.create('blackbird');this._canonicalUser=o.getUserIDFromThreadID(w);if(this._canonicalUser)this._privacyActionController=new h(this._canonicalUser,t);}Object.assign(v.prototype,{render:function(){if(!this._canonicalUser){this._logger.error('offline_sheet_open_with_non_friend');return;}var w=q[':fb:mercury:chat:tab-sheet:message-icon-sheet'].build(),x='fbid:'+this._canonicalUser;p.get(x,(function(y){var z='fbChatGoOnlineLink',aa=l.a({href:"#",className:z},u._("turn on chat")),ba;if(r.is_work_user){ba=u._("To chat with {name} and other co-workers, {link}.",[u.param('name',y.short_name),u.param('link',aa)]);}else ba=u._("To chat with {name} and other friends, {link}.",[u.param('name',y.short_name),u.param('link',aa)]);k.setContent(w.getNode('text'),ba);j.addClass(w.getRoot(),"_1sk1");k.setContent(this._rootElement,w.getRoot());m.listen(this._rootElement,'click',(function(event){if(j.hasClass(event.getTarget(),z)){if(i.isOnline())this._logger.error('tab_sheet_already_online');this._privacyActionController.togglePrivacy();this._logger.log('tab_sheet_go_online',{tab_id:this._canonicalUser});return false;}}).bind(this));this._sheetView.resize();}).bind(this));},isPermanent:function(){return true;},getType:function(){return 'offline_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);},destroy:function(){this._privacyActionController&&this._privacyActionController.destroy();}});f.exports=v;},null);
__d('ChatReadOnlyTabSheet',['React','ReactDOM','MercuryReadOnlyReason','cx','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=c('MercuryThreads').get();function m(n,o,p){'use strict';this.$ChatReadOnlyTabSheet1=n;this.$ChatReadOnlyTabSheet2=o;this.$ChatReadOnlyTabSheet3=p;}m.prototype.render=function(){'use strict';var n=j.getReason(l.getThreadMetaNow(this.$ChatReadOnlyTabSheet1));i.render(h.createElement('div',{className:"_87-"},n),this.$ChatReadOnlyTabSheet2);};m.prototype.isPermanent=function(){'use strict';return false;};m.prototype.getType=function(){'use strict';return 'chat-thread-is-read-only';};m.prototype.open=function(){'use strict';this.$ChatReadOnlyTabSheet3.open(this);};m.prototype.close=function(){'use strict';this.$ChatReadOnlyTabSheet3.open(this);};f.exports=m;},null);
__d('ChatThreadIsMutedTabSheet',['Event','ArbiterMixin','DOM','ChatTabTemplates','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(n,o,p){this._threadID=n;this._rootElement=o;this._sheetView=p;}Object.assign(m.prototype,i,{render:function(){var n=k[':fb:mercury:chat:tab-sheet:message-mute-sheet'].build();j.setContent(n.getNode('text'),l._("This conversation is muted. Chat tabs will not pop up for it and push notifications are off."));j.setContent(this._rootElement,n.getRoot());h.listen(n.getNode('unmuteButton'),'click',(function(){this.inform('clicked',this._threadID);}).bind(this));},isPermanent:function(){return false;},getType:function(){return 'chat-thread-is-muted';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);}});f.exports=m;},null);
__d('ChatUploadWarningTabSheet',['DOM','ChatTabTemplates','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m,n){this._threadID=l;this._rootElement=m;this._sheetView=n;}Object.assign(k.prototype,{render:function(){var l=i[':fb:mercury:chat:tab-sheet:message-icon-sheet'].build();h.setContent(l.getNode('text'),j._("Please wait until the upload is complete before you send your message."));h.setContent(this._rootElement,l.getRoot());},isPermanent:function(){return false;},getType:function(){return 'upload_warning_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);}});f.exports=k;},null);
__d('ChatUserBlockedTabSheet',['CSS','ChatPrivacyActionController','DOM','Event','GenderConst','JSLogger','MercuryIDs','MercuryParticipants','ChatTabTemplates','cx','emptyFunction','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();function t(u,v,w){this._rootElement=v;this._sheetView=w;this._logger=m.create('blackbird');this._canonicalUser=n.getUserIDFromThreadID(u);if(this._canonicalUser)this._privacyActionController=new i(this._canonicalUser,r);}Object.assign(t.prototype,{render:function(){if(!this._canonicalUser){this._logger.error('user_blocked_sheet_open_with_non_friend');return;}var u=p[':fb:mercury:chat:tab-sheet:user-blocked'].build(),v='fbid:'+this._canonicalUser;o.get(v,(function(w){var x=null;switch(w.gender){case l.FEMALE_SINGULAR:case l.FEMALE_SINGULAR_GUESS:x=s._("You turned off chat for {name} but you can still send her a message.",[s.param('name',w.short_name)]);break;case l.MALE_SINGULAR:case l.MALE_SINGULAR_GUESS:x=s._("You turned off chat for {name} but you can still send him a message.",[s.param('name',w.short_name)]);break;default:x=s._("You turned off chat for {name} but you can still send them a message.",[s.param('name',w.short_name)]);}j.setContent(u.getNode('text'),x+' ');var y=s._("Turn on chat for {name}?",[s.param('name',w.short_name)]);j.setContent(u.getNode('actionLink'),y);h.addClass(u.getRoot(),"_1sk0");j.setContent(this._rootElement,u.getRoot());k.listen(u.getNode('actionLink'),'click',this._privacyActionController.togglePrivacy.bind(this._privacyActionController));this._sheetView.resize();}).bind(this));},isPermanent:function(){return true;},getType:function(){return 'user_blocked_type';},open:function(){this._sheetView.open(this);},close:function(){this._sheetView.close(this);},destroy:function(){this._privacyActionController&&this._privacyActionController.destroy();}});f.exports=t;},null);