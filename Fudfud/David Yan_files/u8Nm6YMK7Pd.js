/*!CK:3038254391!*//*1442604224,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["qF0e1"]); }

__d('MetaComposerEdDialog',['ARIA','Animation','Arbiter','AsyncRequest','DOM','Ease','Parent','SelectorDeprecated','Vector','getElementText'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=null;function s(t){this._dialog=t.dialog;this.config=t;this._init();}s.init=function(t){if(r){r.config.show_audience=t.show_audience;t.dialog.destroy();return;}r=new s(t);};Object.assign(s.prototype,{_init:function(){j.subscribe(['ComposerXStatusAttachment/ready','ReactComposerStatusLazyAttachment/mounted'],(function(){if(this.config.show_audience){this._sendEducationRequest({},'/ajax/composer/audience/education',this._handlerCustomDuration.bind(this,6000));this.config.show_audience=false;}}).bind(this));if(this.config.show_sticky)j.subscribe('composer/mutate',(function(t,u){this._sendEducationRequest({sticky_num:this.config.n_sticky_shown},'/ajax/composer/audience/sticky_education');}).bind(this));if(this.config.show_tags)j.subscribe('SelectedPrivacyOption/changed',(function(t,u){this._sendEducationRequest({ids:u.tags,from:'WithTagger',hasEvent:u.hasEvent,type:u.privacy,tag_num:this.config.n_tag_shown},'/ajax/composer/audience/tag_education',this._handler.bind(this));}).bind(this));o.subscribe('open',this._killAnim.bind(this));},_sendEducationRequest:function(t,u,v){if(!this._updateDialogContext())return;this._async&&this._async.abort();this._async=new k(u);this._async.setData(t).setHandler(v).send();},_updateDialogContext:function(){var t=l.scry(document.body,'div.composerAudienceWrapper'),u,v;for(var w=0;w<t.length;w++){u=t[w];v=p.getElementPosition(u);if(u&&v.x>0&&v.y>0){this._dialog.setContext(u);return true;}}return false;},_handler:function(t){this._handlerCustomDuration(1500,t);},_handlerCustomDuration:function(t,u){var v=u.payload;if(!v||!this._updateDialogContext())return;var w=this._dialog.getContent().firstChild;l.setContent(w,v);h.announce(q(w));this._dialog.show();var x=n.byClass(w,'metaComposerUserEd');if(this._anim){this._anim.stop();this._anim=new i(x);}else this._anim=new i(x).from('opacity',0);this._anim.to('opacity',1).ease(m.sineOut).checkpoint().duration(t).checkpoint().to('opacity',0).ease(m.sineOut).checkpoint().ondone(this._killAnim.bind(this)).go();},_killAnim:function(t,u){if(this._anim){this._dialog.hide();this._anim.stop();this._anim=null;}}});f.exports=s;},null);
__d('legacy:tour',['Tour'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();b.Tour=c('Tour');},3);